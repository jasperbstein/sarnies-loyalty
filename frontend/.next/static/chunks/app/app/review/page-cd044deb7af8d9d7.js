(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2042],{2181:function(e,t,s){Promise.resolve().then(s.bind(s,9641))},9641:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j},dynamic:function(){return v}});var a=s(7437),r=s(2265),n=s(9376),l=s(7209),i=s(7648),o=s(9637),c=s(5080),d=s(5621),u=s(2369),h=s(2097),m=(0,r.memo)(function(e){let{currentTab:t}=e,s=(0,n.usePathname)(),{user:l}=(0,h.t)(),m=(null==l?void 0:l.user_type)==="employee",x=(0,r.useMemo)(()=>[{id:"home",label:"HOME",icon:o.Z,href:"/app/home",isActive:"/app/home"===s||"/app/dashboard"===s||"home"===t},{id:"rewards",label:"VOUCHERS",icon:c.Z,href:"/app/rewards",isActive:"/app/rewards"===s||s.startsWith("/app/vouchers")||"rewards"===t},{id:"activity",label:"HISTORY",icon:d.Z,href:"/app/activity",isActive:"/app/activity"===s||"activity"===t},{id:"profile",label:"PROFILE",icon:u.Z,href:"/app/profile",isActive:"/app/profile"===s||"profile"===t}],[s,t,m]);return(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-black/10 z-50 pb-safe",children:(0,a.jsx)("div",{className:"max-w-screen-xl mx-auto px-4",children:(0,a.jsx)("div",{className:"flex justify-between items-center h-20",children:x.map(e=>{let t=e.icon;return(0,a.jsxs)(i.default,{href:e.href,prefetch:!0,className:"relative flex flex-col items-center justify-center py-2 px-6 rounded-xl transition-all ".concat(e.isActive?"text-black":"text-black/40 hover:text-black/60"),children:[(0,a.jsx)(t,{className:"w-6 h-6 mb-1.5 ".concat(e.isActive?"stroke-[2.5]":"stroke-[1.5]")}),(0,a.jsx)("span",{className:"text-nav ".concat(e.isActive?"text-black":"text-black/40"),children:e.label}),e.isActive&&(0,a.jsx)("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ".concat(m?"bg-mustard":"bg-black")})]},e.id)})})})})}),x=s(2489),p=s(6595),f=s(4743),b=s(4226);function g(e){var t;let{isOpen:s,onClose:n,userName:l}=e,[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1);if(!s)return null;let y=e=>{if(o(e),e>=4){let e="https://www.google.com/maps/place/Sarnies+Sukhumvit/@13.7417168,100.5614754,17z/data=!4m8!3m7!1s0x30e29ecdb85f25e1:0xb3d71707071c17f4!8m2!3d13.7417168!4d100.5614754!9m1!1b1!16s/g/11fflt1q8l?entry=ttu&g_ep=EgoyMDI1MTExNi4wIKXMDSoASAFQAw%3D%3D#:~:text=%EE%95%A0-,Write,-a%20review",t=/iPhone|iPad|iPod/i.test(navigator.userAgent),s=/Android/i.test(navigator.userAgent);if(t){let t=!1,s=setTimeout(()=>{t||window.open(e,"_blank")},1500);window.addEventListener("blur",()=>{t=!0,clearTimeout(s)},{once:!0}),window.location.href="comgooglemaps://?center=13.7417168,100.5614754&q=Sarnies+Sukhumvit"}else if(s){let t="intent://maps.google.com/maps?center=".concat("13.7417168",",").concat("100.5614754","&q=").concat("Sarnies+Sukhumvit","#Intent;scheme=https;package=com.google.android.apps.maps;end;"),s=!1,a=setTimeout(()=>{s||window.open(e,"_blank")},1500);window.addEventListener("blur",()=>{s=!0,clearTimeout(a)},{once:!0}),window.location.href=t}else window.open(e,"_blank");setTimeout(()=>{n()},2e3)}},v=null!==(t=null!=c?c:i)&&void 0!==t?t:0;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden animate-slide-up",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-sarnies-black to-sarnies-charcoal text-white p-6 relative",children:[(0,a.jsx)("button",{onClick:n,className:"absolute top-4 right-4 text-white/70 hover:text-white transition-colors",children:(0,a.jsx)(x.Z,{size:24})}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"How was your experience?"}),(0,a.jsxs)("p",{className:"text-white/80 text-sm",children:[l?"Hey ".concat(l,"! "):"","Your feedback helps us improve"]})]}),(0,a.jsx)("div",{className:"p-6",children:m?(0,a.jsxs)("div",{className:"py-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-sarnies-black mb-2",children:"Thank you!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Your feedback has been received"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{onClick:()=>y(e),onMouseEnter:()=>d(e),onMouseLeave:()=>d(null),className:"transition-all transform hover:scale-110 active:scale-95",children:(0,a.jsx)(p.Z,{size:48,className:"transition-all ".concat(e<=v?"fill-amber-400 text-amber-400":"fill-none text-gray-300")})},e))}),(0,a.jsx)("div",{className:"text-center mb-6",children:null===i?(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Tap a star to rate"}):i>=4?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-bold text-green-600 mb-2",children:5===i?"Amazing!":"Great!"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Redirecting you to Google to share your review..."})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-bold text-amber-600 mb-2",children:1===i?"We can do better \uD83D\uDE14":2===i?"Not great \uD83D\uDE10":"It was okay \uD83E\uDD14"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Help us improve! What went wrong?"}),(0,a.jsx)("textarea",{placeholder:"Tell us what happened... (optional)",value:u,onChange:e=>h(e.target.value),className:"w-full h-32 p-4 border-2 border-gray-200 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-sarnies-black focus:border-transparent text-sm"}),(0,a.jsxs)(b.Z,{variant:"primary",size:"lg",fullWidth:!0,onClick:()=>{g(!0),setTimeout(()=>{n(),o(null),h(""),g(!1)},2e3)},className:"mt-4",children:[(0,a.jsx)(f.Z,{size:18}),(0,a.jsx)("span",{children:"Submit Feedback"})]}),(0,a.jsx)("button",{onClick:n,className:"w-full mt-3 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Skip for now"})]})})]})})]})})}var y=s(5302);let v="force-dynamic";function w(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{user:s}=(0,h.t)(),[i,o]=(0,r.useState)(!1),c=t.get("type"),d=t.get("points"),u=t.get("amount");return(0,r.useEffect)(()=>{let e=setTimeout(()=>{o(!0)},500);return()=>clearTimeout(e)},[]),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 pb-24",children:(0,a.jsxs)("div",{className:"max-w-md w-full",children:[(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-lg p-8 text-center mb-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(y.Z,{size:48,className:"text-green-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-sarnies-black mb-3",children:"earn"===c?"Points Earned!":"Voucher Redeemed!"}),(0,a.jsxs)("div",{className:"space-y-2 mb-6",children:["earn"===c&&d&&(0,a.jsxs)("p",{className:"text-lg text-gray-700",children:["You earned ",(0,a.jsxs)("span",{className:"font-bold text-green-600",children:["+",d," points"]})]}),u&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Transaction: à¸¿",u]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Current balance: ",(null==s?void 0:s.points_balance)||0," points"]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)("p",{className:"text-gray-700 font-medium mb-4",children:"How was your experience today?"}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"w-full bg-sarnies-black text-white py-3 rounded-xl font-bold hover:bg-sarnies-charcoal transition-all shadow-sm hover:shadow-md",children:"Rate Your Experience"}),(0,a.jsx)("button",{onClick:()=>e.push("/app/dashboard"),className:"w-full mt-3 text-sm text-gray-500 hover:text-gray-700 transition-colors py-2",children:"Skip and return home"})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-4 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"})," Leaving a 5-star review helps us serve you better!"]})})]})}),(0,a.jsx)(m,{currentTab:"home"}),(0,a.jsx)(g,{isOpen:i,onClose:()=>{o(!1),setTimeout(()=>{e.push("/app/dashboard")},300)},userName:null==s?void 0:s.name})]})}function j(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(l.Z,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-black border-t-transparent rounded-full animate-spin"})})}),children:(0,a.jsx)(w,{})})}},7209:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var a=s(7437),r=s(9376),n=s(2097),l=s(9637),i=s(5080),o=s(5621),c=s(2369),d=s(7692),u=s(2265);function h(e){let{children:t,hideLogout:s=!1}=e,h=(0,r.useRouter)(),m=(0,r.usePathname)(),{user:x,logout:p}=(0,n.t)(),[f,b]=(0,u.useState)(!1);(0,u.useEffect)(()=>{b(!0)},[]);let g=e=>!!e&&("customer"===e.type||"staff"===e.type||"customer"===e.user_type||"employee"===e.user_type||"staff"===e.user_type);if((0,u.useEffect)(()=>{f&&!g(x)&&h.push("/login")},[x,h,f]),!f)return(0,a.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"})});if(!g(x))return null;let y=[{icon:l.Z,label:"HOME",path:"/app/home"},{icon:i.Z,label:"VOUCHERS",path:"/app/vouchers"},{icon:o.Z,label:"HISTORY",path:"/app/activity"},{icon:c.Z,label:"PROFILE",path:"/app/profile"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 h-header bg-black z-fixed",children:(0,a.jsxs)("div",{className:"h-full max-w-container mx-auto px-6 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-label text-white",children:"SARNIES"}),!s&&(0,a.jsx)("button",{onClick:()=>{confirm("Are you sure you want to log out?")&&(p(),h.push("/login"))},className:"p-2.5 -mr-2.5 text-white/60 hover:text-white transition-opacity","aria-label":"Log out",type:"button",children:(0,a.jsx)(d.Z,{className:"w-[18px] h-[18px]",strokeWidth:1.5})})]})}),(0,a.jsx)("main",{className:"pt-header pb-[calc(var(--nav-height)+env(safe-area-inset-bottom,0px)+16px)] min-h-screen",children:(0,a.jsx)("div",{className:"max-w-container mx-auto px-5 py-6",children:t})}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-fixed pb-safe",children:(0,a.jsx)("div",{className:"max-w-container mx-auto px-4",children:(0,a.jsx)("div",{className:"flex justify-around items-start h-[60px] pt-2.5",children:y.map(e=>{let t=e.icon,s=m===e.path||m.startsWith(e.path);return(0,a.jsxs)("button",{onClick:()=>h.push(e.path),className:"flex flex-col items-center justify-start min-w-[64px] py-1 transition-all active:scale-95",children:[(0,a.jsxs)("div",{className:"relative mb-1",children:[(0,a.jsx)(t,{className:"w-[22px] h-[22px] transition-colors ".concat(s?"text-black stroke-[2]":"text-gray-400 stroke-[1.5]")}),s&&(0,a.jsx)("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ".concat((null==x?void 0:x.user_type)==="employee"?"bg-mustard":"bg-accent")})]}),(0,a.jsx)("span",{className:"text-nav ".concat(s?"text-black":"text-gray-400"),children:e.label})]},e.path)})})})})]})}},4226:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(7437),r=s(5863);function n(e){let{children:t,variant:s="primary",size:n="md",loading:l=!1,fullWidth:i=!1,disabled:o,className:c="",...d}=e;return(0,a.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-semibold transition-all duration-100 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-gradient-to-br from-black to-gray-800 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-black",secondary:"bg-white text-black hover:bg-gray-50 press-scale border border-gray-200 shadow-sm hover:shadow-md rounded-xl focus:ring-gray-400",success:"bg-gradient-to-br from-green-600 to-green-700 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-green-500",danger:"bg-gradient-to-br from-red-600 to-red-700 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-red-500",ghost:"bg-transparent text-black hover:bg-gray-100 press-scale rounded-xl focus:ring-gray-400","admin-primary":"bg-gradient-to-br from-black to-gray-800 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-black","admin-secondary":"bg-white border border-gray-200 text-black hover:bg-gray-50 press-scale shadow-sm hover:shadow-md rounded-xl focus:ring-gray-400"}[s]," ").concat({sm:"px-3 py-2 text-xs gap-1.5",md:"px-4 py-2.5 text-sm gap-2",lg:"px-6 py-3 text-base gap-2.5"}[n]," ").concat(i?"w-full":""," ").concat(c),disabled:o||l,...d,children:[l&&(0,a.jsx)(r.Z,{className:"w-4 h-4 animate-spin"}),t]})}},2097:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(9625),r=s(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,s)=>{e({user:t,token:s})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,r.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{null==e||e.setHasHydrated(!0)}}))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=s;return(0,a.createElement)("svg",{ref:l,...r,width:o,height:o,stroke:i,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(n(e)),u].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5621:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},9637:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},4743:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},6595:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5080:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(2972),r=s.n(a)}},function(e){e.O(0,[1299,2972,2971,2117,1744],function(){return e(e.s=2181)}),_N_E=e.O()}]);