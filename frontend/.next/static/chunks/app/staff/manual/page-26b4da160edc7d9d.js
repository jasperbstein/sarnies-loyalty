(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6123],{4036:function(e,t,r){Promise.resolve().then(r.bind(r,2740))},2740:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var s=r(7437),a=r(2265),o=r(3247),n=r(8226),i=r(9345),l=r(3041),c=r(2369),d=r(2660);let u=(0,r(9763).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var m=r(2252),x=r(5302),g=r(9376),h=r(4226);r(9178),r(9379),r(7606),r(5225),r(9326);var p=r(9116);function b(){let e=(0,g.useRouter)(),[t,r]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[y,v]=(0,a.useState)("customer"),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(""),[Z,C]=(0,a.useState)([]),[S,z]=(0,a.useState)(null),[P,I]=(0,a.useState)(!1),A=(0,a.useCallback)(async e=>{if(e.length<2){C([]),I(!1);return}N(!0),k("");try{let t=await p.ZP.get("/pos/search-customer?q=".concat(encodeURIComponent(e)));C(t.data.customers),I(!0)}catch(e){var t,r;k((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||e.message||"Search failed"),C([])}finally{N(!1)}},[]);(0,a.useEffect)(()=>{if("customer"!==y)return;let e=setTimeout(()=>{t.trim().length>=2&&A(t.trim())},300);return()=>clearTimeout(e)},[t,A,y]);let D=async e=>{if(e.preventDefault(),k(""),!b.trim()){k("Please enter a voucher code");return}N(!0);try{let e=await p.ZP.post("/pos/scan-qr",{qr_data:b.trim()});"voucher_redeemed"===e.data.type?k("Voucher has already been redeemed"):"voucher_ready"===e.data.type&&e.data.customer?z(e.data.customer):k("Invalid voucher code")}catch(e){var t,r;k((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||e.message||"Invalid voucher code")}finally{N(!1)}},M=e=>{z(e),I(!1),r("")};return(0,s.jsxs)("div",{className:"min-h-screen w-full lg:max-w-[800px] lg:mx-auto bg-[var(--color-background)]",children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b border-[var(--color-border)]",children:(0,s.jsxs)("div",{className:"flex items-center gap-4 px-4 h-14",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:(0,s.jsx)(d.Z,{size:20,className:"text-[var(--color-text-primary)]"})}),(0,s.jsx)("h1",{className:"text-[17px] font-semibold text-[var(--color-text-primary)]",children:"Manual Entry"})]})}),(0,s.jsxs)("div",{className:"p-4 lg:p-6",children:[(0,s.jsxs)("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg mb-6",children:[(0,s.jsxs)("button",{onClick:()=>{v("customer"),k(""),z(null)},className:"flex-1 py-2.5 text-[14px] font-medium rounded-md transition-all ".concat("customer"===y?"bg-white text-[var(--color-text-primary)] shadow-sm":"text-[var(--color-text-secondary)]"),children:[(0,s.jsx)(o.Z,{size:16,className:"inline mr-2"}),"Find Customer"]}),(0,s.jsxs)("button",{onClick:()=>{v("voucher"),k(""),z(null)},className:"flex-1 py-2.5 text-[14px] font-medium rounded-md transition-all ".concat("voucher"===y?"bg-white text-[var(--color-text-primary)] shadow-sm":"text-[var(--color-text-secondary)]"),children:[(0,s.jsx)(u,{size:16,className:"inline mr-2"}),"Voucher Code"]})]}),w&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[(0,s.jsx)(m.Z,{size:18,className:"text-red-500 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-[13px] text-red-600",children:w})]}),"customer"===y&&!S&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[13px] font-medium text-[var(--color-text-secondary)] mb-2",children:"Search Customer"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 h-14 px-4 bg-white border border-[var(--color-border)] rounded-xl",children:[(()=>{let e=t.trim();return e?/^\d+$/.test(e)?(0,s.jsx)(n.Z,{size:20,className:"text-blue-500"}):e.includes("@")?(0,s.jsx)(i.Z,{size:20,className:"text-purple-500"}):e.startsWith("+")||/^0?\d{9,10}$/.test(e)?(0,s.jsx)(l.Z,{size:20,className:"text-green-500"}):(0,s.jsx)(c.Z,{size:20,className:"text-amber-500"}):(0,s.jsx)(o.Z,{size:20,className:"text-[var(--color-text-tertiary)]"})})(),(0,s.jsx)("input",{type:"text",placeholder:"Phone, email, ID, or name...",value:t,onChange:e=>r(e.target.value),className:"flex-1 bg-transparent text-[15px] text-[var(--color-text-primary)] placeholder:text-[var(--color-text-tertiary)] focus:outline-none",autoFocus:!0}),j&&(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-[var(--color-brand)] rounded-full animate-spin"})]}),(0,s.jsx)("p",{className:"text-[12px] text-[var(--color-text-tertiary)] mt-1 px-1",children:(()=>{let e=t.trim();return e?/^\d+$/.test(e)?"Searching by ID...":e.includes("@")?"Searching by email...":e.startsWith("+")||/^0?\d{9,10}$/.test(e)?"Searching by phone...":"Searching by name...":"Search by phone, email, ID, or name"})()}),P&&Z.length>0&&(0,s.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-[var(--color-border)] rounded-xl shadow-lg max-h-[300px] overflow-y-auto z-20",children:Z.map(e=>(0,s.jsxs)("button",{onClick:()=>M(e),className:"w-full p-3 flex items-center gap-3 hover:bg-gray-50 transition-colors border-b border-[var(--color-border)] last:border-b-0",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(c.Z,{size:18,className:"text-gray-500"})}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsxs)("p",{className:"text-[14px] font-medium text-[var(--color-text-primary)]",children:[e.name," ",e.surname||""]}),(0,s.jsxs)("p",{className:"text-[12px] text-[var(--color-text-secondary)]",children:[e.phone," ",e.email&&"• ".concat(e.email)]}),(0,s.jsxs)("p",{className:"text-[11px] text-[var(--color-text-tertiary)]",children:[e.points_balance," pts • ",e.user_type," ",e.member_id&&"• ".concat(e.member_id)]})]})]},e.id))}),P&&0===Z.length&&t.length>=2&&!j&&(0,s.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-[var(--color-border)] rounded-xl shadow-lg p-4 z-20",children:(0,s.jsxs)("p",{className:"text-[13px] text-[var(--color-text-secondary)] text-center",children:['No customers found for "',t,'"']})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(l.Z,{size:14,className:"text-green-500"}),(0,s.jsx)("span",{className:"text-[12px] font-medium text-[var(--color-text-primary)]",children:"Phone"})]}),(0,s.jsx)("p",{className:"text-[11px] text-[var(--color-text-tertiary)]",children:"+66812345678 or 0812345678"})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(i.Z,{size:14,className:"text-purple-500"}),(0,s.jsx)("span",{className:"text-[12px] font-medium text-[var(--color-text-primary)]",children:"Email"})]}),(0,s.jsx)("p",{className:"text-[11px] text-[var(--color-text-tertiary)]",children:"john@example.com"})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(n.Z,{size:14,className:"text-blue-500"}),(0,s.jsx)("span",{className:"text-[12px] font-medium text-[var(--color-text-primary)]",children:"ID"})]}),(0,s.jsx)("p",{className:"text-[11px] text-[var(--color-text-tertiary)]",children:"Customer ID number"})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(c.Z,{size:14,className:"text-amber-500"}),(0,s.jsx)("span",{className:"text-[12px] font-medium text-[var(--color-text-primary)]",children:"Name"})]}),(0,s.jsx)("p",{className:"text-[11px] text-[var(--color-text-tertiary)]",children:"John or John Doe"})]})]})]}),"voucher"===y&&!S&&(0,s.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[13px] font-medium text-[var(--color-text-secondary)] mb-2",children:"Voucher Code or QR Data"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 h-14 px-4 bg-white border border-[var(--color-border)] rounded-xl",children:[(0,s.jsx)(u,{size:20,className:"text-[var(--color-text-tertiary)]"}),(0,s.jsx)("input",{type:"text",placeholder:"Enter voucher code...",value:b,onChange:e=>f(e.target.value),className:"flex-1 bg-transparent text-[15px] text-[var(--color-text-primary)] placeholder:text-[var(--color-text-tertiary)] focus:outline-none"})]})]}),(0,s.jsxs)(h.Z,{type:"submit",loading:j,className:"w-full h-12",children:[(0,s.jsx)(o.Z,{size:18,className:"mr-2"}),"Validate Code"]})]}),S&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(x.Z,{size:20,className:"text-green-600"}),(0,s.jsx)("span",{className:"text-[14px] font-medium text-green-800",children:"Customer Found"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 bg-white rounded-full flex items-center justify-center border-2 border-green-200",children:(0,s.jsx)(c.Z,{size:24,className:"text-green-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"text-[16px] font-semibold text-[var(--color-text-primary)]",children:[S.name," ",S.surname||""]}),(0,s.jsx)("p",{className:"text-[13px] text-[var(--color-text-secondary)]",children:S.phone}),S.email&&(0,s.jsx)("p",{className:"text-[13px] text-[var(--color-text-secondary)]",children:S.email}),(0,s.jsxs)("p",{className:"text-[13px] text-[var(--color-text-secondary)]",children:[S.points_balance," points • ",S.user_type,S.tier_level&&" • ".concat(S.tier_level)]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(h.Z,{variant:"secondary",onClick:()=>{z(null),r(""),f("")},className:"flex-1 h-12",children:"Search Again"}),(0,s.jsx)(h.Z,{onClick:()=>{S&&e.push("/staff/scan?customerId=".concat(S.id,"&customerName=").concat(encodeURIComponent(S.name||"")))},className:"flex-1 h-12",children:"Continue"})]})]}),!S&&(0,s.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-xl",children:[(0,s.jsx)("h3",{className:"text-[14px] font-medium text-[var(--color-text-primary)] mb-2",children:"When to use Manual Entry"}),(0,s.jsxs)("ul",{className:"text-[13px] text-[var(--color-text-secondary)] space-y-1",children:[(0,s.jsx)("li",{children:"• Customer's QR code won't scan"}),(0,s.jsx)("li",{children:"• Customer doesn't have their phone"}),(0,s.jsx)("li",{children:"• Need to look up customer by name or email"}),(0,s.jsx)("li",{children:"• Voucher code needs to be entered manually"})]})]})]})]})}},5225:function(e,t,r){"use strict";r.d(t,{b:function(){return u}});var s=r(7437),a=r(2265),o=r(5302),n=r(2252),i=r(3639),l=r(3245),c=r(2489);let d={success:{container:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200/60 shadow-sm",icon:"text-green-600",title:"text-green-900",message:"text-green-700",closeButton:"text-green-600 hover:text-green-800 hover:bg-green-100/50",Icon:o.Z},error:{container:"bg-gradient-to-r from-red-50 to-rose-50 border-red-200/60 shadow-sm",icon:"text-red-600",title:"text-red-900",message:"text-red-700",closeButton:"text-red-600 hover:text-red-800 hover:bg-red-100/50",Icon:n.Z},warning:{container:"bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200/60 shadow-sm",icon:"text-yellow-600",title:"text-yellow-900",message:"text-yellow-700",closeButton:"text-yellow-600 hover:text-yellow-800 hover:bg-yellow-100/50",Icon:i.Z},info:{container:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200/60 shadow-sm",icon:"text-blue-600",title:"text-blue-900",message:"text-blue-700",closeButton:"text-blue-600 hover:text-blue-800 hover:bg-blue-100/50",Icon:l.Z}},u=e=>{let{variant:t,title:r,message:o,onClose:n,autoDismiss:i=!1,dismissDelay:l=5e3,className:u=""}=e,[m,x]=(0,a.useState)(!0),g=d[t],h=g.Icon;(0,a.useEffect)(()=>{if(i&&n){let e=setTimeout(()=>{p()},l);return()=>clearTimeout(e)}},[i,l,n]);let p=()=>{x(!1),setTimeout(()=>{null==n||n()},200)};return m?(0,s.jsx)("div",{className:"rounded-xl border p-4 ".concat(g.container," ").concat(u,"\n        animate-slide-up transition-all duration-200 backdrop-blur-sm"),role:"alert","aria-live":"polite",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(h,{className:"w-5 h-5 ".concat(g.icon," flex-shrink-0 mt-0.5"),strokeWidth:2}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[r&&(0,s.jsx)("h3",{className:"text-sm font-semibold mb-1 ".concat(g.title),children:r}),(0,s.jsx)("p",{className:"text-sm leading-relaxed ".concat(g.message),children:o})]}),n&&(0,s.jsx)("button",{onClick:p,className:"flex-shrink-0 ".concat(g.closeButton," p-1 rounded-lg transition-all duration-100 press-scale"),"aria-label":"Close alert",children:(0,s.jsx)(c.Z,{className:"w-4 h-4",strokeWidth:2})})]})}):null}},9326:function(e,t,r){"use strict";r.d(t,{u:function(){return i}});var s=r(7437),a=r(2265),o=r(5225);let n=(0,a.createContext)(null),i=e=>{let{children:t,maxAlerts:r=3,position:i="top-right"}=e,[l,c]=(0,a.useState)([]),d=(0,a.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[]),u=(0,a.useCallback)(e=>{var t,s;let a="alert-".concat(Date.now(),"-").concat(Math.random()),o={...e,id:a,autoDismiss:null===(t=e.autoDismiss)||void 0===t||t,dismissDelay:null!==(s=e.dismissDelay)&&void 0!==s?s:5e3};c(e=>[o,...e].slice(0,r))},[r]),m=(0,a.useCallback)((e,t)=>{u({variant:"success",message:e,title:t})},[u]),x=(0,a.useCallback)((e,t)=>{u({variant:"error",message:e,title:t,autoDismiss:!1})},[u]),g=(0,a.useCallback)((e,t)=>{u({variant:"warning",message:e,title:t})},[u]),h=(0,a.useCallback)((e,t)=>{u({variant:"info",message:e,title:t})},[u]);return(0,s.jsxs)(n.Provider,{value:{addAlert:u,removeAlert:d,success:m,error:x,warning:g,info:h},children:[t,(0,s.jsx)("div",{className:"fixed ".concat({"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 -translate-x-1/2","bottom-center":"bottom-4 left-1/2 -translate-x-1/2"}[i]," z-[9999] flex flex-col gap-3 w-full max-w-md pointer-events-none"),children:l.map((e,t)=>(0,s.jsx)("div",{className:"pointer-events-auto",style:{animation:"slideInRight 0.2s ease-out ".concat(.05*t,"s both")},children:(0,s.jsx)(o.b,{variant:e.variant,title:e.title,message:e.message,onClose:()=>d(e.id),autoDismiss:e.autoDismiss,dismissDelay:e.dismissDelay})},e.id))})]})}},7606:function(e,t,r){"use strict";r.d(t,{P:function(){return a}});var s=r(7437);r(2265);let a=e=>{let{initials:t,size:r=32}=e;return(0,s.jsx)("div",{className:"flex-shrink-0 rounded-full bg-gradient-to-br from-gray-200 to-gray-100 flex items-center justify-center border border-gray-300 shadow-sm transition-all duration-100 hover:shadow-md",style:{width:r,height:r},children:(0,s.jsx)("span",{className:"font-bold text-gray-700",style:{fontSize:.375*r},children:t})})}},9379:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var s=r(7437);r(2265);let a={neutral:"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-800 border border-gray-200",freeItem:"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border border-blue-200",discount:"bg-gradient-to-r from-yellow-50 to-amber-50 text-yellow-700 border border-yellow-200",promotion:"bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 border border-green-200",featured:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-700 border border-amber-300 shadow-sm",statusActive:"",statusInactive:"",default:"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-700 border border-gray-200",primary:"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border border-blue-200",success:"bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 border border-green-200",warning:"bg-gradient-to-r from-yellow-50 to-amber-50 text-yellow-700 border border-yellow-200",danger:"bg-gradient-to-r from-red-50 to-rose-50 text-red-700 border border-red-200",info:"bg-gradient-to-r from-blue-50 to-cyan-50 text-blue-700 border border-blue-200"},o=e=>{let{label:t,children:r,variant:o="neutral",className:n=""}=e,i=t||r;if("statusActive"===o||"statusInactive"===o){let e="statusActive"===o;return(0,s.jsxs)("span",{className:"inline-flex items-center text-sm font-semibold ".concat(n),children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 transition-all duration-100 ".concat(e?"bg-green-500 shadow-sm shadow-green-300":"bg-gray-300")}),(0,s.jsx)("span",{className:e?"text-gray-900":"text-gray-500",children:i})]})}return(0,s.jsx)("span",{className:"".concat("inline-flex items-center h-[22px] px-2.5 rounded-full text-xs font-semibold transition-all duration-100"," ").concat(a[o]," ").concat(n),children:i})}},4226:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(7437),a=r(5863);function o(e){let{children:t,variant:r="primary",size:o="md",loading:n=!1,fullWidth:i=!1,disabled:l,className:c="",...d}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-semibold transition-all duration-100 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-gradient-to-br from-black to-gray-800 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-black",secondary:"bg-white text-black hover:bg-gray-50 press-scale border border-gray-200 shadow-sm hover:shadow-md rounded-xl focus:ring-gray-400",success:"bg-gradient-to-br from-green-600 to-green-700 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-green-500",danger:"bg-gradient-to-br from-red-600 to-red-700 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-red-500",ghost:"bg-transparent text-black hover:bg-gray-100 press-scale rounded-xl focus:ring-gray-400","admin-primary":"bg-gradient-to-br from-black to-gray-800 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-black","admin-secondary":"bg-white border border-gray-200 text-black hover:bg-gray-50 press-scale shadow-sm hover:shadow-md rounded-xl focus:ring-gray-400"}[r]," ").concat({sm:"px-3 py-2 text-xs gap-1.5",md:"px-4 py-2.5 text-sm gap-2",lg:"px-6 py-3 text-base gap-2.5"}[o]," ").concat(i?"w-full":""," ").concat(c),disabled:l||n,...d,children:[n&&(0,s.jsx)(a.Z,{className:"w-4 h-4 animate-spin"}),t]})}},9178:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437);function a(e){let{children:t,variant:r="default",padding:a="md",className:o=""}=e;return(0,s.jsx)("div",{className:"".concat("bg-white overflow-hidden transition-all duration-100"," ").concat({default:"shadow-sm hover:shadow-md rounded-xl border border-gray-100",bordered:"border border-gray-200 rounded-xl hover:shadow-sm",elevated:"shadow-md hover:shadow-lg rounded-xl border border-gray-100",admin:"border border-gray-200 rounded-xl shadow-sm hover:shadow-md"}[r]," ").concat({none:"",sm:"p-4",md:"p-6",lg:"p-8"}[a]," ").concat(o),children:t})}},9116:function(e,t,r){"use strict";r.d(t,{L2:function(){return i},Vj:function(){return c},Z1:function(){return x},cC:function(){return m},h3:function(){return o},hO:function(){return n},kv:function(){return a},nN:function(){return d},oZ:function(){return l},w2:function(){return u},xf:function(){return g}});let s=r(3464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});s.interceptors.request.use(e=>{{let t=localStorage.getItem("auth-storage");if(t)try{let{state:r}=JSON.parse(t);(null==r?void 0:r.token)&&(e.headers.Authorization="Bearer ".concat(r.token))}catch(e){}}return e}),s.interceptors.response.use(e=>e,e=>{var t,r,s;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname.includes("/login"),a=null===(s=e.config)||void 0===s?void 0:null===(r=s.url)||void 0===r?void 0:r.includes("/auth/"),o=localStorage.getItem("auth-storage");t||a||!o||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)}),t.ZP=s;let a={staffLogin:(e,t)=>s.post("/auth/login",{email:e,password:t}),sendOTP:e=>s.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>s.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>s.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>s.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>s.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>s.get("/auth/magic-link/verify/".concat(e))},o={getAll:e=>s.get("/users",{params:e}),getOne:e=>s.get("/users/".concat(e)),update:(e,t)=>s.put("/users/".concat(e),t),adjustPoints:(e,t,r)=>s.post("/users/".concat(e,"/points"),{points:t,reason:r}),getStaticQR:e=>s.get("/users/".concat(e,"/static-qr")),getVoucherInstances:(e,t)=>s.get("/users/".concat(e,"/voucher-instances"),{params:t?{status:t}:void 0})},n={getAll:()=>s.get("/vouchers"),getAllAdmin:()=>s.get("/vouchers/all"),getOne:e=>s.get("/vouchers/".concat(e)),create:e=>s.post("/vouchers",e),update:(e,t)=>s.patch("/vouchers/".concat(e),t),delete:e=>s.delete("/vouchers/".concat(e)),redeem:(e,t)=>s.post("/vouchers/".concat(e,"/redeem"),{user_id:t}),getInstances:(e,t)=>s.get("/vouchers/instances/".concat(e),{params:{status:t}})},i={earnPoints:(e,t,r)=>s.post("/transactions/earn",{user_id:e,amount:t,outlet:r}),redeemVoucher:(e,t,r)=>s.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:r}),getAll:e=>s.get("/transactions",{params:e})},l={getAll:e=>s.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>s.get("/announcements/all"),getById:e=>s.get("/announcements/".concat(e)),create:e=>s.post("/announcements",e),update:(e,t)=>s.patch("/announcements/".concat(e),t),delete:e=>s.delete("/announcements/".concat(e))},c={getCredits:()=>s.get("/investors/credits"),getOutletCredits:e=>s.get("/investors/credits/outlet/".concat(e)),getTransactions:e=>s.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>s.post("/investors/admin/".concat(e,"/outlet-credits"),t),allocateGroupCredits:(e,t)=>s.post("/investors/admin/".concat(e,"/group-credits"),t),adjustCredits:(e,t)=>s.patch("/investors/admin/".concat(e,"/credits/adjust"),t),getExpiringCredits:e=>s.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},d={getBudget:()=>s.get("/media/budget"),getTransactions:e=>s.get("/media/transactions",{params:e}),setBudget:(e,t)=>s.post("/media/admin/".concat(e,"/budget"),t),adjustBudget:(e,t)=>s.patch("/media/admin/".concat(e,"/budget/adjust"),t),getExpiringBudgets:e=>s.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>s.get("/media/admin/usage-report")},u={getAll:()=>s.get("/settings"),getOne:e=>s.get("/settings/".concat(e)),update:(e,t)=>s.put("/settings/".concat(e),{value:t}),bulkUpdate:e=>s.put("/settings",{settings:e}),create:e=>s.post("/settings",e)},m={getVapidKey:()=>s.get("/notifications/vapid-public-key"),subscribe:e=>s.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>s.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>s.get("/notifications/status"),getPreferences:()=>s.get("/notifications/preferences"),updatePreferences:e=>s.patch("/notifications/preferences",{preferences:e}),sendTest:()=>s.post("/notifications/test"),getHistory:e=>s.get("/notifications/history",{params:e}),adminSend:e=>s.post("/notifications/admin/send",e),adminBroadcast:e=>s.post("/notifications/admin/broadcast",e),adminStats:()=>s.get("/notifications/admin/stats"),adminProcessQueue:()=>s.post("/notifications/admin/process-queue")},x={getMyCode:()=>s.get("/referrals/my-code"),getMyReferrals:()=>s.get("/referrals/my-referrals"),validateCode:e=>s.get("/referrals/validate/".concat(e)),applyCode:e=>s.post("/referrals/apply",e),getAdminStats:()=>s.get("/referrals/admin/stats")},g={getAll:()=>s.get("/pos/keys"),create:e=>s.post("/pos/keys",e),revoke:e=>s.delete("/pos/keys/".concat(e)),getLogs:(e,t)=>s.get("/pos/keys/".concat(e,"/logs"),{params:t}),getStats:()=>s.get("/pos/keys/stats")}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{color:i="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=r;return(0,s.createElement)("svg",{ref:n,...a,width:l,height:l,stroke:i,strokeWidth:d?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(o(e)),u].join(" "),...x},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},2252:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5302:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8226:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},3245:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9345:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3041:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[3464,2971,2117,1744],function(){return e(e.s=4036)}),_N_E=e.O()}]);