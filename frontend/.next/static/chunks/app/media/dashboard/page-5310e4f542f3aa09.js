(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6468],{8574:function(e,t,s){Promise.resolve().then(s.bind(s,6577))},6577:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),n=s(2265),i=s(9116),r=s(5252);let l=(0,s(9763).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var c=s(4401),o=s(1047);function d(){let[e,t]=(0,n.useState)(null),[s,d]=(0,n.useState)([]),[u,g]=(0,n.useState)(!0);(0,n.useEffect)(()=>{m()},[]);let m=async()=>{try{g(!0);let e=await i.nN.getBudget();e.data&&t(e.data);let s=await i.nN.getTransactions();s.data&&d(s.data.slice(0,20))}catch(e){}finally{g(!1)}},x=e=>{let t=new Date;return Math.ceil((new Date(e).getTime()-t.getTime())/864e5)};if(u)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})})});let p=e&&0!==e.annual_budget?e.budget_spent/e.annual_budget*100:0;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Media Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Track your annual budget and spending"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Annual Budget"}),(0,a.jsx)(r.Z,{className:"text-blue-600",size:20})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["฿",((null==e?void 0:e.annual_budget)||0).toLocaleString()]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Total allocation"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Spent"}),(0,a.jsx)(l,{className:"text-red-600",size:20})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-red-600",children:["฿",((null==e?void 0:e.budget_spent)||0).toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[p.toFixed(1),"% used"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Remaining"}),(0,a.jsx)(c.Z,{className:"text-green-600",size:20})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["฿",((null==e?void 0:e.budget_remaining)||0).toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[(100-p).toFixed(1),"% left"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Expires In"}),(0,a.jsx)(o.Z,{className:"text-purple-600",size:20})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==e?void 0:e.expires_at)?x(e.expires_at):0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Days remaining"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Budget Usage"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Budget Utilization"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[p.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,a.jsx)("div",{className:"h-4 rounded-full transition-all duration-300 ".concat(p<50?"bg-green-500":p<80?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(Math.min(p,100),"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Annual Budget"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["฿",((null==e?void 0:e.annual_budget)||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Spent"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["฿",((null==e?void 0:e.budget_spent)||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Remaining"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["฿",((null==e?void 0:e.budget_remaining)||0).toLocaleString()]})]})]}),(null==e?void 0:e.expires_at)&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Budget Expires"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date(e.expires_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Days Remaining"}),(0,a.jsx)("p",{className:"text-3xl font-bold ".concat(x(e.expires_at)>90?"text-green-600":x(e.expires_at)>30?"text-yellow-600":"text-red-600"),children:x(e.expires_at)})]})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Transactions"}),s.length>0?(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(e.created_at).toLocaleString(),e.outlet_name&&" • ".concat(e.outlet_name)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-lg font-bold ".concat("allocation"===e.type?"text-green-600":"text-red-600"),children:["allocation"===e.type?"+":"-","฿",Math.abs(e.amount).toLocaleString()]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:e.type})]})]},e.id))}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No transactions yet"})]}),e&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Budget Alerts"}),(0,a.jsxs)("div",{className:"space-y-3",children:[p>=90&&(0,a.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-red-800",children:["⚠️ Critical: You've used ",p.toFixed(1),"% of your annual budget"]}),(0,a.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:["Only ฿",e.budget_remaining.toLocaleString()," remaining"]})]}),p>=70&&p<90&&(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-yellow-800",children:["⚠️ Warning: You've used ",p.toFixed(1),"% of your annual budget"]}),(0,a.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:["฿",e.budget_remaining.toLocaleString()," remaining"]})]}),30>=x(e.expires_at)&&(0,a.jsxs)("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-orange-800",children:["\uD83D\uDD50 Budget expires in ",x(e.expires_at)," days"]}),(0,a.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Contact admin for renewal"})]}),p<70&&x(e.expires_at)>30&&(0,a.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-green-800",children:["✓ Budget is healthy: ",(100-p).toFixed(1),"% remaining"]}),(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["฿",e.budget_remaining.toLocaleString()," available for use"]})]})]})]})]})})}},9116:function(e,t,s){"use strict";s.d(t,{L2:function(){return l},Vj:function(){return o},Z1:function(){return m},cC:function(){return g},h3:function(){return i},hO:function(){return r},kv:function(){return n},nN:function(){return d},oZ:function(){return c},w2:function(){return u},xf:function(){return x}});let a=s(3464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use(e=>{{let t=localStorage.getItem("auth-storage");if(t)try{let{state:s}=JSON.parse(t);(null==s?void 0:s.token)&&(e.headers.Authorization="Bearer ".concat(s.token))}catch(e){}}return e}),a.interceptors.response.use(e=>e,e=>{var t,s,a;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname.includes("/login"),n=null===(a=e.config)||void 0===a?void 0:null===(s=a.url)||void 0===s?void 0:s.includes("/auth/"),i=localStorage.getItem("auth-storage");t||n||!i||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)}),t.ZP=a;let n={staffLogin:(e,t)=>a.post("/auth/login",{email:e,password:t}),sendOTP:e=>a.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>a.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>a.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>a.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>a.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>a.get("/auth/magic-link/verify/".concat(e))},i={getAll:e=>a.get("/users",{params:e}),getOne:e=>a.get("/users/".concat(e)),update:(e,t)=>a.put("/users/".concat(e),t),adjustPoints:(e,t,s)=>a.post("/users/".concat(e,"/points"),{points:t,reason:s}),getStaticQR:e=>a.get("/users/".concat(e,"/static-qr")),getVoucherInstances:(e,t)=>a.get("/users/".concat(e,"/voucher-instances"),{params:t?{status:t}:void 0})},r={getAll:()=>a.get("/vouchers"),getAllAdmin:()=>a.get("/vouchers/all"),getOne:e=>a.get("/vouchers/".concat(e)),create:e=>a.post("/vouchers",e),update:(e,t)=>a.patch("/vouchers/".concat(e),t),delete:e=>a.delete("/vouchers/".concat(e)),redeem:(e,t)=>a.post("/vouchers/".concat(e,"/redeem"),{user_id:t}),getInstances:(e,t)=>a.get("/vouchers/instances/".concat(e),{params:{status:t}})},l={earnPoints:(e,t,s)=>a.post("/transactions/earn",{user_id:e,amount:t,outlet:s}),redeemVoucher:(e,t,s)=>a.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:s}),getAll:e=>a.get("/transactions",{params:e})},c={getAll:e=>a.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>a.get("/announcements/all"),getById:e=>a.get("/announcements/".concat(e)),create:e=>a.post("/announcements",e),update:(e,t)=>a.patch("/announcements/".concat(e),t),delete:e=>a.delete("/announcements/".concat(e))},o={getCredits:()=>a.get("/investors/credits"),getOutletCredits:e=>a.get("/investors/credits/outlet/".concat(e)),getTransactions:e=>a.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>a.post("/investors/admin/".concat(e,"/outlet-credits"),t),allocateGroupCredits:(e,t)=>a.post("/investors/admin/".concat(e,"/group-credits"),t),adjustCredits:(e,t)=>a.patch("/investors/admin/".concat(e,"/credits/adjust"),t),getExpiringCredits:e=>a.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},d={getBudget:()=>a.get("/media/budget"),getTransactions:e=>a.get("/media/transactions",{params:e}),setBudget:(e,t)=>a.post("/media/admin/".concat(e,"/budget"),t),adjustBudget:(e,t)=>a.patch("/media/admin/".concat(e,"/budget/adjust"),t),getExpiringBudgets:e=>a.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>a.get("/media/admin/usage-report")},u={getAll:()=>a.get("/settings"),getOne:e=>a.get("/settings/".concat(e)),update:(e,t)=>a.put("/settings/".concat(e),{value:t}),bulkUpdate:e=>a.put("/settings",{settings:e}),create:e=>a.post("/settings",e)},g={getVapidKey:()=>a.get("/notifications/vapid-public-key"),subscribe:e=>a.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>a.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>a.get("/notifications/status"),getPreferences:()=>a.get("/notifications/preferences"),updatePreferences:e=>a.patch("/notifications/preferences",{preferences:e}),sendTest:()=>a.post("/notifications/test"),getHistory:e=>a.get("/notifications/history",{params:e}),adminSend:e=>a.post("/notifications/admin/send",e),adminBroadcast:e=>a.post("/notifications/admin/broadcast",e),adminStats:()=>a.get("/notifications/admin/stats"),adminProcessQueue:()=>a.post("/notifications/admin/process-queue")},m={getMyCode:()=>a.get("/referrals/my-code"),getMyReferrals:()=>a.get("/referrals/my-referrals"),validateCode:e=>a.get("/referrals/validate/".concat(e)),applyCode:e=>a.post("/referrals/apply",e),getAdminStats:()=>a.get("/referrals/admin/stats")},x={getAll:()=>a.get("/pos/keys"),create:e=>a.post("/pos/keys",e),revoke:e=>a.delete("/pos/keys/".concat(e)),getLogs:(e,t)=>a.get("/pos/keys/".concat(e,"/logs"),{params:t}),getStats:()=>a.get("/pos/keys/stats")}},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:g,...m}=s;return(0,a.createElement)("svg",{ref:r,...n,width:c,height:c,stroke:l,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(i(e)),u].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(g)?g:[g]])});return s.displayName="".concat(e),s}},4401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},function(e){e.O(0,[3464,2971,2117,1744],function(){return e(e.s=8574)}),_N_E=e.O()}]);