(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{2284:function(e,t,s){Promise.resolve().then(s.bind(s,9944))},9944:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(7437),n=s(2265),l=s(9376),r=s(6189),i=s(9116),o=s(2135),c=s(875),d=s(3247),u=s(9763);let x=(0,u.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var p=s(2720);let h=(0,u.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var m=s(407),g=s(9064);function f(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)([]),[u,f]=(0,n.useState)(""),[v,b]=(0,n.useState)(!0),[y,j]=(0,n.useState)(1),[w,N]=(0,n.useState)(25),[k,C]=(0,n.useState)("all"),[S,Z]=(0,n.useState)("all"),[_,A]=(0,n.useState)("all"),[B,L]=(0,n.useState)("all"),[M,T]=(0,n.useState)("all"),[E,z]=(0,n.useState)("joined"),[D,O]=(0,n.useState)("desc"),[F,P]=(0,n.useState)([]),[H,I]=(0,n.useState)(!1),[U,V]=(0,n.useState)(!1),[q,R]=(0,n.useState)(!1),[J,G]=(0,n.useState)(!1),[X,Q]=(0,n.useState)(!1),[W,Y]=(0,n.useState)([]),[K,$]=(0,n.useState)({customer:0,staff:0,investor:0,media:0,total:0});(0,n.useEffect)(()=>{ee()},[]),(0,n.useEffect)(()=>{j(1)},[u,k,S,_,B,M,E,D]);let ee=async()=>{b(!0);try{let e=(await i.h3.getAll({limit:1e4})).data.users;s(e);let t=Array.from(new Set(e.map(e=>e.company).filter(Boolean))).sort();Y(t),$({customer:e.filter(e=>!e.user_type||"customer"===e.user_type).length,staff:e.filter(e=>"employee"===e.user_type).length,investor:e.filter(e=>"investor"===e.user_type).length,media:e.filter(e=>"media"===e.user_type).length,total:e.length})}catch(e){g.ZP.error("Failed to load users")}finally{b(!1)}},et=(0,n.useMemo)(()=>{let e=[...t];if("all"!==k&&(e=e.filter(e=>{let t=e.user_type||"customer";return("employee"===t?"staff":t)===k})),"all"!==S&&(e=e.filter(e=>"active"===S?!1!==e.is_active:"inactive"!==S||!1===e.is_active)),"all"!==_&&(e=e.filter(e=>e.company===_)),"all"!==B){let t=new Date;e=e.filter(e=>{if(!e.created_at)return!1;let s=new Date(e.created_at),a=(t.getTime()-s.getTime())/864e5;return"last7days"===B?a<=7:"last30days"===B?a<=30:"last90days"!==B||a<=90})}if("all"!==M){let t=new Date;e=e.filter(e=>{let s=e.investor_expiry_date||e.media_expiry_date;if(!s)return!1;let a=(new Date(s).getTime()-t.getTime())/864e5;return"last7days"===M?a>=0&&a<=7:"last30days"===M?a>=0&&a<=30:"last90days"!==M||a>=0&&a<=90})}if(u){let t=u.toLowerCase();e=e.filter(e=>{var s,a,n,l,r,i;return(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(a=e.surname)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(l=e.phone)||void 0===l?void 0:l.toLowerCase().includes(t))||(null===(r=e.company)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(i=e.id)||void 0===i?void 0:i.toString().includes(t))})}return e.sort((e,t)=>{let s,a;switch(E){case"name":s="".concat(e.name," ").concat(e.surname).toLowerCase(),a="".concat(t.name," ").concat(t.surname).toLowerCase();break;case"balance":s=e.points_balance||0,a=t.points_balance||0;break;case"spent":s=e.total_spend||0,a=t.total_spend||0;break;case"joined":s=new Date(e.created_at||0).getTime(),a=new Date(t.created_at||0).getTime();break;case"lastVisit":s=new Date(e.last_visit||0).getTime(),a=new Date(t.last_visit||0).getTime();break;default:return 0}return s<a?"asc"===D?-1:1:s>a?"asc"===D?1:-1:0}),e},[t,u,k,S,_,B,M,E,D]),es=(0,n.useMemo)(()=>{let e=(y-1)*w;return et.slice(e,e+w)},[et,y,w]),ea=Math.ceil(et.length/w),en=e=>{P(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},el=e=>{E===e?O("asc"===D?"desc":"asc"):(z(e),O("desc"))},er={customer:{label:"Customer",count:K.customer},staff:{label:"Staff",count:K.staff},investor:{label:"Investor",count:K.investor},media:{label:"Media",count:K.media}},ei=e=>{let{field:t}=e;return E!==t?(0,a.jsx)(o.Z,{size:14,className:"opacity-0 group-hover:opacity-30"}):"asc"===D?(0,a.jsx)(o.Z,{size:14}):(0,a.jsx)(c.Z,{size:14})},eo=e=>{let{label:t,value:s,options:n,isOpen:l,onToggle:r,onChange:i,width:o="w-[140px]"}=e,d=n.find(e=>e.value===s);return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-semibold uppercase tracking-tight text-neutral-500 mb-1.5",children:t}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:r,className:"h-[40px] px-3 rounded-lg border border-neutral-300 bg-white text-[14px] text-neutral-900 hover:border-neutral-400 transition-all flex items-center justify-between gap-2 ".concat(o),children:[(0,a.jsx)("span",{className:"truncate",children:(null==d?void 0:d.label)||"Select..."}),(0,a.jsx)(c.Z,{size:14,className:"text-neutral-500 flex-shrink-0"})]}),l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:r}),(0,a.jsx)("div",{className:"absolute left-0 top-full mt-1 bg-white border border-neutral-200 rounded-lg shadow-lg py-1 z-20 min-w-full max-h-64 overflow-y-auto",children:n.map(e=>(0,a.jsx)("button",{onClick:()=>{i(e.value),r()},className:"w-full text-left px-3 py-2 text-[14px] transition-colors ".concat(s===e.value?"bg-neutral-100 text-neutral-900 font-medium":"text-neutral-700 hover:bg-neutral-50"),children:e.label},e.value))})]})]})]})};return(0,a.jsx)(r.Z,{children:(0,a.jsx)("div",{className:"min-h-screen bg-neutral-50",children:(0,a.jsxs)("div",{className:"max-w-[1600px] mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-[28px] font-semibold text-neutral-900",children:"Users"}),(0,a.jsxs)("p",{className:"text-[14px] text-neutral-500 mt-1",children:[K.total," total users"]})]}),(0,a.jsx)("div",{className:"bg-white border border-neutral-200 rounded-xl p-4 mb-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-end justify-between gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-end gap-4 flex-1",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),(0,a.jsx)("input",{type:"text",className:"w-[320px] h-[40px] pl-10 pr-3 border border-neutral-300 rounded-lg text-[14px] text-neutral-900 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent bg-white",placeholder:"Search...",value:u,onChange:e=>f(e.target.value)})]}),(0,a.jsx)(eo,{label:"TYPE",value:k,options:[{value:"all",label:"All Types"},{value:"customer",label:"Customers (".concat(K.customer,")")},{value:"staff",label:"Staff (".concat(K.staff,")")},{value:"investor",label:"Investors (".concat(K.investor,")")},{value:"media",label:"Media (".concat(K.media,")")}],isOpen:H,onToggle:()=>I(!H),onChange:e=>C(e),width:"w-[140px]"}),(0,a.jsx)(eo,{label:"STATUS",value:S,options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],isOpen:U,onToggle:()=>V(!U),onChange:e=>Z(e),width:"w-[120px]"}),(0,a.jsx)(eo,{label:"COMPANY",value:_,options:[{value:"all",label:"All Companies"},...W.map(e=>({value:e,label:e}))],isOpen:q,onToggle:()=>R(!q),onChange:e=>A(e),width:"w-[160px]"}),(0,a.jsx)(eo,{label:"JOINED",value:B,options:[{value:"all",label:"All"},{value:"last7days",label:"Last 7 days"},{value:"last30days",label:"Last 30 days"},{value:"last90days",label:"Last 90 days"}],isOpen:J,onToggle:()=>G(!J),onChange:e=>L(e),width:"w-[130px]"}),(0,a.jsx)(eo,{label:"EXPIRES IN",value:M,options:[{value:"all",label:"All"},{value:"last7days",label:"Next 7 days"},{value:"last30days",label:"Next 30 days"},{value:"last90days",label:"Next 90 days"}],isOpen:X,onToggle:()=>Q(!X),onChange:e=>T(e),width:"w-[130px]"})]}),(0,a.jsxs)("button",{onClick:()=>{g.ZP.success("Export feature coming soon")},className:"h-[40px] px-4 rounded-lg border border-neutral-300 bg-white text-neutral-900 hover:bg-neutral-50 text-[14px] font-medium transition-all flex items-center gap-2",children:[(0,a.jsx)(x,{size:16}),"Export"]})]})}),(0,a.jsxs)("div",{className:"bg-white border border-neutral-200 rounded-xl shadow-sm overflow-hidden",children:[F.length>0&&(0,a.jsx)("div",{className:"bg-neutral-900 text-white px-6 py-4 border-b border-neutral-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-[14px] font-medium",children:[F.length," user",F.length>1?"s":""," selected"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{className:"h-[36px] px-3 rounded-lg bg-white/10 hover:bg-white/20 text-[14px] font-medium transition-all flex items-center gap-2",children:[(0,a.jsx)(p.Z,{size:16}),"Add Tags"]}),(0,a.jsxs)("button",{className:"h-[36px] px-3 rounded-lg bg-white/10 hover:bg-white/20 text-[14px] font-medium transition-all flex items-center gap-2",children:[(0,a.jsx)(h,{size:16}),"Disable"]}),(0,a.jsx)("button",{onClick:()=>P([]),className:"h-[36px] px-3 rounded-lg bg-white/10 hover:bg-white/20 text-[14px] font-medium transition-all",children:"Clear"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center h-[48px] px-4 border-b border-neutral-200 bg-neutral-50 text-[11px] font-semibold uppercase tracking-wider text-neutral-600",children:[(0,a.jsx)("div",{className:"w-10 flex items-center",children:(0,a.jsx)("input",{type:"checkbox",checked:F.length===es.length&&es.length>0,onChange:()=>{F.length===es.length?P([]):P(es.map(e=>e.id))},className:"w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-neutral-900 cursor-pointer"})}),(0,a.jsx)("div",{className:"w-[80px] px-4",children:"ID"}),(0,a.jsxs)("button",{onClick:()=>el("name"),className:"flex-1 px-4 flex items-center gap-1 hover:text-neutral-900 transition-colors group text-left",children:["Name",(0,a.jsx)(ei,{field:"name"})]}),(0,a.jsx)("div",{className:"w-[100px] px-4",children:"Type"}),(0,a.jsx)("div",{className:"w-[160px] px-4",children:"Contact"}),(0,a.jsx)("div",{className:"w-[100px] px-4",children:"Status"}),(0,a.jsxs)("button",{onClick:()=>el("balance"),className:"w-[120px] px-4 text-right flex items-center justify-end gap-1 hover:text-neutral-900 transition-colors group",children:["Balance",(0,a.jsx)(ei,{field:"balance"})]}),(0,a.jsxs)("button",{onClick:()=>el("spent"),className:"w-[120px] px-4 text-right flex items-center justify-end gap-1 hover:text-neutral-900 transition-colors group",children:["Spent",(0,a.jsx)(ei,{field:"spent"})]}),(0,a.jsxs)("button",{onClick:()=>el("joined"),className:"w-[130px] px-4 flex items-center gap-1 hover:text-neutral-900 transition-colors group",children:["Joined",(0,a.jsx)(ei,{field:"joined"})]}),(0,a.jsxs)("button",{onClick:()=>el("lastVisit"),className:"w-[130px] px-4 flex items-center gap-1 hover:text-neutral-900 transition-colors group",children:["Last Visit",(0,a.jsx)(ei,{field:"lastVisit"})]}),(0,a.jsx)("div",{className:"w-10"})]}),v?(0,a.jsx)("div",{className:"flex items-center justify-center h-40 text-[14px] text-neutral-500",children:"Loading users..."}):0===es.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 px-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-neutral-100 flex items-center justify-center mb-4",children:(0,a.jsx)(d.Z,{size:24,className:"text-neutral-400"})}),(0,a.jsx)("h3",{className:"text-[16px] font-semibold text-neutral-900 mb-1",children:"No users found"}),(0,a.jsx)("p",{className:"text-[14px] text-neutral-500",children:"Try adjusting your filters."})]}):es.map(t=>{let s=F.includes(t.id),n="employee"===t.user_type?"staff":t.user_type||"customer",l=er[n];return(0,a.jsxs)("div",{className:"flex items-center h-[60px] px-4 border-b border-neutral-100 last:border-0 hover:bg-neutral-50 cursor-pointer transition-colors ".concat(s?"bg-neutral-100":""),onClick:()=>e.push("/admin/users/".concat(t.id)),children:[(0,a.jsx)("div",{className:"w-10 flex items-center",onClick:e=>e.stopPropagation(),children:(0,a.jsx)("input",{type:"checkbox",checked:s,onChange:()=>en(t.id),className:"w-4 h-4 rounded border-neutral-300 text-neutral-900 focus:ring-neutral-900 cursor-pointer"})}),(0,a.jsx)("div",{className:"w-[80px] px-4",children:(0,a.jsxs)("span",{className:"text-[13px] font-mono text-neutral-500",children:["#",t.id]})}),(0,a.jsxs)("div",{className:"flex-1 px-4 min-w-0",children:[(0,a.jsxs)("p",{className:"text-[14px] font-medium text-neutral-900 truncate",children:[t.name," ",t.surname]}),t.company&&(0,a.jsx)("p",{className:"text-[13px] text-neutral-500 truncate",children:t.company})]}),(0,a.jsx)("div",{className:"w-[100px] px-4",children:(0,a.jsx)("span",{className:"inline-flex items-center h-[24px] px-2 rounded-md bg-neutral-100 text-[12px] font-medium text-neutral-700",children:l.label})}),(0,a.jsxs)("div",{className:"w-[160px] px-4",children:[(0,a.jsx)("p",{className:"text-[13px] text-neutral-900",children:t.phone}),t.email&&(0,a.jsx)("p",{className:"text-[12px] text-neutral-500 truncate",children:t.email})]}),(0,a.jsx)("div",{className:"w-[100px] px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-1 h-1 rounded-full ".concat(!1!==t.is_active?"bg-green-500":"bg-neutral-300")}),(0,a.jsx)("span",{className:"text-[13px] font-medium text-neutral-700",children:!1!==t.is_active?"Active":"Inactive"})]})}),(0,a.jsx)("div",{className:"w-[120px] px-4 text-right font-mono text-[14px] font-medium text-neutral-900",children:"investor"===n?"฿".concat((t.investor_group_credits_balance||0).toLocaleString()):"media"===n?"฿".concat(((t.media_annual_budget_thb||0)-(t.media_spent_this_year_thb||0)).toLocaleString()):"".concat(t.points_balance||0," pts")}),(0,a.jsxs)("div",{className:"w-[120px] px-4 text-right font-mono text-[14px] font-medium text-neutral-900",children:["฿",t.total_spend?Number(t.total_spend).toLocaleString():"0"]}),(0,a.jsx)("div",{className:"w-[130px] px-4 text-[13px] text-neutral-600",children:t.created_at?new Date(t.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"—"}),(0,a.jsx)("div",{className:"w-[130px] px-4 text-[13px] text-neutral-400",children:t.last_visit?new Date(t.last_visit).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):"Never"}),(0,a.jsx)("div",{className:"w-10 flex justify-end",children:(0,a.jsx)(m.Z,{size:16,className:"text-neutral-400"})})]},t.id)}),!v&&es.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-t border-neutral-200 bg-white",children:[(0,a.jsxs)("p",{className:"text-[14px] text-neutral-600",children:["Showing ",(y-1)*w+1,"–",Math.min(y*w,et.length)," of ",et.length]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>j(y-1),disabled:1===y,className:"h-[32px] px-3 border border-neutral-300 rounded-lg text-[13px] font-medium text-neutral-700 hover:bg-neutral-50 disabled:opacity-40 disabled:cursor-not-allowed transition-colors bg-white",children:"Previous"}),Array.from({length:Math.min(5,ea)},(e,t)=>{let s;return s=ea<=5?t+1:y<=3?t+1:y>=ea-2?ea-4+t:y-2+t,(0,a.jsx)("button",{onClick:()=>j(s),className:"h-[32px] w-[32px] rounded-lg text-[13px] font-medium transition-all ".concat(y===s?"bg-neutral-900 text-white":"border border-neutral-300 hover:bg-neutral-50 text-neutral-700 bg-white"),children:s},s)}),(0,a.jsx)("button",{onClick:()=>j(y+1),disabled:y===ea,className:"h-[32px] px-3 border border-neutral-300 rounded-lg text-[13px] font-medium text-neutral-700 hover:bg-neutral-50 disabled:opacity-40 disabled:cursor-not-allowed transition-colors bg-white",children:"Next"})]})]})]})]})})})}},6189:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(7437),n=s(9376),l=s(2097),r=s(5466),i=s(5805),o=s(7414),c=s(6439),d=s(1621),u=s(2489),x=s(6840),p=s(7692),h=s(2265);function m(e){var t;let{children:s}=e,m=(0,n.useRouter)(),g=(0,n.usePathname)(),{user:f,logout:v}=(0,l.t)(),[b,y]=(0,h.useState)(!1),j=[{icon:r.Z,label:"Dashboard",path:"/admin/dashboard"},{icon:i.Z,label:"Users",path:"/admin/users"},{icon:o.Z,label:"Vouchers",path:"/admin/vouchers"},{icon:c.Z,label:"Announcements",path:"/admin/announcements"},{icon:d.Z,label:"Transactions",path:"/admin/transactions"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("header",{className:"lg:hidden bg-white border-b border-neutral-200 sticky top-0 z-30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-brand-primary rounded flex items-center justify-center text-white font-bold text-sm",children:"S"}),(0,a.jsx)("h1",{className:"font-ui text-body font-semibold text-neutral-900",children:"Sarnies Admin"})]}),(0,a.jsx)("button",{onClick:()=>y(!b),className:"p-2 hover:bg-neutral-50 rounded transition-all duration-150",children:b?(0,a.jsx)(u.Z,{size:20}):(0,a.jsx)(x.Z,{size:20})})]})}),(0,a.jsxs)("aside",{className:"fixed top-0 left-0 h-screen w-60 bg-white border-r border-[#E5E7EB] transition-transform duration-300 z-40 ".concat(b?"translate-x-0":"-translate-x-full"," lg:translate-x-0 flex flex-col"),children:[(0,a.jsx)("div",{className:"pl-5 pt-6 pb-4 border-b border-[#E5E7EB]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg bg-brand-primary flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg font-bold text-white",children:"S"})}),(0,a.jsx)("span",{className:"font-ui text-base font-medium text-[#1B1B1B]",children:"Sarnies Admin"})]})}),(0,a.jsx)("div",{className:"pl-5 py-4 border-b border-[#E5E7EB]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 flex-shrink-0 rounded-full bg-[#F5F5F5] flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-semibold text-[#1B1B1B]",children:(null==f?void 0:null===(t=f.name)||void 0===t?void 0:t.charAt(0))||"D"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-ui text-sm font-medium text-[#1B1B1B] truncate",title:(null==f?void 0:f.name)||"Dev User",children:(null==f?void 0:f.name)||"Dev User"}),(0,a.jsx)("p",{className:"font-ui text-xs text-[#6F6F6F]",children:"Administrator"})]})]})}),(0,a.jsx)("nav",{className:"flex-1 overflow-y-auto pl-5 py-4",children:(0,a.jsx)("div",{className:"space-y-1",children:j.map(e=>{let t=e.icon,s=g===e.path;return(0,a.jsxs)("button",{onClick:()=>{m.push(e.path),y(!1)},className:"w-full h-11 flex items-center gap-3 pr-3 rounded-lg font-ui text-sm font-medium transition-colors ".concat(s?"bg-[#F5F5F5] text-[#1B1B1B]":"text-[#6F6F6F] hover:bg-[#F5F5F5] hover:text-[#1B1B1B]"),children:[(0,a.jsx)(t,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),(0,a.jsx)("span",{children:e.label})]},e.path)})})}),(0,a.jsx)("div",{className:"pl-5 pb-5 border-t border-[#E5E7EB] pt-4",children:(0,a.jsxs)("button",{onClick:()=>{v(),m.push("/login")},className:"w-full h-11 flex items-center gap-3 pr-3 text-[#6F6F6F] hover:bg-red-50 hover:text-red-600 rounded-lg font-ui text-sm font-medium transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),(0,a.jsx)("span",{children:"Logout"})]})})]}),b&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>y(!1)}),(0,a.jsx)("main",{className:"lg:ml-60 min-h-screen bg-white",children:s})]})}},9116:function(e,t,s){"use strict";s.d(t,{L2:function(){return i},Vj:function(){return c},Z1:function(){return p},cC:function(){return x},h3:function(){return l},hO:function(){return r},kv:function(){return n},nN:function(){return d},oZ:function(){return o},w2:function(){return u},xf:function(){return h}});let a=s(3464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use(e=>{{let t=localStorage.getItem("auth-storage");if(t)try{let{state:s}=JSON.parse(t);(null==s?void 0:s.token)&&(e.headers.Authorization="Bearer ".concat(s.token))}catch(e){}}return e}),a.interceptors.response.use(e=>e,e=>{var t,s,a;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname.includes("/login"),n=null===(a=e.config)||void 0===a?void 0:null===(s=a.url)||void 0===s?void 0:s.includes("/auth/"),l=localStorage.getItem("auth-storage");t||n||!l||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)}),t.ZP=a;let n={staffLogin:(e,t)=>a.post("/auth/login",{email:e,password:t}),sendOTP:e=>a.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>a.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>a.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>a.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>a.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>a.get("/auth/magic-link/verify/".concat(e))},l={getAll:e=>a.get("/users",{params:e}),getOne:e=>a.get("/users/".concat(e)),update:(e,t)=>a.put("/users/".concat(e),t),adjustPoints:(e,t,s)=>a.post("/users/".concat(e,"/points"),{points:t,reason:s}),getStaticQR:e=>a.get("/users/".concat(e,"/static-qr")),getVoucherInstances:(e,t)=>a.get("/users/".concat(e,"/voucher-instances"),{params:t?{status:t}:void 0})},r={getAll:()=>a.get("/vouchers"),getAllAdmin:()=>a.get("/vouchers/all"),getOne:e=>a.get("/vouchers/".concat(e)),create:e=>a.post("/vouchers",e),update:(e,t)=>a.patch("/vouchers/".concat(e),t),delete:e=>a.delete("/vouchers/".concat(e)),redeem:(e,t)=>a.post("/vouchers/".concat(e,"/redeem"),{user_id:t}),getInstances:(e,t)=>a.get("/vouchers/instances/".concat(e),{params:{status:t}})},i={earnPoints:(e,t,s)=>a.post("/transactions/earn",{user_id:e,amount:t,outlet:s}),redeemVoucher:(e,t,s)=>a.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:s}),getAll:e=>a.get("/transactions",{params:e})},o={getAll:e=>a.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>a.get("/announcements/all"),getById:e=>a.get("/announcements/".concat(e)),create:e=>a.post("/announcements",e),update:(e,t)=>a.patch("/announcements/".concat(e),t),delete:e=>a.delete("/announcements/".concat(e))},c={getCredits:()=>a.get("/investors/credits"),getOutletCredits:e=>a.get("/investors/credits/outlet/".concat(e)),getTransactions:e=>a.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>a.post("/investors/admin/".concat(e,"/outlet-credits"),t),allocateGroupCredits:(e,t)=>a.post("/investors/admin/".concat(e,"/group-credits"),t),adjustCredits:(e,t)=>a.patch("/investors/admin/".concat(e,"/credits/adjust"),t),getExpiringCredits:e=>a.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},d={getBudget:()=>a.get("/media/budget"),getTransactions:e=>a.get("/media/transactions",{params:e}),setBudget:(e,t)=>a.post("/media/admin/".concat(e,"/budget"),t),adjustBudget:(e,t)=>a.patch("/media/admin/".concat(e,"/budget/adjust"),t),getExpiringBudgets:e=>a.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>a.get("/media/admin/usage-report")},u={getAll:()=>a.get("/settings"),getOne:e=>a.get("/settings/".concat(e)),update:(e,t)=>a.put("/settings/".concat(e),{value:t}),bulkUpdate:e=>a.put("/settings",{settings:e}),create:e=>a.post("/settings",e)},x={getVapidKey:()=>a.get("/notifications/vapid-public-key"),subscribe:e=>a.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>a.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>a.get("/notifications/status"),getPreferences:()=>a.get("/notifications/preferences"),updatePreferences:e=>a.patch("/notifications/preferences",{preferences:e}),sendTest:()=>a.post("/notifications/test"),getHistory:e=>a.get("/notifications/history",{params:e}),adminSend:e=>a.post("/notifications/admin/send",e),adminBroadcast:e=>a.post("/notifications/admin/broadcast",e),adminStats:()=>a.get("/notifications/admin/stats"),adminProcessQueue:()=>a.post("/notifications/admin/process-queue")},p={getMyCode:()=>a.get("/referrals/my-code"),getMyReferrals:()=>a.get("/referrals/my-referrals"),validateCode:e=>a.get("/referrals/validate/".concat(e)),applyCode:e=>a.post("/referrals/apply",e),getAdminStats:()=>a.get("/referrals/admin/stats")},h={getAll:()=>a.get("/pos/keys"),create:e=>a.post("/pos/keys",e),revoke:e=>a.delete("/pos/keys/".concat(e)),getLogs:(e,t)=>a.get("/pos/keys/".concat(e,"/logs"),{params:t}),getStats:()=>a.get("/pos/keys/stats")}},2097:function(e,t,s){"use strict";s.d(t,{t:function(){return l}});var a=s(9625),n=s(6885);let l=(0,a.Ue)()((0,n.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,s)=>{e({user:t,token:s})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,n.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{null==e||e.setHasHydrated(!0)}}))},875:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},2135:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},7414:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},5466:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},6439:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]])},6840:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},1621:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2720:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[1299,3464,368,2971,2117,1744],function(){return e(e.s=2284)}),_N_E=e.O()}]);