(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[541],{6281:function(e,t,s){Promise.resolve().then(s.bind(s,2751))},2751:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return B}});var r=s(7437),a=s(2265),n=s(6189),i=s(2594),l=s(3877),o=s(6361),c=s(1601);let d=e=>{let{voucher:t,onEdit:s,onDuplicate:a,onArchive:n,onDelete:d}=e;return"freeItem"===t.type||t.type,(0,r.jsxs)("div",{className:"flex items-center h-[60px] border-b border-neutral-100 last:border-0 px-4 hover:bg-neutral-50 transition-colors",children:[(0,r.jsx)("div",{className:"flex-1 px-4 min-w-0",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-[14px] font-medium text-neutral-900 truncate",children:t.name}),t.featured&&(0,r.jsx)("span",{className:"inline-flex items-center h-[18px] px-1.5 rounded text-[10px] font-semibold uppercase tracking-wide bg-amber-100 text-amber-700",children:"Featured"})]})}),(0,r.jsx)("div",{className:"w-[120px] px-4",children:(0,r.jsx)("span",{className:"inline-flex items-center h-[22px] px-2.5 rounded-md bg-neutral-100 text-[12px] font-medium text-neutral-700",children:"freeItem"===t.type?"Free Item":"discount"===t.type?"Discount":"Promotion"})}),(0,r.jsx)("div",{className:"w-[140px] px-4 text-[13px] text-neutral-500 truncate",children:t.category&&""!==t.category.trim()?t.category:"—"}),(0,r.jsx)("div",{className:"w-[110px] px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-1 h-1 rounded-full ".concat("active"===t.status?"bg-green-500":"bg-neutral-300")}),(0,r.jsx)("span",{className:"text-[13px] font-medium text-neutral-700",children:"active"===t.status?"Active":"Inactive"})]})}),(0,r.jsx)("div",{className:"w-[80px] px-4 text-[13px] font-mono text-neutral-900 text-left",children:t.points}),(0,r.jsx)("div",{className:"w-[100px] px-4 text-[13px] font-mono text-neutral-900 text-left",children:t.valueDisplay}),(0,r.jsx)("div",{className:"w-[80px] px-4 text-[13px] font-mono text-neutral-900 text-left",children:t.redeemedCount}),(0,r.jsx)("div",{className:"w-[80px] px-4 text-[13px] font-mono text-neutral-900 text-left",children:t.userCount}),(0,r.jsxs)("div",{className:"w-[120px] px-4 flex items-center justify-end gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>s&&s(t.id),className:"w-7 h-7 flex items-center justify-center text-neutral-400 hover:text-neutral-900 transition-colors rounded hover:bg-neutral-100",children:(0,r.jsx)(i.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{type:"button",onClick:()=>a&&a(t.id),className:"w-7 h-7 flex items-center justify-center text-neutral-400 hover:text-neutral-900 transition-colors rounded hover:bg-neutral-100",children:(0,r.jsx)(l.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{type:"button",onClick:()=>n&&n(t.id),className:"w-7 h-7 flex items-center justify-center text-neutral-400 hover:text-amber-600 transition-colors rounded hover:bg-amber-50",children:(0,r.jsx)(o.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{type:"button",onClick:()=>d&&d(t.id),className:"w-7 h-7 flex items-center justify-center text-neutral-400 hover:text-red-600 transition-colors rounded hover:bg-red-50",children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})})]})]})};var u=s(1801),x=s(173);let m=e=>{let{group:t,onEditVoucher:s,onDuplicateVoucher:n,onArchiveVoucher:i,onDeleteVoucher:l}=e,[o,c]=(0,a.useState)(!1);return(0,r.jsxs)("section",{className:"w-full rounded-xl border border-neutral-200 bg-white shadow-sm mb-6 overflow-hidden",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between h-14 px-4 border-b border-neutral-200 bg-neutral-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("h2",{className:"text-[16px] font-semibold text-neutral-900",children:t.name}),(0,r.jsx)("span",{className:"inline-flex items-center h-[22px] px-2.5 rounded-md bg-neutral-100 text-[12px] font-medium text-neutral-600",children:t.voucherCount})]}),(0,r.jsx)("button",{type:"button",onClick:()=>c(e=>!e),className:"w-8 h-8 flex items-center justify-center text-neutral-400 hover:text-neutral-900 transition-colors",children:o?(0,r.jsx)(u.Z,{className:"w-4 h-4"}):(0,r.jsx)(x.Z,{className:"w-4 h-4"})})]}),!o&&(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex items-center h-[48px] px-4 border-b border-neutral-200 bg-neutral-50 text-[11px] font-semibold uppercase tracking-wider text-neutral-600",children:[(0,r.jsx)("div",{className:"flex-1 px-4",children:"Name"}),(0,r.jsx)("div",{className:"w-[120px] px-4",children:"Type"}),(0,r.jsx)("div",{className:"w-[140px] px-4",children:"Category"}),(0,r.jsx)("div",{className:"w-[110px] px-4",children:"Status"}),(0,r.jsx)("div",{className:"w-[80px] px-4",children:"Points"}),(0,r.jsx)("div",{className:"w-[100px] px-4",children:"Value"}),(0,r.jsx)("div",{className:"w-[80px] px-4",children:"Redeemed"}),(0,r.jsx)("div",{className:"w-[80px] px-4",children:"Users"}),(0,r.jsx)("div",{className:"w-[120px] px-4 text-right",children:"Actions"})]}),0===t.vouchers.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-28 text-[14px] text-neutral-500",children:"No vouchers found in this group"}):t.vouchers.map(e=>(0,r.jsx)(d,{voucher:e,onEdit:s,onDuplicate:n,onArchive:i,onDelete:l},e.id))]})]})};var p=s(3247),h=s(9116),g=s(9064),f=s(8516),v=s(2023),b=s(2489),y=s(5252),j=s(6901),N=s(2252),w=s(5805),_=s(2369),k=s(5005),C=s(525),Z=s(2096),S=s(1047),P=s(8420),A=s(3229);function F(e){var t,s,n;let{voucher:i,companies:l,onSubmit:o,onCancel:c,isSubmitting:d}=e,[u,x]=(0,a.useState)({title:(null==i?void 0:i.title)||(null==i?void 0:i.name)||"",description:(null==i?void 0:i.description)||"",category:(null==i?void 0:i.category)||"",points_required:(null==i?void 0:i.points_required)||(null==i?void 0:i.points_cost)||"",voucher_type:(null==i?void 0:i.voucher_type)||"free_item",benefit_type:(null==i?void 0:i.benefit_type)||"free_item",benefit_value:(null==i?void 0:i.benefit_value)||"",cash_value:(null==i?void 0:i.cash_value)||(null==i?void 0:i.value_amount)||"",is_active:null===(s=null!==(t=null==i?void 0:i.is_active)&&void 0!==t?t:null==i?void 0:i.active)||void 0===s||s,is_featured:null!==(n=null==i?void 0:i.is_featured)&&void 0!==n&&n,expiry_type:(null==i?void 0:i.expiry_type)||"no_expiry",expiry_date:(null==i?void 0:i.expiry_date)||"",expiry_days:(null==i?void 0:i.expiry_days)||"",target_user_types:(null==i?void 0:i.target_user_types)||(null==i?void 0:i.allowed_user_types)||["customer","employee"],max_redemptions_per_user:(null==i?void 0:i.max_redemptions_per_user)||"",max_redemptions_total:(null==i?void 0:i.max_redemptions_total)||"",valid_from:(null==i?void 0:i.valid_from)||"",valid_until:(null==i?void 0:i.valid_until)||"",image_url:(null==i?void 0:i.image_url)||"",redemption_window:(null==i?void 0:i.redemption_window)||"unlimited",requires_minimum_purchase:(null==i?void 0:i.requires_minimum_purchase)||"",valid_days_of_week:(null==i?void 0:i.valid_days_of_week)||[],valid_outlets:(null==i?void 0:i.valid_outlets)||[],auto_expire_hours:(null==i?void 0:i.auto_expire_hours)||"",investor_credits_cost:(null==i?void 0:i.investor_credits_cost)||"",media_budget_cost:(null==i?void 0:i.media_budget_cost)||"",expires_at:(null==i?void 0:i.expires_at)||""}),[m,p]=(0,a.useState)(""),[h,g]=(0,a.useState)({}),[F,B]=(0,a.useState)({}),E=(e,t)=>{switch(e){case"title":if(!t||0===t.trim().length)return"Voucher title is required";if(t.length<3)return"Title must be at least 3 characters";if(t.length>200)return"Title must be less than 200 characters";break;case"points_required":if(""===t||void 0===t)return"Points required is required";if(0>Number(t))return"Points must be non-negative";break;case"category":if(!t)return"Category is required"}return""},q=(e,t)=>{if(x({...u,[e]:t}),F[e]){let s=E(e,t);g({...h,[e]:s})}},O=e=>{B({...F,[e]:!0});let t=E(e,u[e]);g({...h,[e]:t})},z=u.target_user_types.includes("investor"),D=u.target_user_types.includes("media");(0,a.useMemo)(()=>Array.isArray(l)?m?l.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())):l:[],[l,m]);let V=u.title.length>=3&&u.category&&void 0!==u.points_required&&Number(u.points_required)>=0;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/40 backdrop-blur-sm flex items-start justify-center p-6 animate-in fade-in duration-200",children:(0,r.jsx)("div",{className:"w-full max-w-2xl my-8 animate-in slide-in-from-bottom-4 duration-300",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-border-subtle overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border-subtle bg-gradient-to-b from-background-subtle to-white",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl bg-accent-500 flex items-center justify-center shadow-sm",children:(0,r.jsx)(v.Z,{size:20,className:"text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-display text-display-md text-text-primary tracking-tight",children:i?"Edit Voucher":"Create Voucher"}),(0,r.jsx)("p",{className:"font-ui text-ui-xs text-text-secondary mt-0.5",children:i?"Update reward details":"Design a new customer reward"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white rounded-lg border border-border-subtle shadow-sm",children:[(0,r.jsx)("span",{className:"font-ui text-ui-xs text-text-secondary",children:"Status"}),(0,r.jsx)("button",{type:"button",onClick:()=>x({...u,is_active:!u.is_active}),className:"relative inline-flex h-4 w-7 items-center rounded-full transition-all duration-200 ".concat(u.is_active?"bg-success-500":"bg-gray-300"),children:(0,r.jsx)("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform duration-200 shadow-sm ".concat(u.is_active?"translate-x-4":"translate-x-0.5")})}),(0,r.jsx)("span",{className:"font-ui text-ui-xs font-semibold ".concat(u.is_active?"text-success-600":"text-text-tertiary"),children:u.is_active?"Live":"Draft"})]}),(0,r.jsx)("button",{type:"button",onClick:c,className:"p-2 hover:bg-background-hover rounded-lg transition-colors group",children:(0,r.jsx)(b.Z,{size:18,className:"text-text-secondary group-hover:text-text-primary transition-colors"})})]})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o(u)},className:"p-5 space-y-5 max-h-[calc(100vh-10rem)] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,r.jsx)("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-br from-accent-500 to-accent-600 flex items-center justify-center",children:(0,r.jsx)(y.Z,{size:16,className:"text-white",strokeWidth:2.5})}),(0,r.jsx)("div",{children:(0,r.jsx)("h3",{className:"font-display text-[15px] font-bold text-text-primary leading-none",children:"Reward Configuration"})})]}),u.title&&u.points_required&&(0,r.jsx)(j.Z,{size:16,className:"text-success-500",strokeWidth:2.5})]}),(0,r.jsxs)("div",{className:"space-y-3 pl-9",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-center justify-between font-ui text-[12px] font-semibold text-text-primary mb-1.5 leading-tight",children:[(0,r.jsxs)("span",{children:["Voucher Name ",(0,r.jsx)("span",{className:"text-danger-500",children:"*"})]}),F.title&&!h.title&&u.title&&(0,r.jsxs)("span",{className:"text-[11px] text-success-600 flex items-center gap-1 leading-none",children:[(0,r.jsx)(j.Z,{size:12,strokeWidth:2.5})," Looks great"]})]}),(0,r.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 transition-all leading-tight ".concat(h.title&&F.title?"border-danger-500 focus:ring-danger-500/20 focus:border-danger-500":"border-border-subtle focus:ring-accent-500/20 focus:border-accent-500"),value:u.title,onChange:e=>q("title",e.target.value),onBlur:()=>O("title"),placeholder:"e.g., Free Croissant with Any Coffee",required:!0}),h.title&&F.title&&(0,r.jsxs)("p",{className:"font-ui text-[11px] text-danger-600 mt-1 flex items-center gap-1 leading-tight",children:[(0,r.jsx)(N.Z,{size:11,strokeWidth:2.5})," ",h.title]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:["Category ",(0,r.jsx)("span",{className:"text-danger-500",children:"*"})]}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg font-ui text-[13px] text-text-primary focus:outline-none focus:ring-1 transition-all bg-white leading-tight ".concat(h.category&&F.category?"border-danger-500 focus:ring-danger-500/20 focus:border-danger-500":"border-border-subtle focus:ring-accent-500/20 focus:border-accent-500"),value:u.category,onChange:e=>q("category",e.target.value),onBlur:()=>O("category"),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"drinks",children:"Drinks"}),(0,r.jsx)("option",{value:"food",children:"Food"}),(0,r.jsx)("option",{value:"discounts",children:"Discounts"}),(0,r.jsx)("option",{value:"merchandise",children:"Merchandise"}),(0,r.jsx)("option",{value:"combos",children:"Combos"}),(0,r.jsx)("option",{value:"promotions",children:"Promotions"})]}),h.category&&F.category&&(0,r.jsxs)("p",{className:"font-ui text-[10px] text-danger-600 mt-1 flex items-center gap-1 leading-tight",children:[(0,r.jsx)(N.Z,{size:10,strokeWidth:2.5})," ",h.category]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:["Type ",(0,r.jsx)("span",{className:"text-danger-500",children:"*"})]}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary focus:outline-none focus:ring-1 focus:ring-accent-500/20 focus:border-accent-500 transition-all bg-white leading-tight",value:u.voucher_type,onChange:e=>q("voucher_type",e.target.value),children:[(0,r.jsx)("option",{value:"free_item",children:"Free Item"}),(0,r.jsx)("option",{value:"discount_amount",children:"Discount"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:["Value ",(0,r.jsx)("span",{className:"font-ui text-[11px] text-text-tertiary",children:"(THB)"})]}),(0,r.jsx)("input",{type:"number",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-accent-500/20 focus:border-accent-500 transition-all leading-tight",value:u.cash_value,onChange:e=>q("cash_value",e.target.value),placeholder:"100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"flex items-center justify-between font-ui text-[12px] font-semibold text-text-primary mb-1.5 leading-tight",children:(0,r.jsxs)("span",{children:["Points ",(0,r.jsx)("span",{className:"text-danger-500",children:"*"})]})}),(0,r.jsx)("input",{type:"number",min:"0",className:"w-full px-3 py-2 border rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 transition-all leading-tight ".concat(h.points_required&&F.points_required?"border-danger-500 focus:ring-danger-500/20 focus:border-danger-500":"border-border-subtle focus:ring-accent-500/20 focus:border-accent-500"),value:u.points_required,onChange:e=>q("points_required",e.target.value),onBlur:()=>O("points_required"),placeholder:"0",required:!0}),h.points_required&&F.points_required&&(0,r.jsxs)("p",{className:"font-ui text-[10px] text-danger-600 mt-1 flex items-center gap-1 leading-tight",children:[(0,r.jsx)(N.Z,{size:10,strokeWidth:2.5})," ",h.points_required]})]})]}),(z||D)&&(0,r.jsx)("div",{className:"bg-background-subtle rounded-lg p-3 border border-border-subtle",children:(0,r.jsxs)("div",{className:"grid gap-3 grid-cols-2",children:[z&&(0,r.jsxs)("div",{className:"animate-in slide-in-from-right duration-200",children:[(0,r.jsx)("label",{className:"block font-ui text-[11px] font-medium text-text-primary mb-1.5 leading-tight",children:"Investor Credits"}),(0,r.jsx)("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-accent-500/20 focus:border-accent-500 transition-all leading-tight bg-white",value:u.investor_credits_cost,onChange:e=>q("investor_credits_cost",e.target.value),placeholder:"0"})]}),D&&(0,r.jsxs)("div",{className:"animate-in slide-in-from-right duration-200",children:[(0,r.jsx)("label",{className:"block font-ui text-[11px] font-medium text-text-primary mb-1.5 leading-tight",children:"Media Budget (THB)"}),(0,r.jsx)("input",{type:"number",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-accent-500/20 focus:border-accent-500 transition-all leading-tight bg-white",value:u.media_budget_cost,onChange:e=>q("media_budget_cost",e.target.value),placeholder:"0.00"})]})]})}),(0,r.jsx)("div",{children:(0,r.jsx)(f.Z,{label:"Voucher Image",value:u.image_url,onChange:e=>q("image_url",e),onRemove:()=>q("image_url","")})})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,r.jsx)("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-br from-text-primary to-gray-700 flex items-center justify-center",children:(0,r.jsx)(w.Z,{size:16,className:"text-white",strokeWidth:2.5})}),(0,r.jsx)("div",{children:(0,r.jsx)("h3",{className:"font-display text-[15px] font-bold text-text-primary leading-none",children:"Access & Availability"})})]})}),(0,r.jsxs)("div",{className:"space-y-3 pl-9",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-ui text-[12px] font-semibold text-text-primary mb-1.5 leading-tight",children:"Who can redeem?"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[{value:"customer",label:"Customers",icon:_.Z},{value:"employee",label:"Staff",icon:k.Z},{value:"investor",label:"Investors",icon:C.Z},{value:"media",label:"Media",icon:Z.Z}].map(e=>{let t=e.icon,s=u.target_user_types.includes(e.value);return(0,r.jsxs)("button",{type:"button",onClick:()=>{s?q("target_user_types",u.target_user_types.filter(t=>t!==e.value)):q("target_user_types",[...u.target_user_types,e.value])},className:"flex flex-col items-center gap-1.5 px-2 py-2.5 rounded-lg border transition-all font-ui text-[11px] font-semibold ".concat(s?"border-accent-500 bg-accent-50 text-text-primary":"border-border-subtle bg-white text-text-secondary hover:border-accent-300"),children:[(0,r.jsx)(t,{size:16,strokeWidth:2,className:s?"text-accent-600":"text-text-tertiary"}),(0,r.jsx)("span",{className:"leading-tight",children:e.label})]},e.value)})})]}),(0,r.jsxs)("div",{className:"pt-3 border-t border-border-subtle grid grid-cols-[auto_1fr] gap-3 items-center",children:[(0,r.jsx)(S.Z,{size:16,strokeWidth:2,className:"text-text-secondary flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block font-ui text-[12px] font-semibold text-text-primary mb-1.5 leading-tight",children:["Expiration ",(0,r.jsx)("span",{className:"font-ui text-[11px] text-text-tertiary font-normal",children:"(optional)"})]}),(0,r.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[12px] text-text-primary focus:outline-none focus:ring-1 focus:ring-accent-500/20 focus:border-accent-500 transition-all leading-tight",value:u.expires_at,onChange:e=>q("expires_at",e.target.value)})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,r.jsx)("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center",children:(0,r.jsx)(S.Z,{size:16,className:"text-white",strokeWidth:2.5})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-display text-[15px] font-bold text-text-primary leading-none",children:"Advanced Settings"}),(0,r.jsx)("p",{className:"font-ui text-[11px] text-text-secondary mt-0.5",children:"Redemption rules & restrictions"})]})]})}),(0,r.jsxs)("div",{className:"space-y-3 pl-9",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-ui text-[12px] font-semibold text-text-primary mb-1.5 leading-tight",children:"Redemption Window"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary focus:outline-none focus:ring-1 focus:ring-accent-500/20 focus:border-accent-500 transition-all bg-white leading-tight",value:u.redemption_window,onChange:e=>q("redemption_window",e.target.value),children:[(0,r.jsx)("option",{value:"unlimited",children:"Unlimited (Can redeem anytime)"}),(0,r.jsx)("option",{value:"once_per_day",children:"Once Per Day"}),(0,r.jsx)("option",{value:"once_per_week",children:"Once Per Week"}),(0,r.jsx)("option",{value:"once_per_month",children:"Once Per Month"}),(0,r.jsx)("option",{value:"once_per_shift",children:"Once Per Shift (Staff only)"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:["Minimum Purchase ",(0,r.jsx)("span",{className:"font-ui text-[11px] text-text-tertiary",children:"(THB)"})]}),(0,r.jsx)("input",{type:"number",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-accent-500/20 focus:border-accent-500 transition-all leading-tight",value:u.requires_minimum_purchase,onChange:e=>q("requires_minimum_purchase",e.target.value),placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:["Auto-Expire ",(0,r.jsx)("span",{className:"font-ui text-[11px] text-text-tertiary",children:"(hours after redemption)"})]}),(0,r.jsx)("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-accent-500/20 focus:border-accent-500 transition-all leading-tight",value:u.auto_expire_hours,onChange:e=>q("auto_expire_hours",e.target.value),placeholder:"Leave empty for no auto-expire"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block font-ui text-[12px] font-semibold text-text-primary mb-1.5 leading-tight",children:["Valid Days of Week ",(0,r.jsx)("span",{className:"font-ui text-[11px] text-text-tertiary font-normal",children:"(optional)"})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-2",children:[{value:1,label:"Mon"},{value:2,label:"Tue"},{value:3,label:"Wed"},{value:4,label:"Thu"},{value:5,label:"Fri"},{value:6,label:"Sat"},{value:0,label:"Sun"}].map(e=>{let t=u.valid_days_of_week.includes(e.value);return(0,r.jsx)("button",{type:"button",onClick:()=>{t?q("valid_days_of_week",u.valid_days_of_week.filter(t=>t!==e.value)):q("valid_days_of_week",[...u.valid_days_of_week,e.value])},className:"px-2 py-2 rounded-lg border transition-all font-ui text-[11px] font-semibold ".concat(t?"border-accent-500 bg-accent-50 text-accent-700":"border-border-subtle bg-white text-text-secondary hover:border-accent-300"),children:e.label},e.value)})}),(0,r.jsx)("p",{className:"font-ui text-[10px] text-text-tertiary mt-1.5 leading-tight",children:"Leave empty to allow all days"})]}),(0,r.jsxs)("div",{className:"bg-background-subtle rounded-lg p-3 border border-border-subtle",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(P.Z,{size:14,className:"text-text-tertiary"}),(0,r.jsxs)("label",{className:"block font-ui text-[11px] font-semibold text-text-primary leading-tight",children:["Valid Outlets ",(0,r.jsx)("span",{className:"font-ui text-[10px] text-text-tertiary font-normal",children:"(Coming Soon)"})]})]}),(0,r.jsx)("p",{className:"font-ui text-[10px] text-text-tertiary mt-1.5 leading-tight",children:"Outlet-specific redemption restrictions will be available soon"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-border-subtle -mx-5 px-5 pb-1 mt-5",children:[(0,r.jsx)("div",{className:"flex items-center gap-1.5",children:V?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{size:14,strokeWidth:2.5,className:"text-success-500"}),(0,r.jsx)("span",{className:"font-ui text-[11px] text-success-600 font-semibold leading-tight",children:"Ready"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.Z,{size:14,strokeWidth:2,className:"text-warning-500"}),(0,r.jsx)("span",{className:"font-ui text-[11px] text-text-secondary leading-tight",children:"Required fields missing"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:c,disabled:d,className:"px-4 py-2 font-ui text-[13px] font-semibold text-text-secondary hover:text-text-primary hover:bg-background-hover rounded-lg transition-all disabled:opacity-50 leading-none",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:!V||d,className:"px-4 py-2 bg-text-primary text-white font-ui text-[13px] font-bold rounded-lg hover:bg-opacity-90 transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 leading-none",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3.5 h-3.5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.Z,{size:14,strokeWidth:2}),i?"Update":"Create"]})})]})]})]})]})})})}function B(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)("all"),[l,o]=(0,a.useState)("all"),[c,d]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0),[f,v]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),[w,_]=(0,a.useState)([]),[k,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Z(),S()},[]);let Z=async()=>{x(!0);try{let e=(await h.hO.getAllAdmin()).data,t=A(e);d(t)}catch(e){g.ZP.error("Failed to load vouchers")}finally{x(!1)}},S=async()=>{try{var e;let t=await h.ZP.get("/companies"),s=Array.isArray(t.data)?t.data:(null===(e=t.data)||void 0===e?void 0:e.companies)||[];_(s)}catch(e){_([])}},P=async e=>{C(!0);try{await h.hO.create(e),g.ZP.success("Voucher created successfully"),v(!1),Z()}catch(e){var t,s;g.ZP.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to create voucher")}finally{C(!1)}},A=e=>{let t={"Staff Perks":[],"Company Exclusive":[],"Customer Rewards":[]};return e.forEach(e=>{let s=e.target_user_types||e.allowed_user_types||[],r=e.is_company_exclusive,a={id:String(e.id),name:e.title||e.name||"Untitled Voucher",type:B(e),category:e.category||null,status:e.is_active?"active":"inactive",points:e.points_required||0,valueDisplay:E(e),redeemedCount:parseInt(e.times_redeemed)||0,userCount:parseInt(e.unique_users)||0,featured:e.is_featured||!1};!r&&(s.includes("staff")||s.includes("employee"))&&!s.includes("customer")?t["Staff Perks"].push(a):r?t["Company Exclusive"].push(a):t["Customer Rewards"].push(a)}),Object.entries(t).map(e=>{let[t,s]=e;return{id:t.toLowerCase().replace(/\s+/g,"-"),name:t,voucherCount:s.length,vouchers:s}})},B=e=>"free_item"===e.voucher_type?"freeItem":e.discount_percentage||e.discount_amount?"discount":"promotion",E=e=>e.discount_percentage?"".concat(e.discount_percentage,"%"):e.discount_amount?"฿".concat(Number(e.discount_amount).toFixed(2)):"—",q=(0,a.useMemo)(()=>{let t=t=>t.toLowerCase().includes(e.toLowerCase());return c.map(e=>({...e,vouchers:e.vouchers.filter(r=>!!(("all"===s||r.status===s)&&("company"!==l||"Company Exclusive"===e.name)&&("general"!==l||"Company Exclusive"!==e.name)&&t(r.name)))}))},[e,s,l,c]),O=async e=>{try{let t=(await h.hO.getAllAdmin()).data.find(t=>String(t.id)===String(e));t?(N(t),y(!0)):g.ZP.error("Voucher not found")}catch(e){g.ZP.error("Failed to load voucher details")}},z=async e=>{if(j){C(!0);try{await h.hO.update(j.id,e),g.ZP.success("Voucher updated successfully"),y(!1),N(null),Z()}catch(e){var t,s;g.ZP.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to update voucher")}finally{C(!1)}}},D=async e=>{try{let t=(await h.hO.getAllAdmin()).data.find(t=>String(t.id)===String(e));if(t){let e={...t,title:"".concat(t.title," (Copy)")};delete e.id,delete e.created_at,delete e.updated_at,delete e.times_redeemed,delete e.active_redemptions,delete e.unique_users,delete e.last_redeemed_at,await h.hO.create(e),g.ZP.success("Voucher duplicated successfully"),Z()}else g.ZP.error("Voucher not found")}catch(e){var t,s;g.ZP.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to duplicate voucher")}},V=async e=>{if(confirm("Are you sure you want to archive this voucher?"))try{await h.hO.update(Number(e),{is_active:!1}),g.ZP.success("Voucher archived successfully"),Z()}catch(e){var t,s;g.ZP.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to archive voucher")}},T=async e=>{if(confirm("Are you sure you want to permanently delete this voucher? This action cannot be undone."))try{await h.hO.delete(Number(e)),g.ZP.success("Voucher deleted successfully"),Z()}catch(e){var t,s;g.ZP.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to delete voucher")}},I=c.reduce((e,t)=>e+t.voucherCount,0);return(0,r.jsxs)(n.Z,{children:[(0,r.jsx)("div",{className:"min-h-screen bg-neutral-50",children:(0,r.jsxs)("div",{className:"max-w-[1600px] mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-[28px] font-semibold text-neutral-900",children:"Vouchers"}),(0,r.jsxs)("p",{className:"text-[14px] text-neutral-500",children:[I," total vouchers"]})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>v(!0),className:"h-[40px] px-4 rounded-lg border border-neutral-900 bg-neutral-900 text-white text-[14px] font-medium flex items-center gap-2 hover:bg-neutral-800 transition-colors",children:[(0,r.jsx)("span",{className:"text-[18px] leading-none",children:"+"}),"Create Voucher"]})]}),(0,r.jsx)("div",{className:"bg-white border border-neutral-200 rounded-xl p-4 mb-6 shadow-sm",children:(0,r.jsx)("div",{className:"flex items-end justify-between gap-4 flex-wrap",children:(0,r.jsxs)("div",{className:"flex items-end gap-4 flex-1",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Search vouchers...",className:"w-[320px] h-[40px] pl-10 pr-3 border border-neutral-300 rounded-lg text-[14px] text-neutral-900 placeholder:text-neutral-500 focus:outline-none focus:ring-1 focus:ring-neutral-400 focus:border-neutral-400 transition-all bg-white",value:e,onChange:e=>t(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-[10px] font-semibold uppercase tracking-tight text-neutral-500 mb-1.5",children:"STATUS"}),(0,r.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"h-[40px] px-3 pr-8 rounded-lg border border-neutral-300 bg-white text-[14px] text-neutral-900 hover:border-neutral-400 transition-all focus:outline-none focus:ring-1 focus:ring-neutral-400 cursor-pointer",children:[(0,r.jsx)("option",{value:"all",children:"All"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-[10px] font-semibold uppercase tracking-tight text-neutral-500 mb-1.5",children:"SCOPE"}),(0,r.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"h-[40px] px-3 pr-8 rounded-lg border border-neutral-300 bg-white text-[14px] text-neutral-900 hover:border-neutral-400 transition-all focus:outline-none focus:ring-1 focus:ring-neutral-400 cursor-pointer",children:[(0,r.jsx)("option",{value:"all",children:"All"}),(0,r.jsx)("option",{value:"company",children:"Company"}),(0,r.jsx)("option",{value:"general",children:"General"})]})]})]})})}),u?(0,r.jsx)("div",{className:"flex items-center justify-center h-40 rounded-lg border border-neutral-200 text-[14px] text-neutral-500 bg-white",children:"Loading vouchers..."}):0===q.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 px-4 rounded-lg border border-neutral-200 bg-white",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-neutral-100 flex items-center justify-center mb-4",children:(0,r.jsx)(p.Z,{size:24,className:"text-neutral-400"})}),(0,r.jsx)("h3",{className:"text-[16px] font-semibold text-neutral-900 mb-1",children:"No vouchers found"}),(0,r.jsx)("p",{className:"text-[14px] text-neutral-500",children:"Try adjusting your filters or create a new voucher."})]}):q.map(e=>(0,r.jsx)(m,{group:e,onEditVoucher:O,onDuplicateVoucher:D,onArchiveVoucher:V,onDeleteVoucher:T},e.id))]})}),f&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsx)(F,{companies:w,onSubmit:P,onCancel:()=>v(!1),isSubmitting:k})})}),b&&j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsx)(F,{voucher:j,companies:w,onSubmit:z,onCancel:()=>{y(!1),N(null)},isSubmitting:k})})})]})}},6189:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var r=s(7437),a=s(9376),n=s(2097),i=s(5466),l=s(5805),o=s(7414),c=s(6439),d=s(1621),u=s(2489),x=s(6840),m=s(7692),p=s(2265);function h(e){var t;let{children:s}=e,h=(0,a.useRouter)(),g=(0,a.usePathname)(),{user:f,logout:v}=(0,n.t)(),[b,y]=(0,p.useState)(!1),j=[{icon:i.Z,label:"Dashboard",path:"/admin/dashboard"},{icon:l.Z,label:"Users",path:"/admin/users"},{icon:o.Z,label:"Vouchers",path:"/admin/vouchers"},{icon:c.Z,label:"Announcements",path:"/admin/announcements"},{icon:d.Z,label:"Transactions",path:"/admin/transactions"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,r.jsx)("header",{className:"lg:hidden bg-white border-b border-neutral-200 sticky top-0 z-30",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-brand-primary rounded flex items-center justify-center text-white font-bold text-sm",children:"S"}),(0,r.jsx)("h1",{className:"font-ui text-body font-semibold text-neutral-900",children:"Sarnies Admin"})]}),(0,r.jsx)("button",{onClick:()=>y(!b),className:"p-2 hover:bg-neutral-50 rounded transition-all duration-150",children:b?(0,r.jsx)(u.Z,{size:20}):(0,r.jsx)(x.Z,{size:20})})]})}),(0,r.jsxs)("aside",{className:"fixed top-0 left-0 h-screen w-60 bg-white border-r border-[#E5E7EB] transition-transform duration-300 z-40 ".concat(b?"translate-x-0":"-translate-x-full"," lg:translate-x-0 flex flex-col"),children:[(0,r.jsx)("div",{className:"pl-5 pt-6 pb-4 border-b border-[#E5E7EB]",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg bg-brand-primary flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-lg font-bold text-white",children:"S"})}),(0,r.jsx)("span",{className:"font-ui text-base font-medium text-[#1B1B1B]",children:"Sarnies Admin"})]})}),(0,r.jsx)("div",{className:"pl-5 py-4 border-b border-[#E5E7EB]",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 flex-shrink-0 rounded-full bg-[#F5F5F5] flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xs font-semibold text-[#1B1B1B]",children:(null==f?void 0:null===(t=f.name)||void 0===t?void 0:t.charAt(0))||"D"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-ui text-sm font-medium text-[#1B1B1B] truncate",title:(null==f?void 0:f.name)||"Dev User",children:(null==f?void 0:f.name)||"Dev User"}),(0,r.jsx)("p",{className:"font-ui text-xs text-[#6F6F6F]",children:"Administrator"})]})]})}),(0,r.jsx)("nav",{className:"flex-1 overflow-y-auto pl-5 py-4",children:(0,r.jsx)("div",{className:"space-y-1",children:j.map(e=>{let t=e.icon,s=g===e.path;return(0,r.jsxs)("button",{onClick:()=>{h.push(e.path),y(!1)},className:"w-full h-11 flex items-center gap-3 pr-3 rounded-lg font-ui text-sm font-medium transition-colors ".concat(s?"bg-[#F5F5F5] text-[#1B1B1B]":"text-[#6F6F6F] hover:bg-[#F5F5F5] hover:text-[#1B1B1B]"),children:[(0,r.jsx)(t,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),(0,r.jsx)("span",{children:e.label})]},e.path)})})}),(0,r.jsx)("div",{className:"pl-5 pb-5 border-t border-[#E5E7EB] pt-4",children:(0,r.jsxs)("button",{onClick:()=>{v(),h.push("/login")},className:"w-full h-11 flex items-center gap-3 pr-3 text-[#6F6F6F] hover:bg-red-50 hover:text-red-600 rounded-lg font-ui text-sm font-medium transition-colors",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),(0,r.jsx)("span",{children:"Logout"})]})})]}),b&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>y(!1)}),(0,r.jsx)("main",{className:"lg:ml-60 min-h-screen bg-white",children:s})]})}},8516:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var r=s(7437),a=s(2265),n=s(2489),i=s(5863),l=s(7689),o=s(9064),c=s(9116);function d(e){let{value:t,onChange:s,onRemove:d,label:u="Image",className:x=""}=e,[m,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),f=(0,a.useRef)(null),v=async e=>{if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type)){o.ZP.error("Invalid file type. Only JPG, PNG, WEBP, and GIF are allowed.");return}if(e.size>5242880){o.ZP.error("File size must be less than 5MB");return}p(!0);try{let t=new FormData;t.append("image",e);let r=await c.ZP.post("/upload",t,{headers:{"Content-Type":"multipart/form-data"}});s(r.data.url),o.ZP.success("Image uploaded successfully")}catch(e){var t,r;o.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to upload image")}finally{p(!1)}};return(0,r.jsxs)("div",{className:x,children:[u&&(0,r.jsx)("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:u}),(0,r.jsx)("input",{ref:f,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files;t&&t[0]&&v(t[0])},className:"hidden"}),t?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:t,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border border-neutral-300"}),(0,r.jsx)("button",{type:"button",onClick:()=>{d?d():s("")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Remove image",children:(0,r.jsx)(n.Z,{size:16})})]}):(0,r.jsx)("div",{onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),g(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),g(!1);let t=e.dataTransfer.files;t&&t[0]&&v(t[0])},onClick:()=>{var e;return!m&&(null===(e=f.current)||void 0===e?void 0:e.click())},className:"\n            relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer\n            transition-colors\n            ".concat(h?"border-neutral-500 bg-neutral-50":"border-neutral-300 hover:border-neutral-400 hover:bg-neutral-50","\n            ").concat(m?"cursor-not-allowed opacity-60":"","\n          "),children:m?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)(i.Z,{size:40,className:"text-neutral-400 animate-spin"}),(0,r.jsx)("p",{className:"text-[14px] text-neutral-600 font-medium",children:"Uploading..."})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-neutral-100 flex items-center justify-center",children:(0,r.jsx)(l.Z,{size:24,className:"text-neutral-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[14px] text-neutral-700 font-medium mb-1",children:"Click to upload or drag and drop"}),(0,r.jsx)("p",{className:"text-[12px] text-neutral-500",children:"JPG, PNG, WEBP, or GIF (max 5MB)"})]})]})})]})}},9116:function(e,t,s){"use strict";s.d(t,{L2:function(){return l},Vj:function(){return c},Z1:function(){return m},cC:function(){return x},h3:function(){return n},hO:function(){return i},kv:function(){return a},nN:function(){return d},oZ:function(){return o},w2:function(){return u},xf:function(){return p}});let r=s(3464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});r.interceptors.request.use(e=>{{let t=localStorage.getItem("auth-storage");if(t)try{let{state:s}=JSON.parse(t);(null==s?void 0:s.token)&&(e.headers.Authorization="Bearer ".concat(s.token))}catch(e){}}return e}),r.interceptors.response.use(e=>e,e=>{var t,s,r;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname.includes("/login"),a=null===(r=e.config)||void 0===r?void 0:null===(s=r.url)||void 0===s?void 0:s.includes("/auth/"),n=localStorage.getItem("auth-storage");t||a||!n||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)}),t.ZP=r;let a={staffLogin:(e,t)=>r.post("/auth/login",{email:e,password:t}),sendOTP:e=>r.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>r.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>r.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>r.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>r.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>r.get("/auth/magic-link/verify/".concat(e))},n={getAll:e=>r.get("/users",{params:e}),getOne:e=>r.get("/users/".concat(e)),update:(e,t)=>r.put("/users/".concat(e),t),adjustPoints:(e,t,s)=>r.post("/users/".concat(e,"/points"),{points:t,reason:s}),getStaticQR:e=>r.get("/users/".concat(e,"/static-qr")),getVoucherInstances:(e,t)=>r.get("/users/".concat(e,"/voucher-instances"),{params:t?{status:t}:void 0})},i={getAll:()=>r.get("/vouchers"),getAllAdmin:()=>r.get("/vouchers/all"),getOne:e=>r.get("/vouchers/".concat(e)),create:e=>r.post("/vouchers",e),update:(e,t)=>r.patch("/vouchers/".concat(e),t),delete:e=>r.delete("/vouchers/".concat(e)),redeem:(e,t)=>r.post("/vouchers/".concat(e,"/redeem"),{user_id:t}),getInstances:(e,t)=>r.get("/vouchers/instances/".concat(e),{params:{status:t}})},l={earnPoints:(e,t,s)=>r.post("/transactions/earn",{user_id:e,amount:t,outlet:s}),redeemVoucher:(e,t,s)=>r.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:s}),getAll:e=>r.get("/transactions",{params:e})},o={getAll:e=>r.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>r.get("/announcements/all"),getById:e=>r.get("/announcements/".concat(e)),create:e=>r.post("/announcements",e),update:(e,t)=>r.patch("/announcements/".concat(e),t),delete:e=>r.delete("/announcements/".concat(e))},c={getCredits:()=>r.get("/investors/credits"),getOutletCredits:e=>r.get("/investors/credits/outlet/".concat(e)),getTransactions:e=>r.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>r.post("/investors/admin/".concat(e,"/outlet-credits"),t),allocateGroupCredits:(e,t)=>r.post("/investors/admin/".concat(e,"/group-credits"),t),adjustCredits:(e,t)=>r.patch("/investors/admin/".concat(e,"/credits/adjust"),t),getExpiringCredits:e=>r.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},d={getBudget:()=>r.get("/media/budget"),getTransactions:e=>r.get("/media/transactions",{params:e}),setBudget:(e,t)=>r.post("/media/admin/".concat(e,"/budget"),t),adjustBudget:(e,t)=>r.patch("/media/admin/".concat(e,"/budget/adjust"),t),getExpiringBudgets:e=>r.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>r.get("/media/admin/usage-report")},u={getAll:()=>r.get("/settings"),getOne:e=>r.get("/settings/".concat(e)),update:(e,t)=>r.put("/settings/".concat(e),{value:t}),bulkUpdate:e=>r.put("/settings",{settings:e}),create:e=>r.post("/settings",e)},x={getVapidKey:()=>r.get("/notifications/vapid-public-key"),subscribe:e=>r.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>r.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>r.get("/notifications/status"),getPreferences:()=>r.get("/notifications/preferences"),updatePreferences:e=>r.patch("/notifications/preferences",{preferences:e}),sendTest:()=>r.post("/notifications/test"),getHistory:e=>r.get("/notifications/history",{params:e}),adminSend:e=>r.post("/notifications/admin/send",e),adminBroadcast:e=>r.post("/notifications/admin/broadcast",e),adminStats:()=>r.get("/notifications/admin/stats"),adminProcessQueue:()=>r.post("/notifications/admin/process-queue")},m={getMyCode:()=>r.get("/referrals/my-code"),getMyReferrals:()=>r.get("/referrals/my-referrals"),validateCode:e=>r.get("/referrals/validate/".concat(e)),applyCode:e=>r.post("/referrals/apply",e),getAdminStats:()=>r.get("/referrals/admin/stats")},p={getAll:()=>r.get("/pos/keys"),create:e=>r.post("/pos/keys",e),revoke:e=>r.delete("/pos/keys/".concat(e)),getLogs:(e,t)=>r.get("/pos/keys/".concat(e,"/logs"),{params:t}),getStats:()=>r.get("/pos/keys/stats")}},2097:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var r=s(9625),a=s(6885);let n=(0,r.Ue)()((0,a.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,s)=>{e({user:t,token:s})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,a.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{null==e||e.setHasHydrated(!0)}}))}},function(e){e.O(0,[1299,3464,368,5349,2971,2117,1744],function(){return e(e.s=6281)}),_N_E=e.O()}]);