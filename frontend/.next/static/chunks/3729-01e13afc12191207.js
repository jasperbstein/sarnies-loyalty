"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3729],{6189:function(e,t,s){s.d(t,{Z:function(){return x}});var a=s(7437),n=s(9376),r=s(2097),i=s(5466),o=s(5805),c=s(7414),l=s(6439),d=s(1621),u=s(2489),m=s(6840),g=s(7692),h=s(2265);function x(e){var t;let{children:s}=e,x=(0,n.useRouter)(),p=(0,n.usePathname)(),{user:f,logout:b}=(0,r.t)(),[v,j]=(0,h.useState)(!1),y=[{icon:i.Z,label:"Dashboard",path:"/admin/dashboard"},{icon:o.Z,label:"Users",path:"/admin/users"},{icon:c.Z,label:"Vouchers",path:"/admin/vouchers"},{icon:l.Z,label:"Announcements",path:"/admin/announcements"},{icon:d.Z,label:"Transactions",path:"/admin/transactions"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("header",{className:"lg:hidden bg-white border-b border-neutral-200 sticky top-0 z-30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-brand-primary rounded flex items-center justify-center text-white font-bold text-sm",children:"S"}),(0,a.jsx)("h1",{className:"font-ui text-body font-semibold text-neutral-900",children:"Sarnies Admin"})]}),(0,a.jsx)("button",{onClick:()=>j(!v),className:"p-2 hover:bg-neutral-50 rounded transition-all duration-150",children:v?(0,a.jsx)(u.Z,{size:20}):(0,a.jsx)(m.Z,{size:20})})]})}),(0,a.jsxs)("aside",{className:"fixed top-0 left-0 h-screen w-60 bg-white border-r border-[#E5E7EB] transition-transform duration-300 z-40 ".concat(v?"translate-x-0":"-translate-x-full"," lg:translate-x-0 flex flex-col"),children:[(0,a.jsx)("div",{className:"pl-5 pt-6 pb-4 border-b border-[#E5E7EB]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg bg-brand-primary flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg font-bold text-white",children:"S"})}),(0,a.jsx)("span",{className:"font-ui text-base font-medium text-[#1B1B1B]",children:"Sarnies Admin"})]})}),(0,a.jsx)("div",{className:"pl-5 py-4 border-b border-[#E5E7EB]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 flex-shrink-0 rounded-full bg-[#F5F5F5] flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-semibold text-[#1B1B1B]",children:(null==f?void 0:null===(t=f.name)||void 0===t?void 0:t.charAt(0))||"D"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-ui text-sm font-medium text-[#1B1B1B] truncate",title:(null==f?void 0:f.name)||"Dev User",children:(null==f?void 0:f.name)||"Dev User"}),(0,a.jsx)("p",{className:"font-ui text-xs text-[#6F6F6F]",children:"Administrator"})]})]})}),(0,a.jsx)("nav",{className:"flex-1 overflow-y-auto pl-5 py-4",children:(0,a.jsx)("div",{className:"space-y-1",children:y.map(e=>{let t=e.icon,s=p===e.path;return(0,a.jsxs)("button",{onClick:()=>{x.push(e.path),j(!1)},className:"w-full h-11 flex items-center gap-3 pr-3 rounded-lg font-ui text-sm font-medium transition-colors ".concat(s?"bg-[#F5F5F5] text-[#1B1B1B]":"text-[#6F6F6F] hover:bg-[#F5F5F5] hover:text-[#1B1B1B]"),children:[(0,a.jsx)(t,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),(0,a.jsx)("span",{children:e.label})]},e.path)})})}),(0,a.jsx)("div",{className:"pl-5 pb-5 border-t border-[#E5E7EB] pt-4",children:(0,a.jsxs)("button",{onClick:()=>{b(),x.push("/login")},className:"w-full h-11 flex items-center gap-3 pr-3 text-[#6F6F6F] hover:bg-red-50 hover:text-red-600 rounded-lg font-ui text-sm font-medium transition-colors",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),(0,a.jsx)("span",{children:"Logout"})]})})]}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>j(!1)}),(0,a.jsx)("main",{className:"lg:ml-60 min-h-screen bg-white",children:s})]})}},6943:function(e,t,s){s.d(t,{Z:function(){return d}});var a=s(7437),n=s(2369),r=s(3041),i=s(9345),o=s(3327),c=s(1047),l=s(3774);function d(e){var t,s;let{customer:d,qrType:u,showFullDetails:m=!0}=e;return(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-2xl p-6 border-2 border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5 text-gray-600"}),(0,a.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:"Customer Information"}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat("loyalty_id"===u?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:"loyalty_id"===u?"LOYALTY QR":"VOUCHER QR"})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-black to-gray-700 rounded-full flex items-center justify-center flex-shrink-0 shadow-md",children:(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:(((null===(t=d.name)||void 0===t?void 0:t.charAt(0))||"")+((null===(s=d.surname)||void 0===s?void 0:s.charAt(0))||"")).toUpperCase()})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h4",{className:"text-xl font-bold text-black mb-1",children:[d.name," ",d.surname||""]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:d.phone})]}),d.email&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:d.email})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-amber-400 to-amber-500 rounded-xl px-4 py-3 text-center shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 text-white"}),(0,a.jsx)("p",{className:"text-xs font-medium text-white",children:"Points"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:d.points_balance})]})]}),m&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Member Since"})]}),(0,a.jsx)("p",{className:"font-bold text-black",children:new Date(d.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Member ID"})]}),(0,a.jsxs)("p",{className:"font-bold text-black",children:["#",d.id]})]})]})]})}},9116:function(e,t,s){s.d(t,{L2:function(){return o},Vj:function(){return l},Z1:function(){return g},cC:function(){return m},h3:function(){return r},hO:function(){return i},kv:function(){return n},nN:function(){return d},oZ:function(){return c},w2:function(){return u},xf:function(){return h}});let a=s(3464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use(e=>{{let t=localStorage.getItem("auth-storage");if(t)try{let{state:s}=JSON.parse(t);(null==s?void 0:s.token)&&(e.headers.Authorization="Bearer ".concat(s.token))}catch(e){}}return e}),a.interceptors.response.use(e=>e,e=>{var t,s,a;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname.includes("/login"),n=null===(a=e.config)||void 0===a?void 0:null===(s=a.url)||void 0===s?void 0:s.includes("/auth/"),r=localStorage.getItem("auth-storage");t||n||!r||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)}),t.ZP=a;let n={staffLogin:(e,t)=>a.post("/auth/login",{email:e,password:t}),sendOTP:e=>a.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>a.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>a.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>a.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>a.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>a.get("/auth/magic-link/verify/".concat(e))},r={getAll:e=>a.get("/users",{params:e}),getOne:e=>a.get("/users/".concat(e)),update:(e,t)=>a.put("/users/".concat(e),t),adjustPoints:(e,t,s)=>a.post("/users/".concat(e,"/points"),{points:t,reason:s}),getStaticQR:e=>a.get("/users/".concat(e,"/static-qr")),getVoucherInstances:(e,t)=>a.get("/users/".concat(e,"/voucher-instances"),{params:t?{status:t}:void 0})},i={getAll:()=>a.get("/vouchers"),getAllAdmin:()=>a.get("/vouchers/all"),getOne:e=>a.get("/vouchers/".concat(e)),create:e=>a.post("/vouchers",e),update:(e,t)=>a.patch("/vouchers/".concat(e),t),delete:e=>a.delete("/vouchers/".concat(e)),redeem:(e,t)=>a.post("/vouchers/".concat(e,"/redeem"),{user_id:t}),getInstances:(e,t)=>a.get("/vouchers/instances/".concat(e),{params:{status:t}})},o={earnPoints:(e,t,s)=>a.post("/transactions/earn",{user_id:e,amount:t,outlet:s}),redeemVoucher:(e,t,s)=>a.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:s}),getAll:e=>a.get("/transactions",{params:e})},c={getAll:e=>a.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>a.get("/announcements/all"),getById:e=>a.get("/announcements/".concat(e)),create:e=>a.post("/announcements",e),update:(e,t)=>a.patch("/announcements/".concat(e),t),delete:e=>a.delete("/announcements/".concat(e))},l={getCredits:()=>a.get("/investors/credits"),getOutletCredits:e=>a.get("/investors/credits/outlet/".concat(e)),getTransactions:e=>a.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>a.post("/investors/admin/".concat(e,"/outlet-credits"),t),allocateGroupCredits:(e,t)=>a.post("/investors/admin/".concat(e,"/group-credits"),t),adjustCredits:(e,t)=>a.patch("/investors/admin/".concat(e,"/credits/adjust"),t),getExpiringCredits:e=>a.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},d={getBudget:()=>a.get("/media/budget"),getTransactions:e=>a.get("/media/transactions",{params:e}),setBudget:(e,t)=>a.post("/media/admin/".concat(e,"/budget"),t),adjustBudget:(e,t)=>a.patch("/media/admin/".concat(e,"/budget/adjust"),t),getExpiringBudgets:e=>a.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>a.get("/media/admin/usage-report")},u={getAll:()=>a.get("/settings"),getOne:e=>a.get("/settings/".concat(e)),update:(e,t)=>a.put("/settings/".concat(e),{value:t}),bulkUpdate:e=>a.put("/settings",{settings:e}),create:e=>a.post("/settings",e)},m={getVapidKey:()=>a.get("/notifications/vapid-public-key"),subscribe:e=>a.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>a.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>a.get("/notifications/status"),getPreferences:()=>a.get("/notifications/preferences"),updatePreferences:e=>a.patch("/notifications/preferences",{preferences:e}),sendTest:()=>a.post("/notifications/test"),getHistory:e=>a.get("/notifications/history",{params:e}),adminSend:e=>a.post("/notifications/admin/send",e),adminBroadcast:e=>a.post("/notifications/admin/broadcast",e),adminStats:()=>a.get("/notifications/admin/stats"),adminProcessQueue:()=>a.post("/notifications/admin/process-queue")},g={getMyCode:()=>a.get("/referrals/my-code"),getMyReferrals:()=>a.get("/referrals/my-referrals"),validateCode:e=>a.get("/referrals/validate/".concat(e)),applyCode:e=>a.post("/referrals/apply",e),getAdminStats:()=>a.get("/referrals/admin/stats")},h={getAll:()=>a.get("/pos/keys"),create:e=>a.post("/pos/keys",e),revoke:e=>a.delete("/pos/keys/".concat(e)),getLogs:(e,t)=>a.get("/pos/keys/".concat(e,"/logs"),{params:t}),getStats:()=>a.get("/pos/keys/stats")}},2097:function(e,t,s){s.d(t,{t:function(){return r}});var a=s(9625),n=s(6885);let r=(0,a.Ue)()((0,n.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,s)=>{e({user:t,token:s})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,n.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{null==e||e.setHasHydrated(!0)}}))}}]);