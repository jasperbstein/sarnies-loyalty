(()=>{var e={};e.id=7937,e.ids=[7937],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},34826:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.Z,__next_app__:()=>c,originalPathname:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>l}),s(67414),s(95478),s(26083),s(96560);var r=s(23191),a=s(88716),n=s(48001),i=s(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let l=["",{children:["auth",{children:["verify",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,67414)),"/root/Loyalty/frontend/app/auth/verify/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],u=["/root/Loyalty/frontend/app/auth/verify/page.tsx"],d="/auth/verify/page",c={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/verify/page",pathname:"/auth/verify",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},60499:(e,t,s)=>{Promise.resolve().then(s.bind(s,94984))},94984:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(10326),a=s(17577),n=s(35047),i=s(16205);function o(){let e=(0,n.useRouter)();(0,n.useSearchParams)();let{setAuth:t}=(0,i.t)(),[s,o]=(0,a.useState)("loading"),[l,u]=(0,a.useState)("");return r.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-8 text-center",children:["loading"===s&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-12 h-12 border-4 border-neutral-200 border-t-neutral-900 rounded-full animate-spin mx-auto mb-4"}),r.jsx("h1",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Verifying..."}),r.jsx("p",{className:"text-neutral-500",children:"Please wait while we sign you in"})]}),"success"===s&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h1",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Welcome!"}),r.jsx("p",{className:"text-neutral-500",children:"You're signed in. Redirecting..."})]}),"error"===s&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("h1",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Link Invalid"}),r.jsx("p",{className:"text-neutral-500 mb-6",children:l||"This link has expired or already been used."}),r.jsx("button",{onClick:()=>e.push("/login"),className:"w-full bg-neutral-900 text-white py-3 rounded-xl font-medium hover:bg-neutral-800 transition-colors",children:"Back to Login"})]})]})})})}function l(){return r.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-8 text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-neutral-200 border-t-neutral-900 rounded-full animate-spin mx-auto mb-4"}),r.jsx("h1",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Loading..."})]})})})}function u(){return r.jsx(a.Suspense,{fallback:r.jsx(l,{}),children:r.jsx(o,{})})}s(6824)},6824:(e,t,s)=>{"use strict";s.d(t,{L2:()=>l,Vj:()=>d,Z1:()=>m,ZP:()=>a,cC:()=>g,h3:()=>i,hO:()=>o,kv:()=>n,nN:()=>c,oZ:()=>u,w2:()=>p,xf:()=>h});let r=s(94464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});r.interceptors.request.use(e=>e),r.interceptors.response.use(e=>e,e=>{if(e.response?.status===401){let t=window.location.pathname.includes("/login"),s=e.config?.url?.includes("/auth/"),r=localStorage.getItem("auth-storage");t||s||!r||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)});let a=r,n={staffLogin:(e,t)=>r.post("/auth/login",{email:e,password:t}),sendOTP:e=>r.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>r.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>r.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>r.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>r.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>r.get(`/auth/magic-link/verify/${e}`)},i={getAll:e=>r.get("/users",{params:e}),getOne:e=>r.get(`/users/${e}`),update:(e,t)=>r.put(`/users/${e}`,t),adjustPoints:(e,t,s)=>r.post(`/users/${e}/points`,{points:t,reason:s}),getStaticQR:e=>r.get(`/users/${e}/static-qr`),getVoucherInstances:(e,t)=>r.get(`/users/${e}/voucher-instances`,{params:t?{status:t}:void 0})},o={getAll:()=>r.get("/vouchers"),getAllAdmin:()=>r.get("/vouchers/all"),getOne:e=>r.get(`/vouchers/${e}`),create:e=>r.post("/vouchers",e),update:(e,t)=>r.patch(`/vouchers/${e}`,t),delete:e=>r.delete(`/vouchers/${e}`),redeem:(e,t)=>r.post(`/vouchers/${e}/redeem`,{user_id:t}),getInstances:(e,t)=>r.get(`/vouchers/instances/${e}`,{params:{status:t}})},l={earnPoints:(e,t,s)=>r.post("/transactions/earn",{user_id:e,amount:t,outlet:s}),redeemVoucher:(e,t,s)=>r.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:s}),getAll:e=>r.get("/transactions",{params:e})},u={getAll:e=>r.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>r.get("/announcements/all"),getById:e=>r.get(`/announcements/${e}`),create:e=>r.post("/announcements",e),update:(e,t)=>r.patch(`/announcements/${e}`,t),delete:e=>r.delete(`/announcements/${e}`)},d={getCredits:()=>r.get("/investors/credits"),getOutletCredits:e=>r.get(`/investors/credits/outlet/${e}`),getTransactions:e=>r.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>r.post(`/investors/admin/${e}/outlet-credits`,t),allocateGroupCredits:(e,t)=>r.post(`/investors/admin/${e}/group-credits`,t),adjustCredits:(e,t)=>r.patch(`/investors/admin/${e}/credits/adjust`,t),getExpiringCredits:e=>r.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},c={getBudget:()=>r.get("/media/budget"),getTransactions:e=>r.get("/media/transactions",{params:e}),setBudget:(e,t)=>r.post(`/media/admin/${e}/budget`,t),adjustBudget:(e,t)=>r.patch(`/media/admin/${e}/budget/adjust`,t),getExpiringBudgets:e=>r.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>r.get("/media/admin/usage-report")},p={getAll:()=>r.get("/settings"),getOne:e=>r.get(`/settings/${e}`),update:(e,t)=>r.put(`/settings/${e}`,{value:t}),bulkUpdate:e=>r.put("/settings",{settings:e}),create:e=>r.post("/settings",e)},g={getVapidKey:()=>r.get("/notifications/vapid-public-key"),subscribe:e=>r.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>r.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>r.get("/notifications/status"),getPreferences:()=>r.get("/notifications/preferences"),updatePreferences:e=>r.patch("/notifications/preferences",{preferences:e}),sendTest:()=>r.post("/notifications/test"),getHistory:e=>r.get("/notifications/history",{params:e}),adminSend:e=>r.post("/notifications/admin/send",e),adminBroadcast:e=>r.post("/notifications/admin/broadcast",e),adminStats:()=>r.get("/notifications/admin/stats"),adminProcessQueue:()=>r.post("/notifications/admin/process-queue")},m={getMyCode:()=>r.get("/referrals/my-code"),getMyReferrals:()=>r.get("/referrals/my-referrals"),validateCode:e=>r.get(`/referrals/validate/${e}`),applyCode:e=>r.post("/referrals/apply",e),getAdminStats:()=>r.get("/referrals/admin/stats")},h={getAll:()=>r.get("/pos/keys"),create:e=>r.post("/pos/keys",e),revoke:e=>r.delete(`/pos/keys/${e}`),getLogs:(e,t)=>r.get(`/pos/keys/${e}/logs`,{params:t}),getStats:()=>r.get("/pos/keys/stats")}},16205:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var r=s(60114),a=s(85251);let n=(0,r.Ue)()((0,a.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,s)=>{e({user:t,token:s})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,a.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e?.setHasHydrated(!0)}}))},67414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/root/Loyalty/frontend/app/auth/verify/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[5380,2696,4464,5814],()=>s(34826));module.exports=r})();