(()=>{var e={};e.id=3419,e.ids=[3419],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98711:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.Z,__next_app__:()=>x,originalPathname:()=>c,pages:()=>o,routeModule:()=>p,tree:()=>d}),s(82457),s(95478),s(26083),s(96560);var a=s(23191),r=s(88716),i=s(48001),n=s(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=["",{children:["investor",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,82457)),"/root/Loyalty/frontend/app/investor/dashboard/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],o=["/root/Loyalty/frontend/app/investor/dashboard/page.tsx"],c="/investor/dashboard/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/investor/dashboard/page",pathname:"/investor/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9326:(e,t,s)=>{Promise.resolve().then(s.bind(s,77978))},77978:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(10326),r=s(17577);s(6824);var i=s(17069),n=s(59734),l=s(37358);function d(){let[e,t]=(0,r.useState)(null),[s,d]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[x,p]=(0,r.useState)(!0),u=e=>{let t=new Date;return Math.ceil((new Date(e).getTime()-t.getTime())/864e5)};if(x)return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:a.jsx("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})});let g=(e?.credits_balance||0)+s.reduce((e,t)=>e+t.credits_balance,0);return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Investor Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your credits and track usage"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Credits"}),a.jsx(i.Z,{className:"text-blue-600",size:20})]}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:g}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Available across all outlets"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Group Credits"}),a.jsx(n.Z,{className:"text-green-600",size:20})]}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e?.credits_balance||0}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Usable at any outlet"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Outlets Covered"}),a.jsx(l.Z,{className:"text-purple-600",size:20})]}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.length}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"With specific allocations"})]})]}),e&&e.credits_balance>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Group Credits (All Outlets)"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.credits_balance})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Annual Allocation"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.annual_allocation})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Auto Renew"}),a.jsx("p",{className:"text-lg font-medium text-gray-900",children:e.auto_renew?"Yes":"No"})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Days Until Expiry"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:u(e.expires_at)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Outlet-Specific Credits"}),s.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.outlet_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Outlet #",e.outlet_id]})]}),(0,a.jsxs)("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${u(e.expires_at)>30?"bg-green-100 text-green-800":u(e.expires_at)>7?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[u(e.expires_at)," days left"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Balance"}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:e.credits_balance})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Annual"}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:e.annual_allocation})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Auto-renew:"}),a.jsx("span",{className:`font-medium ${e.auto_renew?"text-green-600":"text-gray-900"}`,children:e.auto_renew?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm mt-1",children:[a.jsx("span",{className:"text-gray-600",children:"Expires:"}),a.jsx("span",{className:"font-medium text-gray-900",children:new Date(e.expires_at).toLocaleDateString()})]})]})]},e.id))}):a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No outlet-specific credits allocated"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Transactions"}),o.length>0?a.jsx("div",{className:"space-y-2",children:o.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(e.created_at).toLocaleString(),e.outlet_name&&` â€¢ ${e.outlet_name}`]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:`text-lg font-bold ${"allocation"===e.type||"renewal"===e.type?"text-green-600":"text-red-600"}`,children:["allocation"===e.type||"renewal"===e.type?"+":"-",Math.abs(e.amount)]}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.type})]})]},e.id))}):a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No transactions yet"})]})]})})}},6824:(e,t,s)=>{"use strict";s.d(t,{L2:()=>d,Vj:()=>c,Z1:()=>g,ZP:()=>r,cC:()=>u,h3:()=>n,hO:()=>l,kv:()=>i,nN:()=>x,oZ:()=>o,w2:()=>p,xf:()=>m});let a=s(94464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use(e=>e),a.interceptors.response.use(e=>e,e=>{if(e.response?.status===401){let t=window.location.pathname.includes("/login"),s=e.config?.url?.includes("/auth/"),a=localStorage.getItem("auth-storage");t||s||!a||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)});let r=a,i={staffLogin:(e,t)=>a.post("/auth/login",{email:e,password:t}),sendOTP:e=>a.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>a.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>a.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>a.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>a.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>a.get(`/auth/magic-link/verify/${e}`)},n={getAll:e=>a.get("/users",{params:e}),getOne:e=>a.get(`/users/${e}`),update:(e,t)=>a.put(`/users/${e}`,t),adjustPoints:(e,t,s)=>a.post(`/users/${e}/points`,{points:t,reason:s}),getStaticQR:e=>a.get(`/users/${e}/static-qr`),getVoucherInstances:(e,t)=>a.get(`/users/${e}/voucher-instances`,{params:t?{status:t}:void 0})},l={getAll:()=>a.get("/vouchers"),getAllAdmin:()=>a.get("/vouchers/all"),getOne:e=>a.get(`/vouchers/${e}`),create:e=>a.post("/vouchers",e),update:(e,t)=>a.patch(`/vouchers/${e}`,t),delete:e=>a.delete(`/vouchers/${e}`),redeem:(e,t)=>a.post(`/vouchers/${e}/redeem`,{user_id:t}),getInstances:(e,t)=>a.get(`/vouchers/instances/${e}`,{params:{status:t}})},d={earnPoints:(e,t,s)=>a.post("/transactions/earn",{user_id:e,amount:t,outlet:s}),redeemVoucher:(e,t,s)=>a.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:s}),getAll:e=>a.get("/transactions",{params:e})},o={getAll:e=>a.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>a.get("/announcements/all"),getById:e=>a.get(`/announcements/${e}`),create:e=>a.post("/announcements",e),update:(e,t)=>a.patch(`/announcements/${e}`,t),delete:e=>a.delete(`/announcements/${e}`)},c={getCredits:()=>a.get("/investors/credits"),getOutletCredits:e=>a.get(`/investors/credits/outlet/${e}`),getTransactions:e=>a.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>a.post(`/investors/admin/${e}/outlet-credits`,t),allocateGroupCredits:(e,t)=>a.post(`/investors/admin/${e}/group-credits`,t),adjustCredits:(e,t)=>a.patch(`/investors/admin/${e}/credits/adjust`,t),getExpiringCredits:e=>a.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},x={getBudget:()=>a.get("/media/budget"),getTransactions:e=>a.get("/media/transactions",{params:e}),setBudget:(e,t)=>a.post(`/media/admin/${e}/budget`,t),adjustBudget:(e,t)=>a.patch(`/media/admin/${e}/budget/adjust`,t),getExpiringBudgets:e=>a.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>a.get("/media/admin/usage-report")},p={getAll:()=>a.get("/settings"),getOne:e=>a.get(`/settings/${e}`),update:(e,t)=>a.put(`/settings/${e}`,{value:t}),bulkUpdate:e=>a.put("/settings",{settings:e}),create:e=>a.post("/settings",e)},u={getVapidKey:()=>a.get("/notifications/vapid-public-key"),subscribe:e=>a.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>a.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>a.get("/notifications/status"),getPreferences:()=>a.get("/notifications/preferences"),updatePreferences:e=>a.patch("/notifications/preferences",{preferences:e}),sendTest:()=>a.post("/notifications/test"),getHistory:e=>a.get("/notifications/history",{params:e}),adminSend:e=>a.post("/notifications/admin/send",e),adminBroadcast:e=>a.post("/notifications/admin/broadcast",e),adminStats:()=>a.get("/notifications/admin/stats"),adminProcessQueue:()=>a.post("/notifications/admin/process-queue")},g={getMyCode:()=>a.get("/referrals/my-code"),getMyReferrals:()=>a.get("/referrals/my-referrals"),validateCode:e=>a.get(`/referrals/validate/${e}`),applyCode:e=>a.post("/referrals/apply",e),getAdminStats:()=>a.get("/referrals/admin/stats")},m={getAll:()=>a.get("/pos/keys"),create:e=>a.post("/pos/keys",e),revoke:e=>a.delete(`/pos/keys/${e}`),getLogs:(e,t)=>a.get(`/pos/keys/${e}/logs`,{params:t}),getStats:()=>a.get("/pos/keys/stats")}},59734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},37358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},17069:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},82457:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/root/Loyalty/frontend/app/investor/dashboard/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[5380,4464,5814],()=>s(98711));module.exports=a})();