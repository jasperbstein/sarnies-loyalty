(()=>{var e={};e.id=9458,e.ids=[9458],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},81824:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>x,tree:()=>o}),r(95520),r(95478),r(26083),r(96560);var s=r(23191),a=r(88716),n=r(48001),l=r(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let o=["",{children:["admin",{children:["announcements",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,95520)),"/root/Loyalty/frontend/app/admin/announcements/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],d=["/root/Loyalty/frontend/app/admin/announcements/page.tsx"],c="/admin/announcements/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/announcements/page",pathname:"/admin/announcements",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},54710:(e,t,r)=>{Promise.resolve().then(r.bind(r,21949))},21949:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var s=r(10326),a=r(17577),n=r(36143),l=r(83855),i=r(88307),o=r(52679);let d=(0,r(76557).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var c=r(12714),u=r(85206),x=r(98091),p=r(6824),m=r(55358),h=r.n(m),g=r(42897),b=r(94019),f=r(2179),y=r(87888),j=r(24061),v=r(37358),N=r(31215);function w({announcement:e,onSubmit:t,onCancel:r,isSubmitting:n}){let[l,i]=(0,a.useState)({title:e?.title||"",description:e?.description||"",announcement_type:e?.announcement_type||"news",image_url:e?.image_url||"",cta_text:e?.cta_text||"",cta_link:e?.cta_link||"",is_active:e?.is_active??!0,display_order:e?.display_order||0,target_user_types:e?.target_user_types||["customer","employee"],start_date:e?.start_date?e.start_date.split("T")[0]:"",end_date:e?.end_date?e.end_date.split("T")[0]:""}),[d,c]=(0,a.useState)({}),[u,x]=(0,a.useState)({}),p=(e,t)=>{switch(e){case"title":if(!t||0===t.trim().length)return"Title is required";if(t.length<3)return"Title must be at least 3 characters";if(t.length>200)return"Title must be less than 200 characters";break;case"display_order":if(""!==t&&t<0)return"Display order must be non-negative"}return""},m=(e,t)=>{if(i({...l,[e]:t}),u[e]){let r=p(e,t);c({...d,[e]:r})}},h=e=>{x({...u,[e]:!0});let t=p(e,l[e]);c({...d,[e]:t})},w=l.title.length>=3;return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/40 backdrop-blur-sm flex items-start justify-center p-6 animate-in fade-in duration-200",children:s.jsx("div",{className:"w-full max-w-2xl my-8 animate-in slide-in-from-bottom-4 duration-300",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-border-subtle overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border-subtle bg-gradient-to-b from-background-subtle to-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500 flex items-center justify-center shadow-sm",children:s.jsx(o.Z,{size:20,className:"text-white"})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"font-display text-display-md text-text-primary tracking-tight",children:e?"Edit Announcement":"Create Announcement"}),s.jsx("p",{className:"font-ui text-ui-xs text-text-secondary mt-0.5",children:e?"Update announcement details":"Share news with your users"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white rounded-lg border border-border-subtle shadow-sm",children:[s.jsx("span",{className:"font-ui text-ui-xs text-text-secondary",children:"Status"}),s.jsx("button",{type:"button",onClick:()=>i({...l,is_active:!l.is_active}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-all duration-200 ${l.is_active?"bg-success-500":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform duration-200 shadow-sm ${l.is_active?"translate-x-4":"translate-x-0.5"}`})}),s.jsx("span",{className:`font-ui text-ui-xs font-semibold ${l.is_active?"text-success-600":"text-text-tertiary"}`,children:l.is_active?"Active":"Draft"})]}),s.jsx("button",{type:"button",onClick:r,className:"p-2 hover:bg-background-hover rounded-lg transition-colors group",children:s.jsx(b.Z,{size:18,className:"text-text-secondary group-hover:text-text-primary transition-colors"})})]})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(l)},className:"p-5 space-y-5 max-h-[calc(100vh-10rem)] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center",children:s.jsx(o.Z,{size:16,className:"text-white",strokeWidth:2.5})}),s.jsx("h3",{className:"font-display text-[15px] font-bold text-text-primary leading-none",children:"Basic Information"})]}),(0,s.jsxs)("div",{className:"space-y-3 pl-9",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center justify-between font-ui text-[12px] font-semibold text-text-primary mb-1.5 leading-tight",children:[(0,s.jsxs)("span",{children:["Title ",s.jsx("span",{className:"text-danger-500",children:"*"})]}),u.title&&!d.title&&l.title&&(0,s.jsxs)("span",{className:"text-[11px] text-success-600 flex items-center gap-1 leading-none",children:[s.jsx(f.Z,{size:12,strokeWidth:2.5})," Looks great"]})]}),s.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 transition-all leading-tight ${d.title&&u.title?"border-danger-500 focus:ring-danger-500/20 focus:border-danger-500":"border-border-subtle focus:ring-purple-500/20 focus:border-purple-500"}`,value:l.title,onChange:e=>m("title",e.target.value),onBlur:()=>h("title"),placeholder:"e.g., New Menu Items Available",required:!0}),d.title&&u.title&&(0,s.jsxs)("p",{className:"font-ui text-[11px] text-danger-600 mt-1 flex items-center gap-1 leading-tight",children:[s.jsx(y.Z,{size:11,strokeWidth:2.5})," ",d.title]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:"Description"}),s.jsx("textarea",{className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-purple-500/20 focus:border-purple-500 transition-all leading-tight resize-none",rows:3,value:l.description,onChange:e=>m("description",e.target.value),placeholder:"Describe the announcement..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:"Type"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary focus:outline-none focus:ring-1 focus:ring-purple-500/20 focus:border-purple-500 transition-all bg-white leading-tight",value:l.announcement_type,onChange:e=>m("announcement_type",e.target.value),children:[s.jsx("option",{value:"news",children:"News"}),s.jsx("option",{value:"promotion",children:"Promotion"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"alert",children:"Alert"}),s.jsx("option",{value:"update",children:"Update"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:"Display Order"}),s.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-purple-500/20 focus:border-purple-500 transition-all leading-tight",value:l.display_order,onChange:e=>m("display_order",e.target.value),placeholder:"0"}),s.jsx("p",{className:"font-ui text-[10px] text-text-tertiary mt-1 leading-tight",children:"Lower numbers appear first"})]})]}),s.jsx("div",{children:s.jsx(g.Z,{label:"Announcement Image",value:l.image_url,onChange:e=>m("image_url",e),onRemove:()=>m("image_url","")})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:s.jsx(j.Z,{size:16,className:"text-white",strokeWidth:2.5})}),s.jsx("h3",{className:"font-display text-[15px] font-bold text-text-primary leading-none",children:"Call to Action"}),s.jsx("span",{className:"font-ui text-[11px] text-text-tertiary",children:"(optional)"})]}),s.jsx("div",{className:"space-y-3 pl-9",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:"Button Text"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-purple-500/20 focus:border-purple-500 transition-all leading-tight",value:l.cta_text,onChange:e=>m("cta_text",e.target.value),placeholder:"Learn More"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:"Button Link"}),s.jsx("input",{type:"url",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[13px] text-text-primary placeholder-text-secondary focus:outline-none focus:ring-1 focus:ring-purple-500/20 focus:border-purple-500 transition-all leading-tight",value:l.cta_link,onChange:e=>m("cta_link",e.target.value),placeholder:"https://..."})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center",children:s.jsx(v.Z,{size:16,className:"text-white",strokeWidth:2.5})}),s.jsx("h3",{className:"font-display text-[15px] font-bold text-text-primary leading-none",children:"Targeting & Schedule"})]}),(0,s.jsxs)("div",{className:"space-y-3 pl-9",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block font-ui text-[12px] font-semibold text-text-primary mb-1.5 leading-tight",children:"Who can see this?"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{value:"customer",label:"Customers"},{value:"employee",label:"Staff"},{value:"investor",label:"Investors"},{value:"media",label:"Media"}].map(e=>{let t=l.target_user_types.includes(e.value);return s.jsx("button",{type:"button",onClick:()=>{t?m("target_user_types",l.target_user_types.filter(t=>t!==e.value)):m("target_user_types",[...l.target_user_types,e.value])},className:`px-2 py-2.5 rounded-lg border transition-all font-ui text-[11px] font-semibold ${t?"border-purple-500 bg-purple-50 text-purple-700":"border-border-subtle bg-white text-text-secondary hover:border-purple-300"}`,children:e.label},e.value)})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:["Start Date ",s.jsx("span",{className:"font-ui text-[11px] text-text-tertiary",children:"(optional)"})]}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[12px] text-text-primary focus:outline-none focus:ring-1 focus:ring-purple-500/20 focus:border-purple-500 transition-all leading-tight",value:l.start_date,onChange:e=>m("start_date",e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:["End Date ",s.jsx("span",{className:"font-ui text-[11px] text-text-tertiary",children:"(optional)"})]}),s.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-border-subtle rounded-lg font-ui text-[12px] text-text-primary focus:outline-none focus:ring-1 focus:ring-purple-500/20 focus:border-purple-500 transition-all leading-tight",value:l.end_date,onChange:e=>m("end_date",e.target.value)})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-border-subtle -mx-5 px-5 pb-1 mt-5",children:[s.jsx("div",{className:"flex items-center gap-1.5",children:w?(0,s.jsxs)(s.Fragment,{children:[s.jsx(f.Z,{size:14,strokeWidth:2.5,className:"text-success-500"}),s.jsx("span",{className:"font-ui text-[11px] text-success-600 font-semibold leading-tight",children:"Ready"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(y.Z,{size:14,strokeWidth:2,className:"text-warning-500"}),s.jsx("span",{className:"font-ui text-[11px] text-text-secondary leading-tight",children:"Required fields missing"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:r,disabled:n,className:"px-4 py-2 font-ui text-[13px] font-semibold text-text-secondary hover:text-text-primary hover:bg-background-hover rounded-lg transition-all disabled:opacity-50 leading-none",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!w||n,className:"px-4 py-2 bg-purple-600 text-white font-ui text-[13px] font-bold rounded-lg hover:bg-purple-700 transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 leading-none",children:n?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"w-3.5 h-3.5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(N.Z,{size:14,strokeWidth:2}),e?"Update":"Create"]})})]})]})]})]})})})}function _(){let[e,t]=(0,a.useState)([]),[r,m]=(0,a.useState)(!0),[g,b]=(0,a.useState)(""),[f,y]=(0,a.useState)("all"),[j,v]=(0,a.useState)("all"),[N,_]=(0,a.useState)(!1),[k,Z]=(0,a.useState)(!1),[C,S]=(0,a.useState)(null),[P,z]=(0,a.useState)(!1),A=async()=>{m(!0);try{let e=await p.oZ.getAllAdmin();t(e.data||[])}catch(e){h().error("Failed to load announcements")}finally{m(!1)}},q=async e=>{z(!0);try{await p.oZ.create(e),h().success("Announcement created successfully"),_(!1),A()}catch(e){h().error(e.response?.data?.error||"Failed to create announcement")}finally{z(!1)}},D=e=>{S(e),Z(!0)},M=async e=>{if(C){z(!0);try{await p.oZ.update(C.id,e),h().success("Announcement updated successfully"),Z(!1),S(null),A()}catch(e){h().error(e.response?.data?.error||"Failed to update announcement")}finally{z(!1)}}},L=async e=>{try{await p.oZ.update(e.id,{is_active:!e.is_active}),h().success(`Announcement ${e.is_active?"deactivated":"activated"}`),A()}catch(e){h().error(e.response?.data?.error||"Failed to update announcement")}},T=async e=>{if(confirm("Are you sure you want to delete this announcement? This action cannot be undone."))try{await p.oZ.delete(e),h().success("Announcement deleted successfully"),A()}catch(e){h().error(e.response?.data?.error||"Failed to delete announcement")}},E=(0,a.useMemo)(()=>e.filter(e=>{let t=e.title.toLowerCase().includes(g.toLowerCase())||e.description&&e.description.toLowerCase().includes(g.toLowerCase()),r="all"===f||e.announcement_type===f,s="all"===j||"active"===j&&e.is_active||"inactive"===j&&!e.is_active;return t&&r&&s}),[e,g,f,j]),F=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"â€”",I=e=>({news:"bg-blue-100 text-blue-700",promotion:"bg-green-100 text-green-700",event:"bg-purple-100 text-purple-700",alert:"bg-red-100 text-red-700",update:"bg-orange-100 text-orange-700"})[e]||"bg-gray-100 text-gray-700";return(0,s.jsxs)(n.Z,{children:[s.jsx("div",{className:"min-h-screen bg-neutral-50",children:(0,s.jsxs)("div",{className:"max-w-[1600px] mx-auto px-4 py-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-[28px] font-semibold text-neutral-900",children:"Announcements"}),(0,s.jsxs)("p",{className:"text-[14px] text-neutral-500",children:[e.length," total announcements"]})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>_(!0),className:"h-[40px] px-4 rounded-lg border border-neutral-900 bg-neutral-900 text-white text-[14px] font-medium flex items-center gap-2 hover:bg-neutral-800 transition-colors",children:[s.jsx(l.Z,{size:18}),"Create Announcement"]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-neutral-200 p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[s.jsx(i.Z,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400"}),s.jsx("input",{type:"text",placeholder:"Search announcements...",className:"w-full pl-10 pr-4 py-2 border border-neutral-200 rounded-lg text-[14px] focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",value:g,onChange:e=>b(e.target.value)})]}),(0,s.jsxs)("select",{className:"px-3 py-2 border border-neutral-200 rounded-lg text-[14px] focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 bg-white",value:f,onChange:e=>y(e.target.value),children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"news",children:"News"}),s.jsx("option",{value:"promotion",children:"Promotion"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"alert",children:"Alert"}),s.jsx("option",{value:"update",children:"Update"})]}),(0,s.jsxs)("select",{className:"px-3 py-2 border border-neutral-200 rounded-lg text-[14px] focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 bg-white",value:j,onChange:e=>v(e.target.value),children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-neutral-200 overflow-hidden",children:r?(0,s.jsxs)("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-neutral-200 border-t-neutral-900 rounded-full animate-spin mx-auto"}),s.jsx("p",{className:"mt-4 text-[14px] text-neutral-500",children:"Loading announcements..."})]}):0===E.length?(0,s.jsxs)("div",{className:"p-12 text-center",children:[s.jsx(o.Z,{size:48,className:"mx-auto text-neutral-300 mb-4"}),s.jsx("h3",{className:"text-[16px] font-semibold text-neutral-900 mb-1",children:"No announcements found"}),s.jsx("p",{className:"text-[14px] text-neutral-500",children:g||"all"!==f||"all"!==j?"Try adjusting your filters":"Create your first announcement to get started"})]}):s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-neutral-200 bg-neutral-50",children:[s.jsx("th",{className:"px-4 py-3 text-left text-[12px] font-semibold text-neutral-600 uppercase tracking-wide",children:"Title"}),s.jsx("th",{className:"px-4 py-3 text-left text-[12px] font-semibold text-neutral-600 uppercase tracking-wide",children:"Type"}),s.jsx("th",{className:"px-4 py-3 text-left text-[12px] font-semibold text-neutral-600 uppercase tracking-wide",children:"Target"}),s.jsx("th",{className:"px-4 py-3 text-left text-[12px] font-semibold text-neutral-600 uppercase tracking-wide",children:"Start Date"}),s.jsx("th",{className:"px-4 py-3 text-left text-[12px] font-semibold text-neutral-600 uppercase tracking-wide",children:"End Date"}),s.jsx("th",{className:"px-4 py-3 text-left text-[12px] font-semibold text-neutral-600 uppercase tracking-wide",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-right text-[12px] font-semibold text-neutral-600 uppercase tracking-wide",children:"Actions"})]})}),s.jsx("tbody",{children:E.map(e=>(0,s.jsxs)("tr",{className:"border-b border-neutral-100 hover:bg-neutral-50 transition-colors",children:[s.jsx("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[e.image_url&&s.jsx("img",{src:e.image_url,alt:e.title,className:"w-12 h-12 rounded-lg object-cover flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-[14px] font-medium text-neutral-900 truncate",children:e.title}),e.description&&s.jsx("p",{className:"text-[12px] text-neutral-500 truncate mt-0.5",children:e.description})]})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`inline-block px-2 py-1 rounded-md text-[11px] font-semibold uppercase ${I(e.announcement_type)}`,children:e.announcement_type})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:(e.target_user_types||[]).map(e=>s.jsx("span",{className:"px-1.5 py-0.5 bg-neutral-100 text-neutral-600 rounded text-[10px] font-medium",children:e},e))})}),s.jsx("td",{className:"px-4 py-3 text-[13px] text-neutral-600",children:F(e.start_date)}),s.jsx("td",{className:"px-4 py-3 text-[13px] text-neutral-600",children:F(e.end_date)}),s.jsx("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${e.is_active?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{className:`text-[13px] font-medium ${e.is_active?"text-green-600":"text-gray-500"}`,children:e.is_active?"Active":"Inactive"})]})}),s.jsx("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>L(e),className:"p-1.5 hover:bg-neutral-100 rounded-lg transition-colors group",title:e.is_active?"Deactivate":"Activate",children:e.is_active?s.jsx(d,{size:16,className:"text-neutral-400 group-hover:text-neutral-600"}):s.jsx(c.Z,{size:16,className:"text-neutral-400 group-hover:text-green-600"})}),s.jsx("button",{onClick:()=>D(e),className:"p-1.5 hover:bg-neutral-100 rounded-lg transition-colors group",title:"Edit",children:s.jsx(u.Z,{size:16,className:"text-neutral-400 group-hover:text-blue-600"})}),s.jsx("button",{onClick:()=>T(e.id),className:"p-1.5 hover:bg-neutral-100 rounded-lg transition-colors group",title:"Delete",children:s.jsx(x.Z,{size:16,className:"text-neutral-400 group-hover:text-red-600"})})]})})]},e.id))})]})})})]})}),N&&s.jsx(w,{onSubmit:q,onCancel:()=>_(!1),isSubmitting:P}),k&&C&&s.jsx(w,{announcement:C,onSubmit:M,onCancel:()=>{Z(!1),S(null)},isSubmitting:P})]})}},42897:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(10326),a=r(17577),n=r(94019),l=r(75290),i=r(63685),o=r(55358),d=r.n(o),c=r(6824);function u({value:e,onChange:t,onRemove:r,label:o="Image",className:u=""}){let[x,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),g=(0,a.useRef)(null),b=async e=>{if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type)){d().error("Invalid file type. Only JPG, PNG, WEBP, and GIF are allowed.");return}if(e.size>5242880){d().error("File size must be less than 5MB");return}p(!0);try{let r=new FormData;r.append("image",e);let s=await c.ZP.post("/upload",r,{headers:{"Content-Type":"multipart/form-data"}});t(s.data.url),d().success("Image uploaded successfully")}catch(e){d().error(e.response?.data?.error||"Failed to upload image")}finally{p(!1)}};return(0,s.jsxs)("div",{className:u,children:[o&&s.jsx("label",{className:"block font-ui text-[12px] font-medium text-text-primary mb-1.5 leading-tight",children:o}),s.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files;t&&t[0]&&b(t[0])},className:"hidden"}),e?(0,s.jsxs)("div",{className:"relative group",children:[s.jsx("img",{src:e,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border border-neutral-300"}),s.jsx("button",{type:"button",onClick:()=>{r?r():t("")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Remove image",children:s.jsx(n.Z,{size:16})})]}):s.jsx("div",{onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),h(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),h(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1);let t=e.dataTransfer.files;t&&t[0]&&b(t[0])},onClick:()=>!x&&g.current?.click(),className:`
            relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
            transition-colors
            ${m?"border-neutral-500 bg-neutral-50":"border-neutral-300 hover:border-neutral-400 hover:bg-neutral-50"}
            ${x?"cursor-not-allowed opacity-60":""}
          `,children:x?(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[s.jsx(l.Z,{size:40,className:"text-neutral-400 animate-spin"}),s.jsx("p",{className:"text-[14px] text-neutral-600 font-medium",children:"Uploading..."})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-neutral-100 flex items-center justify-center",children:s.jsx(i.Z,{size:24,className:"text-neutral-500"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-[14px] text-neutral-700 font-medium mb-1",children:"Click to upload or drag and drop"}),s.jsx("p",{className:"text-[12px] text-neutral-500",children:"JPG, PNG, WEBP, or GIF (max 5MB)"})]})]})})]})}},37358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2179:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},12714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},75290:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},85206:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},83855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},98091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63685:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},95520:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/root/Loyalty/frontend/app/admin/announcements/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[5380,2696,4464,5814,3828],()=>r(81824));module.exports=s})();