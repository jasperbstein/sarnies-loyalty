(()=>{var e={};e.id=6140,e.ids=[6140],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},40906:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.Z,__next_app__:()=>x,originalPathname:()=>o,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(82740),s(95478),s(26083),s(96560);var r=s(23191),a=s(88716),l=s(48001),i=s(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(t,n);let d=["",{children:["admin",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,82740)),"/root/Loyalty/frontend/app/admin/settings/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],c=["/root/Loyalty/frontend/app/admin/settings/page.tsx"],o="/admin/settings/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/settings/page",pathname:"/admin/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},32849:(e,t,s)=>{Promise.resolve().then(s.bind(s,85177))},85177:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(10326),a=s(17577),l=s(36143),i=s(21551),n=s(97862),d=s(6824),c=s(88378),o=s(85206);let x=(0,s(76557).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var u=s(24061),m=s(95964),p=s(94019),g=s(31215),h=s(55358),y=s.n(h);function b(){let[e,t]=(0,a.useState)({}),[s,h]=(0,a.useState)(!0),[b,j]=(0,a.useState)(null),[f,v]=(0,a.useState)({isOpen:!1,key:"",currentValue:"",type:"",description:""}),[N,w]=(0,a.useState)(""),[k,C]=(0,a.useState)(!1),q=async()=>{h(!0);try{let e=await d.w2.getAll();t(e.data)}catch(e){y().error("Failed to load settings")}finally{h(!1)}},Z=(e,t)=>{if(!t.editable){y().error("This setting is not editable");return}v({isOpen:!0,key:e,currentValue:t.value,type:t.type,description:t.description}),w(t.value)},_=()=>{v({isOpen:!1,key:"",currentValue:"",type:"",description:""}),w("")},z=async()=>{C(!0);try{await d.w2.update(f.key,N),y().success("Setting updated successfully"),await q(),_()}catch(e){y().error(e.response?.data?.error||"Failed to update setting")}finally{C(!1)}},P=(e,t)=>"boolean"===t?r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold ${e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e?"Enabled":"Disabled"}):"color"===t?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 rounded border-2 border-gray-300",style:{backgroundColor:e}}),r.jsx("span",{className:"font-mono text-sm text-gray-700",children:e})]}):"number"===t?r.jsx("span",{className:"font-semibold text-gray-900",children:e}):r.jsx("span",{className:"text-gray-700",children:e||"(not set)"}),S=["points_per_100_thb"],E=["qr_validity_minutes","otp_validity_minutes"];return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)("div",{className:"px-6 py-6 space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"font-display text-display-xl text-neutral-900 tracking-tight",children:"System Settings"}),r.jsx("p",{className:"font-ui text-label text-neutral-500 mt-1",children:"Configure loyalty program parameters and system behavior"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-neutral-100",children:[r.jsx("div",{className:"px-6 py-4 border-b border-neutral-100 bg-neutral-50",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-brand-primary-light rounded-lg flex items-center justify-center",children:r.jsx(c.Z,{size:20,className:"text-[#8B6914]"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"font-ui text-section font-semibold text-neutral-900",children:"Points Configuration"}),r.jsx("p",{className:"font-ui text-label text-neutral-500",children:"Loyalty points earning rules"})]})]})}),r.jsx("div",{className:"p-6",children:s?r.jsx("div",{className:"space-y-3",children:r.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse"})}):r.jsx("div",{className:"space-y-4",children:S.map(t=>{let s=e[t];return s?(0,r.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-neutral-100 last:border-0",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-ui text-body font-semibold text-neutral-900",children:t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),r.jsx("p",{className:"font-ui text-label text-neutral-500 mt-1",children:s.description})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"text-right",children:P(s.value,s.type)}),s.editable&&r.jsx(n.Z,{variant:"secondary",size:"sm",icon:r.jsx(o.Z,{size:16}),onClick:()=>Z(t,s),children:"Edit"})]})]},t):null})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-neutral-100",children:[r.jsx("div",{className:"px-6 py-4 border-b border-neutral-100 bg-neutral-50",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-[#E8F3EC] rounded-lg flex items-center justify-center",children:r.jsx(x,{size:20,className:"text-[#3CB179]"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"font-ui text-section font-semibold text-neutral-900",children:"Security Settings"}),r.jsx("p",{className:"font-ui text-label text-neutral-500",children:"QR codes and authentication"})]})]})}),r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-8 text-neutral-500",children:[r.jsx("p",{className:"font-ui text-body",children:"Security settings will be configurable here"}),r.jsx("p",{className:"font-ui text-label mt-2",children:"(QR validity, OTP validity, etc.)"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-neutral-100",children:[r.jsx("div",{className:"px-6 py-4 border-b border-neutral-100 bg-neutral-50",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-[#D7E7FF] rounded-lg flex items-center justify-center",children:r.jsx(x,{size:20,className:"text-[#3788FF]"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"font-ui text-section font-semibold text-neutral-900",children:"System Information"}),r.jsx("p",{className:"font-ui text-label text-neutral-500",children:"Platform statistics and metadata"})]})]})}),r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"text-center p-6 bg-blue-50 rounded-lg",children:[r.jsx(u.Z,{size:32,className:"mx-auto text-blue-600 mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:b?.totalUsers||"-"})]}),(0,r.jsxs)("div",{className:"text-center p-6 bg-green-50 rounded-lg",children:[r.jsx(m.Z,{size:32,className:"mx-auto text-green-600 mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Transactions"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:b?.totalTransactions||"-"})]}),(0,r.jsxs)("div",{className:"text-center p-6 bg-purple-50 rounded-lg",children:[r.jsx(c.Z,{size:32,className:"mx-auto text-purple-600 mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:"App Version"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:"v1.0.0"})]})]})})]}),(0,r.jsxs)("details",{className:"bg-white rounded-xl shadow-card border border-neutral-100",children:[r.jsx("summary",{className:"px-6 py-4 cursor-pointer hover:bg-neutral-50 font-ui text-body font-semibold text-neutral-900 transition-all duration-100",children:"Advanced Settings (All)"}),r.jsx("div",{className:"px-6 py-4 border-t border-neutral-100",children:s?r.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>r.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse"},e))}):r.jsx("div",{className:"space-y-4",children:Object.entries(e).filter(([e])=>!S.includes(e)&&!E.includes(e)).map(([e,t])=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900 font-mono text-sm",children:e}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"text-right",children:P(t.value,t.type)}),t.editable&&r.jsx(n.Z,{variant:"secondary",size:"sm",icon:r.jsx(o.Z,{size:16}),onClick:()=>Z(e,t),children:"Edit"})]})]},e))})})]})]}),r.jsx(i.Z,{isOpen:f.isOpen,onClose:_,title:"Edit Setting",size:"md",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Setting Key"}),r.jsx("p",{className:"text-sm font-mono bg-gray-100 px-3 py-2 rounded-lg text-gray-700",children:f.key})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Description"}),r.jsx("p",{className:"text-sm text-gray-600",children:f.description})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Current Value"}),r.jsx("p",{className:"text-sm bg-gray-100 px-3 py-2 rounded-lg text-gray-700",children:String(f.currentValue)})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"New Value"}),(()=>{switch(f.type){case"number":return r.jsx("input",{type:"number",className:"input",value:N,onChange:e=>w(parseFloat(e.target.value)),step:"any"});case"boolean":return(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>w(!0),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all ${!0===N?"bg-green-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Enabled"}),r.jsx("button",{onClick:()=>w(!1),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all ${!1===N?"bg-red-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Disabled"})]});case"color":return(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("input",{type:"color",className:"w-full h-12 rounded-lg cursor-pointer",value:N,onChange:e=>w(e.target.value)}),r.jsx("input",{type:"text",className:"input font-mono",value:N,onChange:e=>w(e.target.value),placeholder:"#000000"})]});default:return r.jsx("input",{type:"text",className:"input",value:N,onChange:e=>w(e.target.value)})}})()]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[r.jsx(n.Z,{variant:"secondary",onClick:_,className:"flex-1",icon:r.jsx(p.Z,{size:16}),disabled:k,children:"Cancel"}),r.jsx(n.Z,{variant:"primary",onClick:z,className:"flex-1",icon:r.jsx(g.Z,{size:16}),loading:k,children:"Save Changes"})]})]})})]})}},97862:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(10326);function a({variant:e="primary",size:t="md",children:s,icon:a,loading:l=!1,className:i="",disabled:n,...d}){return(0,r.jsxs)("button",{className:`inline-flex items-center justify-center font-medium transition-all duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm",secondary:"bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-50 focus:ring-gray-500",tertiary:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm"}[e]} ${{sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2.5 text-sm gap-2",lg:"px-6 py-3 text-base gap-2"}[t]} ${i}`,disabled:n||l,...d,children:[l&&(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a&&!l&&a,s]})}},21551:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(10326),a=s(94019);function l({isOpen:e,onClose:t,title:s,children:l,size:i="md"}){return e?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,r.jsxs)("div",{className:`relative bg-white rounded-xl shadow-xl ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[i]} w-full`,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),r.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(a.Z,{size:20})})]}),r.jsx("div",{className:"px-6 py-4",children:l})]})})]}):null}s(17577)},85206:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},88378:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},82740:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/root/Loyalty/frontend/app/admin/settings/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[5380,2696,4464,5814,3828],()=>s(40906));module.exports=r})();