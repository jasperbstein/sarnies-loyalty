(()=>{var e={};e.id=3705,e.ids=[3705],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},3784:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.Z,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(13745),s(95478),s(26083),s(96560);var a=s(23191),i=s(88716),n=s(48001),l=s(95231),r={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(r[e]=()=>l[e]);s.d(t,r);let o=["",{children:["admin",{children:["companies",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,13745)),"/root/Loyalty/frontend/app/admin/companies/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],c=["/root/Loyalty/frontend/app/admin/companies/page.tsx"],d="/admin/companies/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/companies/page",pathname:"/admin/companies",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},620:(e,t,s)=>{Promise.resolve().then(s.bind(s,52644))},52644:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(10326),i=s(17577),n=s(36143),l=s(83855),r=s(94019),o=s(59734);let c=(0,s(76557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);var d=s(24061),m=s(98091),p=s(63685),u=s(55358),x=s.n(u),h=s(6824);function g(){let[e,t]=(0,i.useState)([]),[s,u]=(0,i.useState)(!0),[g,y]=(0,i.useState)(!1),[b,f]=(0,i.useState)(null),[j,v]=(0,i.useState)(null),[N,k]=(0,i.useState)([]),[_,w]=(0,i.useState)(!1),[C,Z]=(0,i.useState)(!1),[E,P]=(0,i.useState)(""),[M,S]=(0,i.useState)({name:"",slug:"",description:"",discount_percentage:"0",contact_email:"",contact_phone:"",email_domain:"",allow_employee_self_registration:!1,is_active:!0}),[$,q]=(0,i.useState)({employee_email:"",employee_id:"",full_name:"",department:""}),[A,F]=(0,i.useState)(""),B=async()=>{try{let e=await h.ZP.get("/companies",{params:E?{search:E}:{}});t(e.data)}catch(e){x().error("Failed to load companies")}finally{u(!1)}},z=async e=>{try{let t=await h.ZP.get(`/companies/${e}/employees`);k(t.data)}catch(e){x().error("Failed to load employees")}},L=async e=>{e.preventDefault();let t=parseInt(M.discount_percentage);if(t<0||t>100){x().error("Discount must be between 0 and 100");return}try{let e={name:M.name,slug:M.slug||M.name.toLowerCase().replace(/\s+/g,"-"),description:M.description||null,discount_percentage:t,contact_email:M.contact_email||null,contact_phone:M.contact_phone||null,email_domain:M.email_domain||null,allow_employee_self_registration:M.allow_employee_self_registration,is_active:M.is_active};b?(await h.ZP.put(`/companies/${b.id}`,e),x().success("Company updated successfully")):(await h.ZP.post("/companies",e),x().success("Company created successfully")),y(!1),f(null),V(),B()}catch(e){x().error(e.response?.data?.error||"Failed to save company")}},D=async e=>{if(e.preventDefault(),j)try{let e={employee_email:$.employee_email.toLowerCase(),employee_id:$.employee_id||null,full_name:$.full_name||null,department:$.department||null};await h.ZP.post(`/companies/${j.id}/employees`,e),x().success("Employee added successfully"),w(!1),T(),z(j.id),B()}catch(e){x().error(e.response?.data?.error||"Failed to add employee")}},U=async()=>{if(j)try{let e=A.split("\n").filter(e=>e.trim()).map(e=>{let[t,s,a,i]=e.split(",").map(e=>e.trim());return{employee_email:t.toLowerCase(),employee_id:s||null,full_name:a||null,department:i||null}}),t=await h.ZP.post(`/companies/${j.id}/employees/bulk`,{employees:e});x().success(`Uploaded ${t.data.inserted} employees (${t.data.failed} failed)`),Z(!1),F(""),z(j.id),B()}catch(e){x().error(e.response?.data?.error||"Failed to bulk upload")}},H=async e=>{if(j&&confirm("Are you sure you want to remove this employee?"))try{await h.ZP.delete(`/companies/${j.id}/employees/${e}`),x().success("Employee removed"),z(j.id),B()}catch(e){x().error("Failed to remove employee")}},O=async e=>{if(confirm("Are you sure you want to delete this company? This will also remove all associated employees."))try{await h.ZP.delete(`/companies/${e}`),x().success("Company deleted"),B()}catch(e){x().error("Failed to delete company")}},V=()=>{S({name:"",slug:"",description:"",discount_percentage:"0",contact_email:"",contact_phone:"",email_domain:"",allow_employee_self_registration:!1,is_active:!0})},T=()=>{q({employee_email:"",employee_id:"",full_name:"",department:""})},R=e=>{f(e),S({name:e.name,slug:e.slug,description:e.description||"",discount_percentage:e.discount_percentage.toString(),contact_email:e.contact_email||"",contact_phone:e.contact_phone||"",email_domain:e.email_domain||"",allow_employee_self_registration:e.allow_employee_self_registration,is_active:e.is_active}),y(!0)},I=e=>{v(e),z(e.id)};return a.jsx(n.Z,{children:a.jsx("div",{className:"space-y-6",children:j?a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{children:[a.jsx("button",{onClick:()=>{v(null),k([])},className:"text-blue-600 hover:text-blue-800 mb-4 flex items-center gap-2",children:"← Back to Companies"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:[j.name," - Employees"]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[j.discount_percentage,"% discount •"," ",N.length," employees"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>Z(!0),className:"btn btn-secondary flex items-center gap-2",children:[a.jsx(p.Z,{size:20}),"Bulk Upload"]}),(0,a.jsxs)("button",{onClick:()=>w(!0),className:"btn btn-primary flex items-center gap-2",children:[a.jsx(l.Z,{size:20}),"Add Employee"]})]})]}),_&&(0,a.jsxs)("div",{className:"card bg-blue-50 border border-blue-200 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:"Add Employee"}),a.jsx("button",{onClick:()=>{w(!1),T()},className:"text-gray-500 hover:text-gray-700",children:a.jsx(r.Z,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Email *"}),a.jsx("input",{type:"email",className:"input",value:$.employee_email,onChange:e=>q({...$,employee_email:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),a.jsx("input",{type:"text",className:"input",value:$.employee_id,onChange:e=>q({...$,employee_id:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",className:"input",value:$.full_name,onChange:e=>q({...$,full_name:e.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),a.jsx("input",{type:"text",className:"input",value:$.department,onChange:e=>q({...$,department:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Employee"}),a.jsx("button",{type:"button",onClick:()=>{w(!1),T()},className:"btn btn-secondary",children:"Cancel"})]})]})]}),C&&(0,a.jsxs)("div",{className:"card bg-yellow-50 border border-yellow-200 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:"Bulk Upload Employees"}),a.jsx("button",{onClick:()=>{Z(!1),F("")},className:"text-gray-500 hover:text-gray-700",children:a.jsx(r.Z,{size:20})})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Enter one employee per line in CSV format:",a.jsx("br",{}),a.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:"email, employee_id, full_name, department"})]}),a.jsx("textarea",{className:"input font-mono text-sm",rows:10,placeholder:"john@company.com, EMP001, John Doe, Engineering jane@company.com, EMP002, Jane Smith, Marketing",value:A,onChange:e=>F(e.target.value)}),(0,a.jsxs)("div",{className:"flex gap-3 mt-4",children:[a.jsx("button",{onClick:U,className:"btn btn-primary",children:"Upload Employees"}),a.jsx("button",{onClick:()=>{Z(!1),F("")},className:"btn btn-secondary",children:"Cancel"})]})]}),N.length>0?a.jsx("div",{className:"card overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Email"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Full Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Department"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{children:N.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 text-sm text-gray-800",children:e.employee_email}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.employee_id||"-"}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.full_name||"-"}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.department||"-"}),a.jsx("td",{className:"py-3 px-4",children:e.is_verified?a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"✓ Verified"}):a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Pending"})}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsx("button",{onClick:()=>H(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})})]},e.id))})]})}):(0,a.jsxs)("div",{className:"card text-center py-12",children:[a.jsx(d.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No employees yet"})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Companies"}),(0,a.jsxs)("button",{onClick:()=>{f(null),V(),y(!0)},className:"btn btn-primary flex items-center gap-2",children:[a.jsx(l.Z,{size:20}),"Create Company"]})]}),a.jsx("div",{children:a.jsx("input",{type:"text",placeholder:"Search companies...",className:"input max-w-md",value:E,onChange:e=>P(e.target.value),onKeyUp:e=>"Enter"===e.key&&B()})}),g&&(0,a.jsxs)("div",{className:"card bg-blue-50 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:b?"Edit Company":"Create New Company"}),a.jsx("button",{onClick:()=>{y(!1),f(null),V()},className:"text-gray-500 hover:text-gray-700",children:a.jsx(r.Z,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),a.jsx("input",{type:"text",className:"input",value:M.name,onChange:e=>S({...M,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug (URL-friendly name)"}),a.jsx("input",{type:"text",className:"input",placeholder:"auto-generated if empty",value:M.slug,onChange:e=>S({...M,slug:e.target.value})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{className:"input",rows:3,value:M.description,onChange:e=>S({...M,description:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Percentage (0-100) *"}),a.jsx("input",{type:"number",min:"0",max:"100",className:"input",value:M.discount_percentage,onChange:e=>S({...M,discount_percentage:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Domain (e.g., google.com)"}),a.jsx("input",{type:"text",className:"input",placeholder:"company.com",value:M.email_domain,onChange:e=>S({...M,email_domain:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),a.jsx("input",{type:"email",className:"input",value:M.contact_email,onChange:e=>S({...M,contact_email:e.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),a.jsx("input",{type:"tel",className:"input",value:M.contact_phone,onChange:e=>S({...M,contact_phone:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.allow_employee_self_registration,onChange:e=>S({...M,allow_employee_self_registration:e.target.checked})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Allow employee self-registration via email domain"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:M.is_active,onChange:e=>S({...M,is_active:e.target.checked})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",className:"btn btn-primary",children:b?"Update Company":"Create Company"}),a.jsx("button",{type:"button",onClick:()=>{y(!1),f(null),V()},className:"btn btn-secondary",children:"Cancel"})]})]})]}),s?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(e=>a.jsx("div",{className:"card h-48 bg-gray-100 animate-pulse"},e))}):e.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>a.jsx("div",{className:`card ${e.is_active?"":"opacity-60 bg-gray-50"}`,children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(o.Z,{size:28,className:"text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e.slug})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>R(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:a.jsx(c,{size:16})}),a.jsx("button",{onClick:()=>I(e),className:"p-2 text-green-600 hover:bg-green-50 rounded",title:"Manage Employees",children:a.jsx(d.Z,{size:16})}),a.jsx("button",{onClick:()=>O(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:a.jsx(m.Z,{size:16})})]})]}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[e.discount_percentage,"% discount"]}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[e.employee_count," employees"]}),e.email_domain&&(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:["@",e.email_domain]}),e.allow_employee_self_registration&&a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Self-registration"}),a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${e.is_active?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:e.is_active?"Active":"Inactive"})]})]})]})},e.id))}):(0,a.jsxs)("div",{className:"card text-center py-12",children:[a.jsx(o.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No companies yet"})]})]})})})}},36143:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var a=s(10326),i=s(35047),n=s(16205);let l=(0,s(76557).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var r=s(24061),o=s(98908),c=s(52679),d=s(95964),m=s(94019),p=s(90748),u=s(71810),x=s(17577);function h({children:e}){let t=(0,i.useRouter)(),s=(0,i.usePathname)(),{user:h,logout:g}=(0,n.t)(),[y,b]=(0,x.useState)(!1),f=[{icon:l,label:"Dashboard",path:"/admin/dashboard"},{icon:r.Z,label:"Users",path:"/admin/users"},{icon:o.Z,label:"Vouchers",path:"/admin/vouchers"},{icon:c.Z,label:"Announcements",path:"/admin/announcements"},{icon:d.Z,label:"Transactions",path:"/admin/transactions"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[a.jsx("header",{className:"lg:hidden bg-white border-b border-neutral-200 sticky top-0 z-30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-brand-primary rounded flex items-center justify-center text-white font-bold text-sm",children:"S"}),a.jsx("h1",{className:"font-ui text-body font-semibold text-neutral-900",children:"Sarnies Admin"})]}),a.jsx("button",{onClick:()=>b(!y),className:"p-2 hover:bg-neutral-50 rounded transition-all duration-150",children:y?a.jsx(m.Z,{size:20}):a.jsx(p.Z,{size:20})})]})}),(0,a.jsxs)("aside",{className:`fixed top-0 left-0 h-screen w-60 bg-white border-r border-[#E5E7EB] transition-transform duration-300 z-40 ${y?"translate-x-0":"-translate-x-full"} lg:translate-x-0 flex flex-col`,children:[a.jsx("div",{className:"pl-5 pt-6 pb-4 border-b border-[#E5E7EB]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg bg-brand-primary flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold text-white",children:"S"})}),a.jsx("span",{className:"font-ui text-base font-medium text-[#1B1B1B]",children:"Sarnies Admin"})]})}),a.jsx("div",{className:"pl-5 py-4 border-b border-[#E5E7EB]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 flex-shrink-0 rounded-full bg-[#F5F5F5] flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-semibold text-[#1B1B1B]",children:h?.name?.charAt(0)||"D"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-ui text-sm font-medium text-[#1B1B1B] truncate",title:h?.name||"Dev User",children:h?.name||"Dev User"}),a.jsx("p",{className:"font-ui text-xs text-[#6F6F6F]",children:"Administrator"})]})]})}),a.jsx("nav",{className:"flex-1 overflow-y-auto pl-5 py-4",children:a.jsx("div",{className:"space-y-1",children:f.map(e=>{let i=e.icon,n=s===e.path;return(0,a.jsxs)("button",{onClick:()=>{t.push(e.path),b(!1)},className:`w-full h-11 flex items-center gap-3 pr-3 rounded-lg font-ui text-sm font-medium transition-colors ${n?"bg-[#F5F5F5] text-[#1B1B1B]":"text-[#6F6F6F] hover:bg-[#F5F5F5] hover:text-[#1B1B1B]"}`,children:[a.jsx(i,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),a.jsx("span",{children:e.label})]},e.path)})})}),a.jsx("div",{className:"pl-5 pb-5 border-t border-[#E5E7EB] pt-4",children:(0,a.jsxs)("button",{onClick:()=>{g(),t.push("/login")},className:"w-full h-11 flex items-center gap-3 pr-3 text-[#6F6F6F] hover:bg-red-50 hover:text-red-600 rounded-lg font-ui text-sm font-medium transition-colors",children:[a.jsx(u.Z,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),a.jsx("span",{children:"Logout"})]})})]}),y&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>b(!1)}),a.jsx("main",{className:"lg:ml-60 min-h-screen bg-white",children:e})]})}},6824:(e,t,s)=>{"use strict";s.d(t,{L2:()=>o,Vj:()=>d,Z1:()=>x,ZP:()=>i,cC:()=>u,h3:()=>l,hO:()=>r,kv:()=>n,nN:()=>m,oZ:()=>c,w2:()=>p,xf:()=>h});let a=s(94464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use(e=>e),a.interceptors.response.use(e=>e,e=>{if(e.response?.status===401){let t=window.location.pathname.includes("/login"),s=e.config?.url?.includes("/auth/"),a=localStorage.getItem("auth-storage");t||s||!a||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)});let i=a,n={staffLogin:(e,t)=>a.post("/auth/login",{email:e,password:t}),sendOTP:e=>a.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>a.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>a.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>a.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>a.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>a.get(`/auth/magic-link/verify/${e}`)},l={getAll:e=>a.get("/users",{params:e}),getOne:e=>a.get(`/users/${e}`),update:(e,t)=>a.put(`/users/${e}`,t),adjustPoints:(e,t,s)=>a.post(`/users/${e}/points`,{points:t,reason:s}),getStaticQR:e=>a.get(`/users/${e}/static-qr`),getVoucherInstances:(e,t)=>a.get(`/users/${e}/voucher-instances`,{params:t?{status:t}:void 0})},r={getAll:()=>a.get("/vouchers"),getAllAdmin:()=>a.get("/vouchers/all"),getOne:e=>a.get(`/vouchers/${e}`),create:e=>a.post("/vouchers",e),update:(e,t)=>a.patch(`/vouchers/${e}`,t),delete:e=>a.delete(`/vouchers/${e}`),redeem:(e,t)=>a.post(`/vouchers/${e}/redeem`,{user_id:t}),getInstances:(e,t)=>a.get(`/vouchers/instances/${e}`,{params:{status:t}})},o={earnPoints:(e,t,s)=>a.post("/transactions/earn",{user_id:e,amount:t,outlet:s}),redeemVoucher:(e,t,s)=>a.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:s}),getAll:e=>a.get("/transactions",{params:e})},c={getAll:e=>a.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>a.get("/announcements/all"),getById:e=>a.get(`/announcements/${e}`),create:e=>a.post("/announcements",e),update:(e,t)=>a.patch(`/announcements/${e}`,t),delete:e=>a.delete(`/announcements/${e}`)},d={getCredits:()=>a.get("/investors/credits"),getOutletCredits:e=>a.get(`/investors/credits/outlet/${e}`),getTransactions:e=>a.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>a.post(`/investors/admin/${e}/outlet-credits`,t),allocateGroupCredits:(e,t)=>a.post(`/investors/admin/${e}/group-credits`,t),adjustCredits:(e,t)=>a.patch(`/investors/admin/${e}/credits/adjust`,t),getExpiringCredits:e=>a.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},m={getBudget:()=>a.get("/media/budget"),getTransactions:e=>a.get("/media/transactions",{params:e}),setBudget:(e,t)=>a.post(`/media/admin/${e}/budget`,t),adjustBudget:(e,t)=>a.patch(`/media/admin/${e}/budget/adjust`,t),getExpiringBudgets:e=>a.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>a.get("/media/admin/usage-report")},p={getAll:()=>a.get("/settings"),getOne:e=>a.get(`/settings/${e}`),update:(e,t)=>a.put(`/settings/${e}`,{value:t}),bulkUpdate:e=>a.put("/settings",{settings:e}),create:e=>a.post("/settings",e)},u={getVapidKey:()=>a.get("/notifications/vapid-public-key"),subscribe:e=>a.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>a.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>a.get("/notifications/status"),getPreferences:()=>a.get("/notifications/preferences"),updatePreferences:e=>a.patch("/notifications/preferences",{preferences:e}),sendTest:()=>a.post("/notifications/test"),getHistory:e=>a.get("/notifications/history",{params:e}),adminSend:e=>a.post("/notifications/admin/send",e),adminBroadcast:e=>a.post("/notifications/admin/broadcast",e),adminStats:()=>a.get("/notifications/admin/stats"),adminProcessQueue:()=>a.post("/notifications/admin/process-queue")},x={getMyCode:()=>a.get("/referrals/my-code"),getMyReferrals:()=>a.get("/referrals/my-referrals"),validateCode:e=>a.get(`/referrals/validate/${e}`),applyCode:e=>a.post("/referrals/apply",e),getAdminStats:()=>a.get("/referrals/admin/stats")},h={getAll:()=>a.get("/pos/keys"),create:e=>a.post("/pos/keys",e),revoke:e=>a.delete(`/pos/keys/${e}`),getLogs:(e,t)=>a.get(`/pos/keys/${e}/logs`,{params:t}),getStats:()=>a.get("/pos/keys/stats")}},16205:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var a=s(60114),i=s(85251);let n=(0,a.Ue)()((0,i.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,s)=>{e({user:t,token:s})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,i.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e?.setHasHydrated(!0)}}))},59734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},98908:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},71810:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},52679:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]])},90748:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},95964:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]])},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},13745:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/root/Loyalty/frontend/app/admin/companies/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[5380,2696,4464,5814],()=>s(3784));module.exports=a})();