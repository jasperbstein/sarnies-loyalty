(()=>{var e={};e.id=2042,e.ids=[2042],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},37262:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>o}),a(6321),a(95478),a(26083),a(96560);var s=a(23191),r=a(88716),n=a(48001),l=a(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(t,i);let o=["",{children:["app",{children:["review",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6321)),"/root/Loyalty/frontend/app/app/review/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],d=["/root/Loyalty/frontend/app/app/review/page.tsx"],c="/app/review/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/review/page",pathname:"/app/review",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},27090:(e,t,a)=>{Promise.resolve().then(a.bind(a,43466))},43466:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j,dynamic:()=>v});var s=a(10326),r=a(17577),n=a(35047),l=a(93251),i=a(90434),o=a(95920),d=a(21985),c=a(70717),p=a(79635),u=a(16205);let x=(0,r.memo)(function({currentTab:e}){let t=(0,n.usePathname)(),{user:a}=(0,u.t)(),l=a?.user_type==="employee",x=(0,r.useMemo)(()=>[{id:"home",label:"HOME",icon:o.Z,href:"/app/home",isActive:"/app/home"===t||"/app/dashboard"===t||"home"===e},{id:"rewards",label:"VOUCHERS",icon:d.Z,href:"/app/rewards",isActive:"/app/rewards"===t||t.startsWith("/app/vouchers")||"rewards"===e},{id:"activity",label:"HISTORY",icon:c.Z,href:"/app/activity",isActive:"/app/activity"===t||"activity"===e},{id:"profile",label:"PROFILE",icon:p.Z,href:"/app/profile",isActive:"/app/profile"===t||"profile"===e}],[t,e,l]);return s.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-black/10 z-50 pb-safe",children:s.jsx("div",{className:"max-w-screen-xl mx-auto px-4",children:s.jsx("div",{className:"flex justify-between items-center h-20",children:x.map(e=>{let t=e.icon;return(0,s.jsxs)(i.default,{href:e.href,prefetch:!0,className:`relative flex flex-col items-center justify-center py-2 px-6 rounded-xl transition-all ${e.isActive?"text-black":"text-black/40 hover:text-black/60"}`,children:[s.jsx(t,{className:`w-6 h-6 mb-1.5 ${e.isActive?"stroke-[2.5]":"stroke-[1.5]"}`}),s.jsx("span",{className:`text-nav ${e.isActive?"text-black":"text-black/40"}`,children:e.label}),e.isActive&&s.jsx("span",{className:`absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ${l?"bg-mustard":"bg-black"}`})]},e.id)})})})})});var m=a(94019),h=a(33734),b=a(69436),g=a(3679);function f({isOpen:e,onClose:t,userName:a}){let[n,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(""),[p,u]=(0,r.useState)(!1);if(!e)return null;let x=e=>{if(l(e),e>=4){let e="https://www.google.com/maps/place/Sarnies+Sukhumvit/@13.7417168,100.5614754,17z/data=!4m8!3m7!1s0x30e29ecdb85f25e1:0xb3d71707071c17f4!8m2!3d13.7417168!4d100.5614754!9m1!1b1!16s/g/11fflt1q8l?entry=ttu&g_ep=EgoyMDI1MTExNi4wIKXMDSoASAFQAw%3D%3D#:~:text=%EE%95%A0-,Write,-a%20review",a=/iPhone|iPad|iPod/i.test(navigator.userAgent),s=/Android/i.test(navigator.userAgent);if(a){let t=!1,a=setTimeout(()=>{t||window.open(e,"_blank")},1500);window.addEventListener("blur",()=>{t=!0,clearTimeout(a)},{once:!0}),window.location.href="comgooglemaps://?center=13.7417168,100.5614754&q=Sarnies+Sukhumvit"}else if(s){let t=!1,a=setTimeout(()=>{t||window.open(e,"_blank")},1500);window.addEventListener("blur",()=>{t=!0,clearTimeout(a)},{once:!0}),window.location.href="intent://maps.google.com/maps?center=13.7417168,100.5614754&q=Sarnies+Sukhumvit#Intent;scheme=https;package=com.google.android.apps.maps;end;"}else window.open(e,"_blank");setTimeout(()=>{t()},2e3)}},f=i??n??0;return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden animate-slide-up",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-sarnies-black to-sarnies-charcoal text-white p-6 relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white/70 hover:text-white transition-colors",children:s.jsx(m.Z,{size:24})}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"How was your experience?"}),(0,s.jsxs)("p",{className:"text-white/80 text-sm",children:[a?`Hey ${a}! `:"","Your feedback helps us improve"]})]}),s.jsx("div",{className:"p-6",children:p?(0,s.jsxs)("div",{className:"py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("h3",{className:"text-xl font-bold text-sarnies-black mb-2",children:"Thank you!"}),s.jsx("p",{className:"text-gray-600",children:"Your feedback has been received"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4,5].map(e=>s.jsx("button",{onClick:()=>x(e),onMouseEnter:()=>o(e),onMouseLeave:()=>o(null),className:"transition-all transform hover:scale-110 active:scale-95",children:s.jsx(h.Z,{size:48,className:`transition-all ${e<=f?"fill-amber-400 text-amber-400":"fill-none text-gray-300"}`})},e))}),s.jsx("div",{className:"text-center mb-6",children:null===n?s.jsx("p",{className:"text-gray-500 text-sm",children:"Tap a star to rate"}):n>=4?(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-lg font-bold text-green-600 mb-2",children:5===n?"Amazing!":"Great!"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Redirecting you to Google to share your review..."})]}):(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-lg font-bold text-amber-600 mb-2",children:1===n?"We can do better \uD83D\uDE14":2===n?"Not great \uD83D\uDE10":"It was okay \uD83E\uDD14"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Help us improve! What went wrong?"}),s.jsx("textarea",{placeholder:"Tell us what happened... (optional)",value:d,onChange:e=>c(e.target.value),className:"w-full h-32 p-4 border-2 border-gray-200 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-sarnies-black focus:border-transparent text-sm"}),(0,s.jsxs)(g.Z,{variant:"primary",size:"lg",fullWidth:!0,onClick:()=>{u(!0),setTimeout(()=>{t(),l(null),c(""),u(!1)},2e3)},className:"mt-4",children:[s.jsx(b.Z,{size:18}),s.jsx("span",{children:"Submit Feedback"})]}),s.jsx("button",{onClick:t,className:"w-full mt-3 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Skip for now"})]})})]})})]})})}var y=a(54659);let v="force-dynamic";function w(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{user:a}=(0,u.t)(),[i,o]=(0,r.useState)(!1),d=t.get("type"),c=t.get("points"),p=t.get("amount");return(0,s.jsxs)(l.Z,{children:[s.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 pb-24",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-lg p-8 text-center mb-6",children:[s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(y.Z,{size:48,className:"text-green-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-sarnies-black mb-3",children:"earn"===d?"Points Earned!":"Voucher Redeemed!"}),(0,s.jsxs)("div",{className:"space-y-2 mb-6",children:["earn"===d&&c&&(0,s.jsxs)("p",{className:"text-lg text-gray-700",children:["You earned ",(0,s.jsxs)("span",{className:"font-bold text-green-600",children:["+",c," points"]})]}),p&&(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Transaction: à¸¿",p]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Current balance: ",a?.points_balance||0," points"]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[s.jsx("p",{className:"text-gray-700 font-medium mb-4",children:"How was your experience today?"}),s.jsx("button",{onClick:()=>o(!0),className:"w-full bg-sarnies-black text-white py-3 rounded-xl font-bold hover:bg-sarnies-charcoal transition-all shadow-sm hover:shadow-md",children:"Rate Your Experience"}),s.jsx("button",{onClick:()=>e.push("/app/dashboard"),className:"w-full mt-3 text-sm text-gray-500 hover:text-gray-700 transition-colors py-2",children:"Skip and return home"})]})]}),s.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-4 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83D\uDCA1 ",s.jsx("strong",{children:"Tip:"})," Leaving a 5-star review helps us serve you better!"]})})]})}),s.jsx(x,{currentTab:"home"}),s.jsx(f,{isOpen:i,onClose:()=>{o(!1),setTimeout(()=>{e.push("/app/dashboard")},300)},userName:a?.name})]})}function j(){return s.jsx(r.Suspense,{fallback:s.jsx(l.Z,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-2 border-black border-t-transparent rounded-full animate-spin"})})}),children:s.jsx(w,{})})}},93251:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var s=a(10326),r=a(35047),n=a(16205),l=a(95920),i=a(21985),o=a(70717),d=a(79635),c=a(71810),p=a(17577);function u({children:e,hideLogout:t=!1}){let a=(0,r.useRouter)(),u=(0,r.usePathname)(),{user:x,logout:m}=(0,n.t)(),[h,b]=(0,p.useState)(!1);if(!h)return s.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:s.jsx("div",{className:"w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"})});if(!(x&&("customer"===x.type||"staff"===x.type||"customer"===x.user_type||"employee"===x.user_type||"staff"===x.user_type)))return null;let g=[{icon:l.Z,label:"HOME",path:"/app/home"},{icon:i.Z,label:"VOUCHERS",path:"/app/vouchers"},{icon:o.Z,label:"HISTORY",path:"/app/activity"},{icon:d.Z,label:"PROFILE",path:"/app/profile"}];return(0,s.jsxs)("div",{className:"min-h-screen bg-white",children:[s.jsx("header",{className:"fixed top-0 left-0 right-0 h-header bg-black z-fixed",children:(0,s.jsxs)("div",{className:"h-full max-w-container mx-auto px-6 flex items-center justify-between",children:[s.jsx("span",{className:"text-label text-white",children:"SARNIES"}),!t&&s.jsx("button",{onClick:()=>{confirm("Are you sure you want to log out?")&&(m(),a.push("/login"))},className:"p-2.5 -mr-2.5 text-white/60 hover:text-white transition-opacity","aria-label":"Log out",type:"button",children:s.jsx(c.Z,{className:"w-[18px] h-[18px]",strokeWidth:1.5})})]})}),s.jsx("main",{className:"pt-header pb-[calc(var(--nav-height)+env(safe-area-inset-bottom,0px)+16px)] min-h-screen",children:s.jsx("div",{className:"max-w-container mx-auto px-5 py-6",children:e})}),s.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-fixed pb-safe",children:s.jsx("div",{className:"max-w-container mx-auto px-4",children:s.jsx("div",{className:"flex justify-around items-start h-[60px] pt-2.5",children:g.map(e=>{let t=e.icon,r=u===e.path||u.startsWith(e.path);return(0,s.jsxs)("button",{onClick:()=>a.push(e.path),className:"flex flex-col items-center justify-start min-w-[64px] py-1 transition-all active:scale-95",children:[(0,s.jsxs)("div",{className:"relative mb-1",children:[s.jsx(t,{className:`w-[22px] h-[22px] transition-colors ${r?"text-black stroke-[2]":"text-gray-400 stroke-[1.5]"}`}),r&&s.jsx("div",{className:`absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ${x?.user_type==="employee"?"bg-mustard":"bg-accent"}`})]}),s.jsx("span",{className:`text-nav ${r?"text-black":"text-gray-400"}`,children:e.label})]},e.path)})})})})]})}},3679:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(10326),r=a(75290);function n({children:e,variant:t="primary",size:a="md",loading:n=!1,fullWidth:l=!1,disabled:i,className:o="",...d}){return(0,s.jsxs)("button",{className:`inline-flex items-center justify-center font-semibold transition-all duration-100 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 ${{primary:"bg-gradient-to-br from-black to-gray-800 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-black",secondary:"bg-white text-black hover:bg-gray-50 press-scale border border-gray-200 shadow-sm hover:shadow-md rounded-xl focus:ring-gray-400",success:"bg-gradient-to-br from-green-600 to-green-700 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-green-500",danger:"bg-gradient-to-br from-red-600 to-red-700 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-red-500",ghost:"bg-transparent text-black hover:bg-gray-100 press-scale rounded-xl focus:ring-gray-400","admin-primary":"bg-gradient-to-br from-black to-gray-800 text-white hover:shadow-lg press-scale shadow-md rounded-xl focus:ring-black","admin-secondary":"bg-white border border-gray-200 text-black hover:bg-gray-50 press-scale shadow-sm hover:shadow-md rounded-xl focus:ring-gray-400"}[t]} ${{sm:"px-3 py-2 text-xs gap-1.5",md:"px-4 py-2.5 text-sm gap-2",lg:"px-6 py-3 text-base gap-2.5"}[a]} ${l?"w-full":""} ${o}`,disabled:i||n,...d,children:[n&&s.jsx(r.Z,{className:"w-4 h-4 animate-spin"}),e]})}},16205:(e,t,a)=>{"use strict";a.d(t,{t:()=>n});var s=a(60114),r=a(85251);let n=(0,s.Ue)()((0,r.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,a)=>{e({user:t,token:a})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,r.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e?.setHasHydrated(!0)}}))},70717:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},75290:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},71810:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},69436:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},33734:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},21985:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},79635:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},90434:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var s=a(79404),r=a.n(s)},6321:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,dynamic:()=>r});var s=a(68570);let r=(0,s.createProxy)(String.raw`/root/Loyalty/frontend/app/app/review/page.tsx#dynamic`),n=(0,s.createProxy)(String.raw`/root/Loyalty/frontend/app/app/review/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[5380,2696,5814],()=>a(37262));module.exports=s})();