(()=>{var e={};e.id=104,e.ids=[104],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},11032:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.Z,__next_app__:()=>x,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>o}),r(34408),r(95478),r(26083),r(96560);var s=r(23191),a=r(88716),i=r(48001),l=r(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let o=["",{children:["app",{children:["activity",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,34408)),"/root/Loyalty/frontend/app/app/activity/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],d=["/root/Loyalty/frontend/app/app/activity/page.tsx"],c="/app/activity/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/app/activity/page",pathname:"/app/activity",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2982:(e,t,r)=>{Promise.resolve().then(r.bind(r,74253))},74253:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(10326),a=r(17577),i=r(41135);let l=({label:e,active:t,onClick:r})=>s.jsx("button",{type:"button",onClick:r,className:(0,i.Z)("h-[32px] px-4 rounded-full border text-[14px] font-medium transition-colors",t?"border-[#D5A253] bg-[#FFF6E8] text-[#1B1B1B]":"border-[#E5E7EB] bg-white text-[#1B1B1B] hover:bg-[#F7F7F7]"),children:e}),n=({value:e,onChange:t})=>{let r={all:"All",earned:"Earned",redeemed:"Redeemed",used:"Used",expired:"Expired"};return s.jsx("div",{className:"flex flex-wrap gap-8 items-center mt-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:["all","earned","redeemed","used","expired"].map(a=>s.jsx(l,{label:r[a],active:e===a,onClick:()=>t(a)},a))})})},o=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}),d=({title:e,description:t,icon:r})=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-[#FFF6E8] flex items-center justify-center text-[#D5A253]",children:r||s.jsx(o,{className:"w-6 h-6"})}),s.jsx("h3",{className:"mt-4 text-[18px] font-semibold text-[#1B1B1B]",children:e}),s.jsx("p",{className:"mt-1 text-[14px] text-[#6F6F6F] max-w-xs",children:t})]});var c=r(93251),x=r(28632),p=r(16205);r(6824);var u=r(46226),m=r(54659),h=r(91470),g=r(48998);function y({title:e,description:t,image_url:r,computed_status:a,redeemed_at:i,used_at:l,expires_at:n,onClick:o}){let d="active"===a;return(0,s.jsxs)("div",{onClick:d?o:void 0,className:`relative rounded-2xl overflow-hidden transition-all ${d?"bg-white border-2 border-green-500 shadow-md hover:shadow-lg cursor-pointer transform hover:scale-[1.02]":"bg-gray-100 border-2 border-gray-300 opacity-60 cursor-not-allowed"}`,children:[(0,s.jsxs)("div",{className:"flex gap-4 p-4",children:[s.jsx("div",{className:"relative w-20 h-20 flex-shrink-0 rounded-xl overflow-hidden bg-gray-200",children:r?s.jsx(u.default,{src:r,alt:e,fill:!0,className:`object-cover ${d?"":"grayscale"}`}):s.jsx("div",{className:`w-full h-full flex items-center justify-center ${d?"bg-green-100":"bg-gray-300"}`,children:s.jsx(g.Z,{className:`w-8 h-8 ${d?"text-green-600":"text-gray-500"}`})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h3",{className:`font-bold text-base ${d?"text-gray-900":"text-gray-600"}`,children:e}),(()=>{switch(a){case"active":return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full",children:[s.jsx(m.Z,{className:"w-3 h-3"}),"Ready to Use"]});case"used":return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-600 text-xs font-semibold rounded-full",children:[s.jsx(m.Z,{className:"w-3 h-3"}),"Used"]});case"expired":return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-600 text-xs font-semibold rounded-full",children:[s.jsx(h.Z,{className:"w-3 h-3"}),"Expired"]})}})()]}),s.jsx("p",{className:`text-sm mb-2 line-clamp-2 ${d?"text-gray-600":"text-gray-500"}`,children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(g.Z,{className:"w-3 h-3"}),s.jsx("span",{children:l?`Used on ${new Date(l).toLocaleDateString()}`:"expired"===a&&n?`Expired on ${new Date(n).toLocaleDateString()}`:n?`Expires ${new Date(n).toLocaleDateString()}`:`Redeemed ${new Date(i).toLocaleDateString()}`})]})]})]}),d&&s.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[40px] border-r-[40px] border-t-green-500 border-r-transparent",children:s.jsx("div",{className:"absolute -top-9 -right-1 text-white text-xs font-bold transform rotate-45",children:"✓"})})]})}var f=r(98455);function v(){let[e,t]=(0,a.useState)("all"),{user:r,hasHydrated:i}=(0,p.t)(),[l,o]=(0,a.useState)(!1),[u,h]=(0,a.useState)([]),[v,b]=(0,a.useState)(!0),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null);(0,x.h)();let _=e=>{"active"===e.computed_status&&(k(e),N(!0))};if(!l||!i)return s.jsx(c.Z,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"w-8 h-8 border-4 border-black border-t-transparent rounded-full animate-spin"})})});let q=r?.user_type==="employee",Z=u.reduce((e,t)=>(e[t.computed_status]=(e[t.computed_status]||0)+1,e),{}),L=Object.keys(Z).length>1;return(0,s.jsxs)(c.Z,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 pb-24",children:[(0,s.jsxs)("header",{children:[s.jsx("h1",{className:"text-[24px] font-semibold text-[#1B1B1B]",children:q?"Redemption History":"Activity History"}),s.jsx("p",{className:"text-[14px] text-[#6F6F6F] mt-1",children:q?"Your daily drink redemption history.":"Your points and voucher history."}),!q&&(0,s.jsxs)("div",{className:"mt-3 inline-flex items-center px-4 py-2 rounded-full bg-[#FFF6E8] text-[14px] text-[#8B6F36]",children:["⭐ ",(0,s.jsxs)("span",{className:"ml-2",children:[r?.points_balance||0," points remaining"]})]})]}),!q&&!v&&u.length>0&&s.jsx(n,{value:e,onChange:t}),q&&!v&&u.length>0&&L&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>t("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"all"===e?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All (",u.length,")"]}),Z.active>0&&(0,s.jsxs)("button",{onClick:()=>t("active"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"active"===e?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Active (",Z.active,")"]}),Z.used>0&&(0,s.jsxs)("button",{onClick:()=>t("used"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"used"===e?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Used (",Z.used,")"]})]}),v?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"w-8 h-8 border-4 border-black border-t-transparent rounded-full animate-spin"})}):0===u.length?s.jsx(d,{title:q?"No redemptions yet":"No activity yet",description:"all"===e?q?"Your daily drink redemptions will appear here.":"Your vouchers will appear here after redemption.":`No ${e} ${q?"redemptions":"vouchers"} found.`}):q?s.jsx("div",{className:"space-y-6",children:Object.entries(u.reduce((e,t)=>{let r=new Date(t.redeemed_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e[r]||(e[r]=[]),e[r].push(t),e},{})).map(([e,t])=>(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:e}),s.jsx("div",{className:"space-y-3",children:t.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"font-bold text-gray-900",children:e.title}),s.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${"used"===e.computed_status?"bg-gray-100 text-gray-600":"bg-green-100 text-green-700"}`,children:"used"===e.computed_status?"Used":"Active"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx(g.Z,{className:"w-4 h-4"}),s.jsx("span",{children:new Date(e.redeemed_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.used_at&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx(m.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:["Used at ",new Date(e.used_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]})]})]},e.id))}),(0,s.jsxs)("div",{className:"mt-2 text-right text-sm text-gray-500",children:[s.jsx("span",{className:"font-semibold",children:t.length})," redemption",1!==t.length?"s":""," on this day"]})]},e))}):s.jsx("div",{className:"space-y-3",children:u.map(e=>s.jsx(y,{...e,onClick:()=>_(e)},e.id))})]}),w&&s.jsx(f.Z,{isOpen:j,onClose:()=>{N(!1),k(null)},title:w.title,qrDataUrl:w.qr_code_data,expiresAt:w.expires_at})]})}r(55358)},28632:(e,t,r)=>{"use strict";r.d(t,{h:()=>l});var s=r(17577),a=r(35047);let i=(e={})=>{let{onSwipeLeft:t,onSwipeRight:r,threshold:a=50}=e,i=(0,s.useRef)(0),l=(0,s.useRef)(0);(0,s.useEffect)(()=>{let e=e=>{i.current=e.changedTouches[0].screenX},s=e=>{l.current=e.changedTouches[0].screenX,n()},n=()=>{let e=i.current-l.current;Math.abs(e)<a||(e>0?t?.():r?.())};return document.addEventListener("touchstart",e),document.addEventListener("touchend",s),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",s)}},[t,r,a])},l=()=>{let e=(0,a.useRouter)(),t=["/app/home","/app/rewards","/app/activity","/app/profile"],r=()=>0,s=s=>{let a;let i=r();(a="left"===s?Math.min(i+1,t.length-1):Math.max(i-1,0))!==i&&e.push(t[a])};i({onSwipeLeft:()=>s("left"),onSwipeRight:()=>s("right"),threshold:75})}},70717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},71810:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},21985:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},79635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},91470:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},34408:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/root/Loyalty/frontend/app/app/activity/page.tsx#default`)},41135:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=function(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=t);return s}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[5380,2696,4464,6226,5814,6663],()=>r(11032));module.exports=s})();