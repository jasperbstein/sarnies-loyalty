(()=>{var e={};e.id=5034,e.ids=[5034],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},34277:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.Z,__next_app__:()=>x,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(6930),s(95478),s(26083),s(96560);var a=s(23191),r=s(88716),l=s(48001),i=s(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(t,n);let o=["",{children:["app",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6930)),"/root/Loyalty/frontend/app/app/profile/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],c=["/root/Loyalty/frontend/app/app/profile/page.tsx"],d="/app/profile/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/profile/page",pathname:"/app/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},14227:(e,t,s)=>{Promise.resolve().then(s.bind(s,82066))},82066:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(10326),r=s(17577),l=s(76797),i=s(16205);let n=({name:e,memberId:t,phone:s})=>{let{user:r}=(0,i.t)(),n=r?.user_type==="employee",o=e.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()||"?";return a.jsx(l.q,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-[16px] font-semibold ${n?"bg-mustard text-black":"bg-[#1B1B1B] text-white"}`,children:o}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-[16px] font-semibold text-[#1B1B1B]",children:e}),(0,a.jsxs)("p",{className:"text-[13px] text-[#6F6F6F]",children:[n?"Employee":"Member"," #",t]}),a.jsx("p",{className:"text-[13px] text-[#1B1B1B] mt-1",children:s})]})]})})},o=({qrCodeUrl:e,qrLoading:t,customerId:s})=>{let{user:r}=(0,i.t)(),n=r?.user_type==="employee";return a.jsx(l.q,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"text-[14px] font-medium text-[#1B1B1B]",children:n?"Employee QR Code":"Membership QR Code"}),a.jsx("div",{className:`w-48 h-48 bg-white rounded-xl flex items-center justify-center border-2 ${n?"border-mustard":"border-gray-200"}`,children:t?a.jsx("div",{className:`w-8 h-8 border-4 border-t-transparent rounded-full animate-spin ${n?"border-mustard":"border-black"}`}):e?a.jsx("img",{src:e,alt:n?"Employee QR Code":"Membership QR Code",className:"w-44 h-44"}):a.jsx("div",{className:"text-[#9CA3AF] text-[12px]",children:"Loading..."})}),s&&(0,a.jsxs)("div",{className:"text-[11px] text-[#9CA3AF] font-mono",children:["ID: ",s]}),a.jsx("p",{className:"text-[13px] text-[#6F6F6F] text-center",children:n?"Show this for employee identification.":"Show this at checkout to earn and redeem points."})]})})},c=({points:e,totalSpentDisplay:t,memberSinceDisplay:s})=>{let r=({label:e,value:t})=>(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[12px] text-[#6F6F6F] uppercase mb-1",children:e}),a.jsx("span",{className:"text-[16px] font-semibold text-[#1B1B1B]",children:t})]});return a.jsx(l.q,{children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[a.jsx(r,{label:"Points",value:e}),a.jsx(r,{label:"Total spent",value:t}),a.jsx(r,{label:"Member since",value:s})]})})},d=({title:e,fields:t})=>(0,a.jsxs)(l.q,{children:[a.jsx("h2",{className:"text-[16px] font-semibold text-[#1B1B1B] mb-3",children:e}),a.jsx("div",{className:"divide-y divide-[#F0F0F0]",children:t.map(e=>(0,a.jsxs)("div",{className:"py-3",children:[a.jsx("div",{className:"text-[12px] text-[#6F6F6F] mb-1",children:e.label}),a.jsx("div",{className:"text-[14px] text-[#1B1B1B]",children:e.value||"Not set"}),e.helper&&a.jsx("div",{className:"text-[12px] text-[#9CA3AF] mt-1",children:e.helper})]},e.id))})]}),x=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}),p=({items:e})=>(0,a.jsxs)(l.q,{children:[a.jsx("h2",{className:"text-[16px] font-semibold text-[#1B1B1B] mb-3",children:"Settings"}),a.jsx("div",{className:"divide-y divide-[#F0F0F0]",children:e.map(e=>{let t="danger"===e.tone;return(0,a.jsxs)("button",{type:"button",onClick:e.onClick,className:"w-full flex items-center justify-between py-3 text-left",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:t?"text-[14px] font-medium text-[#D32F2F]":"text-[14px] font-medium text-[#1B1B1B]",children:e.label}),e.description&&a.jsx("p",{className:"text-[12px] text-[#6F6F6F]",children:e.description})]}),a.jsx(x,{className:"w-5 h-5 text-[#9CA3AF]"})]},e.id)})})]});var u=s(94019),h=s(93251),m=s(28632);s(94464);var b=s(35047);function f(){let e=(0,b.useRouter)(),{user:t,token:s,logout:l}=(0,i.t)(),[x,f]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[y,N]=(0,r.useState)(!1),[g,k]=(0,r.useState)(null),[w,C]=(0,r.useState)(!1);(0,m.h)();let S=t?.user_type==="employee",E=[{id:"firstName",label:"First name",value:t?.name||""},{id:"lastName",label:"Last name",value:t?.surname||""},{id:"phone",label:"Phone number",value:t?.phone||"",helper:"Contact support to change"},{id:"email",label:"Email",value:t?.email||""},{id:"birthday",label:"Birthday (DD-MM)",value:(e=>{if(!e)return"";let t=new Date(e),s=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0");return`${s}-${a}`})(t?.birthday)},{id:"company",label:"Company",value:t?.company||""},{id:"gender",label:"Gender",value:t?.gender||""}];return(0,a.jsxs)(h.Z,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[a.jsx("header",{children:a.jsx("h1",{className:"sarnies-title-sm text-black",children:"PROFILE"})}),a.jsx(n,{name:t?.name||"Guest",memberId:t?.id?.toString().padStart(6,"0")||"000000",phone:t?.phone||""}),a.jsx(o,{qrCodeUrl:g||void 0,qrLoading:w,customerId:t?.customer_id}),!S&&a.jsx(c,{points:t?.points_balance||0,totalSpentDisplay:`à¸¿${Number(t?.total_spend||0).toLocaleString()}`,memberSinceDisplay:t?.created_at?new Date(t.created_at).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Nov 2025"}),S&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-black/10",children:[a.jsx("h3",{className:"sarnies-caption text-black/50 mb-3",children:"MEMBER SINCE"}),a.jsx("p",{className:"sarnies-title-sm text-black",children:t?.created_at?new Date(t.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase():"NOVEMBER 2025"})]}),a.jsx(d,{title:"Personal Details",fields:E}),a.jsx(p,{items:[{id:"phone",label:"Change phone number",description:"Update your contact information",onClick:()=>f(!0)},{id:"notifications",label:"Notifications",description:"Manage your preferences",onClick:()=>v(!0)},{id:"delete",label:"Deactivate account",description:"Archive your account (can be restored)",tone:"danger",onClick:()=>N(!0)}]}),a.jsx("button",{onClick:()=>{confirm("Are you sure you want to log out?")&&(l(),e.push("/login"))},className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-black/90 transition-colors active:scale-[0.98]",children:a.jsx("span",{className:"sarnies-subhead",children:"LOGOUT"})}),a.jsx("p",{className:"mt-2 sarnies-caption text-center text-black/30",children:"SARNIES LOYALTY V2.0.0"})]}),x&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>f(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-black/10",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"sarnies-headline text-black",children:"CHANGE PHONE NUMBER"}),a.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-black/5 rounded-lg transition-colors",children:a.jsx(u.Z,{size:20,className:"text-black/60"})})]}),a.jsx("p",{className:"sarnies-body text-black/60 mb-4",children:"Contact support to update your phone number for security reasons."}),(0,a.jsxs)("div",{className:"bg-black/5 p-4 rounded-lg mb-4 border border-black/10",children:[a.jsx("p",{className:"sarnies-footnote text-black",children:"Support: +66 2 xxx xxxx"}),a.jsx("p",{className:"sarnies-footnote text-black",children:"Email: support@sarnies.com"})]}),a.jsx("button",{onClick:()=>f(!1),className:"w-full bg-black text-white py-3 rounded-xl font-semibold hover:bg-black/90 transition-colors",children:"Close"})]})}),j&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>v(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-black/10",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"sarnies-headline text-black",children:"NOTIFICATIONS"}),a.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-black/5 rounded-lg transition-colors",children:a.jsx(u.Z,{size:20,className:"text-black/60"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"sarnies-subhead text-black",children:"SMS Notifications"}),a.jsx("p",{className:"sarnies-footnote text-black/50",children:"Receive updates via SMS"})]}),a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-black/30 accent-black",defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"sarnies-subhead text-black",children:"Email Notifications"}),a.jsx("p",{className:"sarnies-footnote text-black/50",children:"Receive updates via email"})]}),a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-black/30 accent-black",defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"sarnies-subhead text-black",children:"Promotional Offers"}),a.jsx("p",{className:"sarnies-footnote text-black/50",children:"Get special deals and offers"})]}),a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-black/30 accent-black",defaultChecked:!0})]})]}),a.jsx("button",{onClick:()=>v(!1),className:"w-full bg-black text-white py-3 rounded-xl font-semibold hover:bg-black/90 transition-colors mt-6",children:"Save Preferences"})]})}),y&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>N(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-black/10",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"sarnies-headline text-red-600",children:"DEACTIVATE ACCOUNT"}),a.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-black/5 rounded-lg transition-colors",children:a.jsx(u.Z,{size:20,className:"text-black/60"})})]}),a.jsx("p",{className:"sarnies-body text-black/60 mb-4",children:"Your account will be archived and can be restored by contacting support. Your points and data will be preserved."}),a.jsx("div",{className:"bg-amber-50 p-4 rounded-lg mb-4 border border-amber-200",children:a.jsx("p",{className:"sarnies-footnote text-amber-800",children:"You won't be able to access your account after deactivation"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>N(!1),className:"flex-1 bg-white border-2 border-black/10 text-black py-3 rounded-xl font-semibold hover:bg-black/5 transition-colors",children:"Cancel"}),a.jsx("button",{className:"flex-1 bg-red-600 text-white py-3 rounded-xl font-semibold hover:bg-red-700 transition-colors",children:"Deactivate"})]})]})})]})}s(55358),s(36607)},93251:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var a=s(10326),r=s(35047),l=s(16205),i=s(95920),n=s(21985),o=s(70717),c=s(79635),d=s(71810),x=s(17577);function p({children:e,hideLogout:t=!1}){let s=(0,r.useRouter)(),p=(0,r.usePathname)(),{user:u,logout:h}=(0,l.t)(),[m,b]=(0,x.useState)(!1);if(!m)return a.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:a.jsx("div",{className:"w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"})});if(!(u&&("customer"===u.type||"staff"===u.type||"customer"===u.user_type||"employee"===u.user_type||"staff"===u.user_type)))return null;let f=[{icon:i.Z,label:"HOME",path:"/app/home"},{icon:n.Z,label:"VOUCHERS",path:"/app/vouchers"},{icon:o.Z,label:"HISTORY",path:"/app/activity"},{icon:c.Z,label:"PROFILE",path:"/app/profile"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[a.jsx("header",{className:"fixed top-0 left-0 right-0 h-header bg-black z-fixed",children:(0,a.jsxs)("div",{className:"h-full max-w-container mx-auto px-6 flex items-center justify-between",children:[a.jsx("span",{className:"text-label text-white",children:"SARNIES"}),!t&&a.jsx("button",{onClick:()=>{confirm("Are you sure you want to log out?")&&(h(),s.push("/login"))},className:"p-2.5 -mr-2.5 text-white/60 hover:text-white transition-opacity","aria-label":"Log out",type:"button",children:a.jsx(d.Z,{className:"w-[18px] h-[18px]",strokeWidth:1.5})})]})}),a.jsx("main",{className:"pt-header pb-[calc(var(--nav-height)+env(safe-area-inset-bottom,0px)+16px)] min-h-screen",children:a.jsx("div",{className:"max-w-container mx-auto px-5 py-6",children:e})}),a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-fixed pb-safe",children:a.jsx("div",{className:"max-w-container mx-auto px-4",children:a.jsx("div",{className:"flex justify-around items-start h-[60px] pt-2.5",children:f.map(e=>{let t=e.icon,r=p===e.path||p.startsWith(e.path);return(0,a.jsxs)("button",{onClick:()=>s.push(e.path),className:"flex flex-col items-center justify-start min-w-[64px] py-1 transition-all active:scale-95",children:[(0,a.jsxs)("div",{className:"relative mb-1",children:[a.jsx(t,{className:`w-[22px] h-[22px] transition-colors ${r?"text-black stroke-[2]":"text-gray-400 stroke-[1.5]"}`}),r&&a.jsx("div",{className:`absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ${u?.user_type==="employee"?"bg-mustard":"bg-accent"}`})]}),a.jsx("span",{className:`text-nav ${r?"text-black":"text-gray-400"}`,children:e.label})]},e.path)})})})})]})}},76797:(e,t,s)=>{"use strict";s.d(t,{q:()=>l});var a=s(10326);s(17577);var r=s(41135);let l=({className:e,children:t})=>a.jsx("section",{className:(0,r.Z)("card",e),children:t})},28632:(e,t,s)=>{"use strict";s.d(t,{h:()=>i});var a=s(17577),r=s(35047);let l=(e={})=>{let{onSwipeLeft:t,onSwipeRight:s,threshold:r=50}=e,l=(0,a.useRef)(0),i=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=e=>{l.current=e.changedTouches[0].screenX},a=e=>{i.current=e.changedTouches[0].screenX,n()},n=()=>{let e=l.current-i.current;Math.abs(e)<r||(e>0?t?.():s?.())};return document.addEventListener("touchstart",e),document.addEventListener("touchend",a),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",a)}},[t,s,r])},i=()=>{let e=(0,r.useRouter)(),t=["/app/home","/app/rewards","/app/activity","/app/profile"],s=()=>0,a=a=>{let r;let l=s();(r="left"===a?Math.min(l+1,t.length-1):Math.max(l-1,0))!==l&&e.push(t[r])};l({onSwipeLeft:()=>a("left"),onSwipeRight:()=>a("right"),threshold:75})}},36607:(e,t,s)=>{"use strict";function a(){let e="https://loyalty.sarnies.tech/api";return e?e.startsWith("/")?"":e.replace(/\/api\/?$/,""):"http://localhost:3000"}function r(){return"https://loyalty.sarnies.tech/api"}s.d(t,{SV:()=>a,kG:()=>r})},16205:(e,t,s)=>{"use strict";s.d(t,{t:()=>l});var a=s(60114),r=s(85251);let l=(0,a.Ue)()((0,r.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,s)=>{e({user:t,token:s})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,r.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e?.setHasHydrated(!0)}}))},70717:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},71810:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},21985:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},79635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6930:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/root/Loyalty/frontend/app/app/profile/page.tsx#default`)},41135:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=function(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a)}return r}(e))&&(a&&(a+=" "),a+=t);return a}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[5380,2696,4464,5814],()=>s(34277));module.exports=a})();