(()=>{var e={};e.id=8745,e.ids=[8745],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},90197:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.Z,__next_app__:()=>u,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>o}),a(83031),a(95478),a(26083),a(96560);var r=a(23191),s=a(88716),n=a(48001),l=a(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(t,i);let o=["",{children:["app",{children:["announcements",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,83031)),"/root/Loyalty/frontend/app/app/announcements/[id]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,95478)),"/root/Loyalty/frontend/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,26083)),"/root/Loyalty/frontend/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,96560)),"/root/Loyalty/frontend/app/not-found.tsx"]}],c=["/root/Loyalty/frontend/app/app/announcements/[id]/page.tsx"],d="/app/announcements/[id]/page",u={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/app/announcements/[id]/page",pathname:"/app/announcements/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},90557:(e,t,a)=>{Promise.resolve().then(a.bind(a,56252))},56252:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(10326),s=a(17577),n=a(35047),l=a(46226),i=a(93251),o=a(86333),c=a(40765),d=a(37358),u=a(40080);function p(){(0,u.r)();let e=(0,n.useRouter)();(0,n.useParams)();let[t,a]=(0,s.useState)(null),[p,x]=(0,s.useState)(!0),[h,m]=(0,s.useState)(!1);return p?r.jsx(i.Z,{children:(0,r.jsxs)("div",{className:"pb-20 animate-pulse",children:[r.jsx("div",{className:"bg-gray-200 h-8 w-24 rounded mb-6"}),r.jsx("div",{className:"bg-gray-300 h-64 rounded-2xl mb-6"}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-gray-200 h-6 rounded"}),r.jsx("div",{className:"bg-gray-200 h-6 rounded w-3/4"}),r.jsx("div",{className:"bg-gray-200 h-6 rounded w-5/6"})]})]})}):h||!t?r.jsx(i.Z,{children:(0,r.jsxs)("div",{className:"pb-20",children:[(0,r.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-gray-600 hover:text-black mb-6 transition-colors",children:[r.jsx(o.Z,{className:"w-5 h-5"}),"Back"]}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:[r.jsx("p",{className:"text-red-900 font-semibold mb-2",children:"Failed to load announcement"}),r.jsx("p",{className:"text-sm text-red-700 mb-4",children:"This announcement may no longer exist"}),r.jsx("button",{onClick:()=>e.push("/app/dashboard"),className:"bg-black hover:bg-gray-800 text-white px-6 py-2 rounded-xl text-sm font-medium transition-colors",children:"Go to Dashboard"})]})]})}):r.jsx(i.Z,{children:(0,r.jsxs)("div",{className:"pb-20",children:[(0,r.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-gray-600 hover:text-black mb-6 transition-colors font-medium",children:[r.jsx(o.Z,{className:"w-5 h-5"}),"Back"]}),(0,r.jsxs)("article",{className:"bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100",children:[t.image_url&&r.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-gray-100 to-gray-200",children:r.jsx(l.default,{src:t.image_url,alt:t.title,fill:!0,className:"object-cover",sizes:"100vw",priority:!0})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[(0,r.jsxs)("span",{className:`text-xs font-semibold px-3 py-1.5 rounded-full ${(e=>{switch(e){case"promotion":return"bg-green-100 text-green-800";case"new_product":return"bg-blue-100 text-blue-800";case"seasonal":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(t.announcement_type)}`,children:[r.jsx(c.Z,{className:"w-3 h-3 inline mr-1"}),(e=>{switch(e){case"promotion":return"Promotion";case"new_product":return"New Product";case"seasonal":return"Seasonal";case"news":return"News";default:return"Announcement"}})(t.announcement_type)]}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(d.Z,{className:"w-3 h-3"}),new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),r.jsx("h1",{className:"text-heading text-black mb-4",children:t.title}),r.jsx("div",{className:"text-body text-gray-700 whitespace-pre-wrap mb-6",children:(e=>{let t=/(https?:\/\/[^\s]+)/g;return e.split(t).map((e,a)=>e.match(t)?r.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline break-all",children:e},a):r.jsx("span",{children:e},a))})(t.description)}),t.cta_text&&t.cta_link&&r.jsx("button",{onClick:()=>{t?.cta_link&&(t.cta_link.startsWith("/")||t.cta_link.startsWith("#")?e.push(t.cta_link):window.open(t.cta_link,"_blank"))},className:"btn-primary w-full",children:t.cta_text})]})]})]})})}},93251:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var r=a(10326),s=a(35047),n=a(16205),l=a(95920),i=a(21985),o=a(70717),c=a(79635),d=a(71810),u=a(17577);function p({children:e,hideLogout:t=!1}){let a=(0,s.useRouter)(),p=(0,s.usePathname)(),{user:x,logout:h}=(0,n.t)(),[m,y]=(0,u.useState)(!1);if(!m)return r.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:r.jsx("div",{className:"w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"})});if(!(x&&("customer"===x.type||"staff"===x.type||"customer"===x.user_type||"employee"===x.user_type||"staff"===x.user_type)))return null;let b=[{icon:l.Z,label:"HOME",path:"/app/home"},{icon:i.Z,label:"VOUCHERS",path:"/app/vouchers"},{icon:o.Z,label:"HISTORY",path:"/app/activity"},{icon:c.Z,label:"PROFILE",path:"/app/profile"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-white",children:[r.jsx("header",{className:"fixed top-0 left-0 right-0 h-header bg-black z-fixed",children:(0,r.jsxs)("div",{className:"h-full max-w-container mx-auto px-6 flex items-center justify-between",children:[r.jsx("span",{className:"text-label text-white",children:"SARNIES"}),!t&&r.jsx("button",{onClick:()=>{confirm("Are you sure you want to log out?")&&(h(),a.push("/login"))},className:"p-2.5 -mr-2.5 text-white/60 hover:text-white transition-opacity","aria-label":"Log out",type:"button",children:r.jsx(d.Z,{className:"w-[18px] h-[18px]",strokeWidth:1.5})})]})}),r.jsx("main",{className:"pt-header pb-[calc(var(--nav-height)+env(safe-area-inset-bottom,0px)+16px)] min-h-screen",children:r.jsx("div",{className:"max-w-container mx-auto px-5 py-6",children:e})}),r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-fixed pb-safe",children:r.jsx("div",{className:"max-w-container mx-auto px-4",children:r.jsx("div",{className:"flex justify-around items-start h-[60px] pt-2.5",children:b.map(e=>{let t=e.icon,s=p===e.path||p.startsWith(e.path);return(0,r.jsxs)("button",{onClick:()=>a.push(e.path),className:"flex flex-col items-center justify-start min-w-[64px] py-1 transition-all active:scale-95",children:[(0,r.jsxs)("div",{className:"relative mb-1",children:[r.jsx(t,{className:`w-[22px] h-[22px] transition-colors ${s?"text-black stroke-[2]":"text-gray-400 stroke-[1.5]"}`}),s&&r.jsx("div",{className:`absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ${x?.user_type==="employee"?"bg-mustard":"bg-accent"}`})]}),r.jsx("span",{className:`text-nav ${s?"text-black":"text-gray-400"}`,children:e.label})]},e.path)})})})})]})}},40080:(e,t,a)=>{"use strict";a.d(t,{r:()=>n});var r=a(17577),s=a(35047);let n=(e={})=>{let{enabled:t=!0,threshold:a=100,edgeWidth:n=50}=e,l=(0,s.useRouter)(),i=(0,r.useRef)(0),o=(0,r.useRef)(0),c=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(!t)return;let e=e=>{let t=e.touches[0];i.current=t.clientX,o.current=t.clientY,c.current=t.clientX<n},r=e=>{if(!c.current)return;let t=e.touches[0],r=t.clientX-i.current,s=Math.abs(t.clientY-o.current);r>a&&r>2*s&&e.preventDefault()},s=e=>{if(!c.current)return;let t=e.changedTouches[0],r=t.clientX-i.current,s=Math.abs(t.clientY-o.current);r>a&&r>2*s&&l.back(),c.current=!1};return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",s),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",s)}},[t,a,n,l])}},16205:(e,t,a)=>{"use strict";a.d(t,{t:()=>n});var r=a(60114),s=a(85251);let n=(0,r.Ue)()((0,s.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,a)=>{e({user:t,token:a})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,s.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e?.setHasHydrated(!0)}}))},86333:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37358:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},70717:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},71810:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},40765:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},21985:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},79635:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},83031:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`/root/Loyalty/frontend/app/app/announcements/[id]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[5380,2696,6226,5814],()=>a(90197));module.exports=r})();