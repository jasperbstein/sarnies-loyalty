"use strict";exports.id=916,exports.ids=[916],exports.modules={93251:(e,t,s)=>{s.d(t,{Z:()=>p});var a=s(10326),n=s(35047),r=s(16205),i=s(95920),o=s(21985),l=s(70717),c=s(79635),d=s(71810),u=s(17577);function p({children:e,hideLogout:t=!1}){let s=(0,n.useRouter)(),p=(0,n.usePathname)(),{user:h,logout:m}=(0,r.t)(),[g,f]=(0,u.useState)(!1);if(!g)return a.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:a.jsx("div",{className:"w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"})});if(!(h&&("customer"===h.type||"staff"===h.type||"customer"===h.user_type||"employee"===h.user_type||"staff"===h.user_type)))return null;let v=[{icon:i.Z,label:"HOME",path:"/app/home"},{icon:o.Z,label:"VOUCHERS",path:"/app/vouchers"},{icon:l.Z,label:"HISTORY",path:"/app/activity"},{icon:c.Z,label:"PROFILE",path:"/app/profile"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[a.jsx("header",{className:"fixed top-0 left-0 right-0 h-header bg-black z-fixed",children:(0,a.jsxs)("div",{className:"h-full max-w-container mx-auto px-6 flex items-center justify-between",children:[a.jsx("span",{className:"text-label text-white",children:"SARNIES"}),!t&&a.jsx("button",{onClick:()=>{confirm("Are you sure you want to log out?")&&(m(),s.push("/login"))},className:"p-2.5 -mr-2.5 text-white/60 hover:text-white transition-opacity","aria-label":"Log out",type:"button",children:a.jsx(d.Z,{className:"w-[18px] h-[18px]",strokeWidth:1.5})})]})}),a.jsx("main",{className:"pt-header pb-[calc(var(--nav-height)+env(safe-area-inset-bottom,0px)+16px)] min-h-screen",children:a.jsx("div",{className:"max-w-container mx-auto px-5 py-6",children:e})}),a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-fixed pb-safe",children:a.jsx("div",{className:"max-w-container mx-auto px-4",children:a.jsx("div",{className:"flex justify-around items-start h-[60px] pt-2.5",children:v.map(e=>{let t=e.icon,n=p===e.path||p.startsWith(e.path);return(0,a.jsxs)("button",{onClick:()=>s.push(e.path),className:"flex flex-col items-center justify-start min-w-[64px] py-1 transition-all active:scale-95",children:[(0,a.jsxs)("div",{className:"relative mb-1",children:[a.jsx(t,{className:`w-[22px] h-[22px] transition-colors ${n?"text-black stroke-[2]":"text-gray-400 stroke-[1.5]"}`}),n&&a.jsx("div",{className:`absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ${h?.user_type==="employee"?"bg-mustard":"bg-accent"}`})]}),a.jsx("span",{className:`text-nav ${n?"text-black":"text-gray-400"}`,children:e.label})]},e.path)})})})})]})}},58502:(e,t,s)=>{s.d(t,{t:()=>o});var a=s(10326),n=s(17577);let r=e=>{let{onRefresh:t,threshold:s=80,resistance:a=2.5}=e,[r,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(0),[c,d]=(0,n.useState)(!1),u=(0,n.useRef)(0),p=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=e=>{0===window.scrollY&&(u.current=e.touches[0].clientY,p.current=e.target)},n=e=>{if(c||window.scrollY>0)return;let t=e.touches[0].clientY-u.current;t>0&&(i(!0),l(Math.min(t/a,1.5*s)),t>10&&e.preventDefault())},h=async()=>{if(r){if(o>=s){d(!0);try{await t()}catch(e){}finally{d(!1)}}i(!1),l(0)}};return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchend",h),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",h)}},[r,o,c,t,s,a]),{isPulling:r,pullDistance:o,isRefreshing:c,shouldShowIndicator:r||c}};var i=s(21405);let o=({onRefresh:e,children:t})=>{let{isPulling:s,pullDistance:n,isRefreshing:o,shouldShowIndicator:l}=r({onRefresh:e});return(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:`fixed top-0 left-0 right-0 z-40 flex justify-center transition-all duration-200 ${l?"opacity-100":"opacity-0"}`,style:{transform:`translateY(${Math.min(n,80)}px)`},children:a.jsx("div",{className:"bg-white rounded-full shadow-lg p-3 mt-4",children:a.jsx(i.Z,{className:`w-5 h-5 text-gray-700 ${o?"animate-spin":""}`,style:{transform:o?"":`rotate(${o?360:n/80*180}deg)`,transition:o?"":"transform 0.1s ease-out"}})})}),t]})}},28632:(e,t,s)=>{s.d(t,{h:()=>i});var a=s(17577),n=s(35047);let r=(e={})=>{let{onSwipeLeft:t,onSwipeRight:s,threshold:n=50}=e,r=(0,a.useRef)(0),i=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=e=>{r.current=e.changedTouches[0].screenX},a=e=>{i.current=e.changedTouches[0].screenX,o()},o=()=>{let e=r.current-i.current;Math.abs(e)<n||(e>0?t?.():s?.())};return document.addEventListener("touchstart",e),document.addEventListener("touchend",a),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",a)}},[t,s,n])},i=()=>{let e=(0,n.useRouter)(),t=["/app/home","/app/rewards","/app/activity","/app/profile"],s=()=>0,a=a=>{let n;let r=s();(n="left"===a?Math.min(r+1,t.length-1):Math.max(r-1,0))!==r&&e.push(t[n])};r({onSwipeLeft:()=>a("left"),onSwipeRight:()=>a("right"),threshold:75})}},6824:(e,t,s)=>{s.d(t,{L2:()=>l,Vj:()=>d,Z1:()=>m,ZP:()=>n,cC:()=>h,h3:()=>i,hO:()=>o,kv:()=>r,nN:()=>u,oZ:()=>c,w2:()=>p,xf:()=>g});let a=s(94464).Z.create({baseURL:"https://loyalty.sarnies.tech/api",headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use(e=>e),a.interceptors.response.use(e=>e,e=>{if(e.response?.status===401){let t=window.location.pathname.includes("/login"),s=e.config?.url?.includes("/auth/"),a=localStorage.getItem("auth-storage");t||s||!a||(localStorage.removeItem("auth-storage"),window.location.href="/login")}return Promise.reject(e)});let n=a,r={staffLogin:(e,t)=>a.post("/auth/login",{email:e,password:t}),sendOTP:e=>a.post("/auth/otp/send",{phone:e}),verifyOTP:(e,t)=>a.post("/auth/otp/verify",{phone:e,otp:t}),sendEmailOTP:e=>a.post("/auth/otp/email/send",{email:e}),verifyEmailOTP:(e,t)=>a.post("/auth/otp/email/verify",{email:e,otp:t}),sendMagicLink:e=>a.post("/auth/magic-link/send",{email:e}),verifyMagicLink:e=>a.get(`/auth/magic-link/verify/${e}`)},i={getAll:e=>a.get("/users",{params:e}),getOne:e=>a.get(`/users/${e}`),update:(e,t)=>a.put(`/users/${e}`,t),adjustPoints:(e,t,s)=>a.post(`/users/${e}/points`,{points:t,reason:s}),getStaticQR:e=>a.get(`/users/${e}/static-qr`),getVoucherInstances:(e,t)=>a.get(`/users/${e}/voucher-instances`,{params:t?{status:t}:void 0})},o={getAll:()=>a.get("/vouchers"),getAllAdmin:()=>a.get("/vouchers/all"),getOne:e=>a.get(`/vouchers/${e}`),create:e=>a.post("/vouchers",e),update:(e,t)=>a.patch(`/vouchers/${e}`,t),delete:e=>a.delete(`/vouchers/${e}`),redeem:(e,t)=>a.post(`/vouchers/${e}/redeem`,{user_id:t}),getInstances:(e,t)=>a.get(`/vouchers/instances/${e}`,{params:{status:t}})},l={earnPoints:(e,t,s)=>a.post("/transactions/earn",{user_id:e,amount:t,outlet:s}),redeemVoucher:(e,t,s)=>a.post("/transactions/redeem",{user_id:e,voucher_id:t,outlet:s}),getAll:e=>a.get("/transactions",{params:e})},c={getAll:e=>a.get("/announcements",{params:{user_type:e}}),getAllAdmin:()=>a.get("/announcements/all"),getById:e=>a.get(`/announcements/${e}`),create:e=>a.post("/announcements",e),update:(e,t)=>a.patch(`/announcements/${e}`,t),delete:e=>a.delete(`/announcements/${e}`)},d={getCredits:()=>a.get("/investors/credits"),getOutletCredits:e=>a.get(`/investors/credits/outlet/${e}`),getTransactions:e=>a.get("/investors/transactions",{params:e}),allocateOutletCredits:(e,t)=>a.post(`/investors/admin/${e}/outlet-credits`,t),allocateGroupCredits:(e,t)=>a.post(`/investors/admin/${e}/group-credits`,t),adjustCredits:(e,t)=>a.patch(`/investors/admin/${e}/credits/adjust`,t),getExpiringCredits:e=>a.get("/investors/admin/credits/expiring",{params:e?{days:e}:void 0})},u={getBudget:()=>a.get("/media/budget"),getTransactions:e=>a.get("/media/transactions",{params:e}),setBudget:(e,t)=>a.post(`/media/admin/${e}/budget`,t),adjustBudget:(e,t)=>a.patch(`/media/admin/${e}/budget/adjust`,t),getExpiringBudgets:e=>a.get("/media/admin/budgets/expiring",{params:e?{days:e}:void 0}),getUsageReport:()=>a.get("/media/admin/usage-report")},p={getAll:()=>a.get("/settings"),getOne:e=>a.get(`/settings/${e}`),update:(e,t)=>a.put(`/settings/${e}`,{value:t}),bulkUpdate:e=>a.put("/settings",{settings:e}),create:e=>a.post("/settings",e)},h={getVapidKey:()=>a.get("/notifications/vapid-public-key"),subscribe:e=>a.post("/notifications/subscribe",{subscription:e.toJSON()}),unsubscribe:e=>a.post("/notifications/unsubscribe",{endpoint:e}),getStatus:()=>a.get("/notifications/status"),getPreferences:()=>a.get("/notifications/preferences"),updatePreferences:e=>a.patch("/notifications/preferences",{preferences:e}),sendTest:()=>a.post("/notifications/test"),getHistory:e=>a.get("/notifications/history",{params:e}),adminSend:e=>a.post("/notifications/admin/send",e),adminBroadcast:e=>a.post("/notifications/admin/broadcast",e),adminStats:()=>a.get("/notifications/admin/stats"),adminProcessQueue:()=>a.post("/notifications/admin/process-queue")},m={getMyCode:()=>a.get("/referrals/my-code"),getMyReferrals:()=>a.get("/referrals/my-referrals"),validateCode:e=>a.get(`/referrals/validate/${e}`),applyCode:e=>a.post("/referrals/apply",e),getAdminStats:()=>a.get("/referrals/admin/stats")},g={getAll:()=>a.get("/pos/keys"),create:e=>a.post("/pos/keys",e),revoke:e=>a.delete(`/pos/keys/${e}`),getLogs:(e,t)=>a.get(`/pos/keys/${e}/logs`,{params:t}),getStats:()=>a.get("/pos/keys/stats")}},16205:(e,t,s)=>{s.d(t,{t:()=>r});var a=s(60114),n=s(85251);let r=(0,a.Ue)()((0,n.tJ)(e=>({user:null,token:null,hasHydrated:!1,setAuth:(t,s)=>{e({user:t,token:s})},logout:()=>{e({user:null,token:null})},updateUser:t=>{e(e=>e.user?{user:{...e.user,...t}}:e)},setHasHydrated:t=>{e({hasHydrated:t})}}),{name:"auth-storage",storage:(0,n.FL)(()=>localStorage),onRehydrateStorage:()=>e=>{e?.setHasHydrated(!0)}}))},39183:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},85567:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]])},98908:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])}};